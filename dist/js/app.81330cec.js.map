{"version":3,"file":"js/app.81330cec.js","mappings":"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","sources":["webpack://vue-record-project/./src/utils/global-recorder.js","webpack://vue-record-project/./src/App.vue?5ef2","webpack://vue-record-project/src/App.vue","webpack://vue-record-project/./src/App.vue?6a4a","webpack://vue-record-project/./src/App.vue","webpack://vue-record-project/./src/views/SimpleRecord.vue?78c0","webpack://vue-record-project/src/views/SimpleRecord.vue","webpack://vue-record-project/./src/views/SimpleRecord.vue?60d1","webpack://vue-record-project/./src/views/SimpleRecord.vue","webpack://vue-record-project/./src/views/MultiPageRecord.vue?438d","webpack://vue-record-project/./src/views/pages/HomePage.vue?0ca4","webpack://vue-record-project/src/views/pages/HomePage.vue","webpack://vue-record-project/./src/views/pages/HomePage.vue?64fa","webpack://vue-record-project/./src/views/pages/HomePage.vue","webpack://vue-record-project/./src/views/pages/ProductsPage.vue?fa9b","webpack://vue-record-project/src/views/pages/ProductsPage.vue","webpack://vue-record-project/./src/views/pages/ProductsPage.vue?be82","webpack://vue-record-project/./src/views/pages/ProductsPage.vue","webpack://vue-record-project/./src/views/pages/ProductDetailPage.vue?232d","webpack://vue-record-project/src/views/pages/ProductDetailPage.vue","webpack://vue-record-project/./src/views/pages/ProductDetailPage.vue?20bb","webpack://vue-record-project/./src/views/pages/ProductDetailPage.vue","webpack://vue-record-project/./src/views/pages/PurchasePage.vue?aae7","webpack://vue-record-project/src/views/pages/PurchasePage.vue","webpack://vue-record-project/./src/views/pages/PurchasePage.vue?ce3d","webpack://vue-record-project/./src/views/pages/PurchasePage.vue","webpack://vue-record-project/./src/views/pages/RedeemPage.vue?604f","webpack://vue-record-project/src/views/pages/RedeemPage.vue","webpack://vue-record-project/./src/views/pages/RedeemPage.vue?0cab","webpack://vue-record-project/./src/views/pages/RedeemPage.vue","webpack://vue-record-project/src/views/MultiPageRecord.vue","webpack://vue-record-project/./src/views/MultiPageRecord.vue?77b3","webpack://vue-record-project/./src/views/MultiPageRecord.vue","webpack://vue-record-project/./src/views/RouterIndex.vue?e587","webpack://vue-record-project/src/views/RouterIndex.vue","webpack://vue-record-project/./src/views/RouterIndex.vue?16cf","webpack://vue-record-project/./src/views/RouterIndex.vue","webpack://vue-record-project/./src/views/Home.vue?4e0b","webpack://vue-record-project/src/views/Home.vue","webpack://vue-record-project/./src/views/Home.vue?2968","webpack://vue-record-project/./src/views/Home.vue","webpack://vue-record-project/./src/views/ProductList.vue?ee6f","webpack://vue-record-project/./src/components/RecordWrapper.vue?9ad9","webpack://vue-record-project/src/components/RecordWrapper.vue","webpack://vue-record-project/./src/components/RecordWrapper.vue?37d0","webpack://vue-record-project/./src/components/RecordWrapper.vue","webpack://vue-record-project/src/views/ProductList.vue","webpack://vue-record-project/./src/views/ProductList.vue?e641","webpack://vue-record-project/./src/views/ProductList.vue","webpack://vue-record-project/./src/views/ProductDetail.vue?3973","webpack://vue-record-project/src/views/ProductDetail.vue","webpack://vue-record-project/./src/views/ProductDetail.vue?bef2","webpack://vue-record-project/./src/views/ProductDetail.vue","webpack://vue-record-project/./src/views/Purchase.vue?f0d5","webpack://vue-record-project/src/views/Purchase.vue","webpack://vue-record-project/./src/views/Purchase.vue?543c","webpack://vue-record-project/./src/views/Purchase.vue","webpack://vue-record-project/./src/views/Redeem.vue?b498","webpack://vue-record-project/src/views/Redeem.vue","webpack://vue-record-project/./src/views/Redeem.vue?7d48","webpack://vue-record-project/./src/views/Redeem.vue","webpack://vue-record-project/./src/views/RecordPlayer.vue?a031","webpack://vue-record-project/./src/utils/screen-record.js","webpack://vue-record-project/src/views/RecordPlayer.vue","webpack://vue-record-project/./src/views/RecordPlayer.vue?c086","webpack://vue-record-project/./src/views/RecordPlayer.vue","webpack://vue-record-project/./src/views/pages/PurchaseStepOne.vue?df0a","webpack://vue-record-project/src/views/pages/PurchaseStepOne.vue","webpack://vue-record-project/./src/views/pages/PurchaseStepOne.vue?64c9","webpack://vue-record-project/./src/views/pages/PurchaseStepOne.vue","webpack://vue-record-project/./src/views/pages/PurchaseStepTwo.vue?7a66","webpack://vue-record-project/src/views/pages/PurchaseStepTwo.vue","webpack://vue-record-project/./src/views/pages/PurchaseStepTwo.vue?131c","webpack://vue-record-project/./src/views/pages/PurchaseStepTwo.vue","webpack://vue-record-project/./src/views/pages/PurchaseStepThree.vue?1b83","webpack://vue-record-project/src/views/pages/PurchaseStepThree.vue","webpack://vue-record-project/./src/views/pages/PurchaseStepThree.vue?f10e","webpack://vue-record-project/./src/views/pages/PurchaseStepThree.vue","webpack://vue-record-project/./src/views/pages/PurchaseStepFour.vue?a2de","webpack://vue-record-project/src/views/pages/PurchaseStepFour.vue","webpack://vue-record-project/./src/views/pages/PurchaseStepFour.vue?818a","webpack://vue-record-project/./src/views/pages/PurchaseStepFour.vue","webpack://vue-record-project/./src/router/index.js","webpack://vue-record-project/./src/main.js","webpack://vue-record-project/webpack/bootstrap","webpack://vue-record-project/webpack/runtime/chunk loaded","webpack://vue-record-project/webpack/runtime/compat get default export","webpack://vue-record-project/webpack/runtime/define property getters","webpack://vue-record-project/webpack/runtime/global","webpack://vue-record-project/webpack/runtime/hasOwnProperty shorthand","webpack://vue-record-project/webpack/runtime/make namespace object","webpack://vue-record-project/webpack/runtime/jsonp chunk loading","webpack://vue-record-project/webpack/startup"],"sourcesContent":["// import pako from 'pako' // 已移除，使用全局变量\r\nimport { record } from '../utils/screen-record'\r\n\r\nclass GlobalRecorder {\r\n  constructor() {\r\n    this.recorder = null\r\n    this.events = []\r\n    this.isRecording = false\r\n    this.listeners = []\r\n    this.recordingId = null\r\n    this.recordingStartTime = null\r\n    this.maxRecordingDuration = 3 * 60 * 1000 // 3分钟\r\n    console.log('GlobalRecorder：初始化完成')\r\n  }\r\n\r\n  // 获取全局唯一实例\r\n  static getInstance() {\r\n    if (!GlobalRecorder.instance) {\r\n      GlobalRecorder.instance = new GlobalRecorder()\r\n    }\r\n    return GlobalRecorder.instance\r\n  }\r\n\r\n  // 添加事件监听器\r\n  addListener(callback) {\r\n    this.listeners.push(callback)\r\n  }\r\n\r\n  // 移除事件监听器\r\n  removeListener(callback) {\r\n    const index = this.listeners.indexOf(callback)\r\n    if (index > -1) {\r\n      this.listeners.splice(index, 1)\r\n    }\r\n  }\r\n\r\n  // 触发事件\r\n  emit(event, data) {\r\n    this.listeners.forEach(callback => {\r\n      try {\r\n        callback(event, data)\r\n      } catch (error) {\r\n        console.error('监听器执行错误:', error)\r\n      }\r\n    })\r\n  }\r\n\r\n  // 开始录制\r\n  async startRecording(metadata = {}) {\r\n    if (this.isRecording) {\r\n      console.warn('录制已在进行中')\r\n      return false\r\n    }\r\n\r\n    try {\r\n      console.log('GlobalRecorder：开始录制...')\r\n      \r\n      this.recordingId = `rec_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\r\n      this.recordingStartTime = Date.now()\r\n      this.events = []\r\n      \r\n      // 检查全局rrweb是否可用\r\n      if (typeof window.rrweb === 'undefined') {\r\n        throw new Error('rrweb库未找到，请确保已正确引入')\r\n      }\r\n      \r\n      // 直接使用全局rrweb.record函数，并将事件存储到this.events\r\n      this.recorder = window.rrweb.record({\r\n        emit: (event) => {\r\n          // 直接将事件添加到全局数组\r\n          this.events.push(event)\r\n          console.log('GlobalRecorder：记录事件，类型:', event.type, '总数:', this.events.length)\r\n        },\r\n        checkoutEveryNms: 30 * 1000, // 每30秒创建一个检查点\r\n        recordCanvas: true,\r\n        collectFonts: true,\r\n        inlineStylesheet: true,\r\n        ...metadata\r\n      })\r\n      \r\n      if (this.recorder && typeof this.recorder === 'function') {\r\n        this.isRecording = true\r\n        this.emit('started', { recordingId: this.recordingId })\r\n        console.log('GlobalRecorder：录制开始成功')\r\n        return true\r\n      } else {\r\n        throw new Error('录制器初始化失败')\r\n      }\r\n    } catch (error) {\r\n      console.error('GlobalRecorder：开始录制失败:', error)\r\n      this.isRecording = false\r\n      this.emit('error', error)\r\n      return false\r\n    }\r\n  }\r\n\r\n  // 开始超时定时器\r\n  startTimeoutTimer() {\r\n    if (this.timeoutTimer) {\r\n      clearTimeout(this.timeoutTimer)\r\n    }\r\n    \r\n    this.timeoutTimer = setTimeout(() => {\r\n      this.handleRecordingTimeout()\r\n    }, this.maxRecordingDuration)\r\n    \r\n    console.log('全局录制器：超时定时器已启动，', this.maxRecordingDuration / 1000, '秒后超时')\r\n  }\r\n\r\n  // 处理录制超时\r\n  async handleRecordingTimeout() {\r\n    console.log('全局录制器：录制超时，自动停止录制')\r\n    \r\n    if (this.isRecording) {\r\n      try {\r\n        await this.stopRecording()\r\n        this.emit('timeout', {\r\n          duration: this.maxRecordingDuration,\r\n          message: '录制时间超过3分钟，已自动停止'\r\n        })\r\n      } catch (error) {\r\n        console.error('超时停止录制失败:', error)\r\n      }\r\n    }\r\n  }\r\n\r\n  // 清除超时定时器\r\n  clearTimeoutTimer() {\r\n    if (this.timeoutTimer) {\r\n      clearTimeout(this.timeoutTimer)\r\n      this.timeoutTimer = null\r\n      console.log('全局录制器：超时定时器已清除')\r\n    }\r\n  }\r\n\r\n  // 停止录制\r\n  async stopRecording() {\r\n    if (!this.isRecording) {\r\n      console.warn('录制未开始')\r\n      return null\r\n    }\r\n\r\n    try {\r\n      console.log('GlobalRecorder：停止录制...')\r\n      \r\n      if (this.recorder && typeof this.recorder === 'function') {\r\n        this.recorder() // 调用停止函数\r\n      }\r\n      \r\n      this.isRecording = false\r\n      const events = [...this.events]\r\n      \r\n      console.log('GlobalRecorder：录制停止成功, 事件数量:', events.length)\r\n      console.log('GlobalRecorder：前3个事件:', events.slice(0, 3))\r\n      \r\n      this.emit('stopped', { events })\r\n      \r\n      return events\r\n    } catch (error) {\r\n      console.error('GlobalRecorder：停止录制失败:', error)\r\n      this.isRecording = false\r\n      this.emit('error', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  // 获取录制状态\r\n  getRecordingStatus() {\r\n    return {\r\n      isRecording: this.isRecording,\r\n      recordingId: this.recordingId,\r\n      eventCount: this.events.length,\r\n      startTime: this.recordingStartTime\r\n    }\r\n  }\r\n\r\n  // 停止录制并处理数据\r\n  async stopRecordingAndProcess(additionalInfo = {}) {\r\n    try {\r\n      console.log('GlobalRecorder：停止录制并处理数据...')\r\n      \r\n      const events = await this.stopRecording()\r\n      \r\n      if (!events || events.length === 0) {\r\n        return {\r\n          success: false,\r\n          error: '录制数据为空'\r\n        }\r\n      }\r\n\r\n      console.log('GlobalRecorder：开始处理录制数据，事件数量:', events.length)\r\n      \r\n      // 验证事件数据格式\r\n      const validEvents = events.filter(event => event && event.type !== undefined && event.timestamp)\r\n      if (validEvents.length === 0) {\r\n        return {\r\n          success: false,\r\n          error: '录制数据格式无效'\r\n        }\r\n      }\r\n      \r\n      console.log('GlobalRecorder：有效事件数量:', validEvents.length)\r\n      \r\n      // 计算录制时长\r\n      const duration = this.recordingStartTime ? Date.now() - this.recordingStartTime : 0\r\n      \r\n      // 准备基础数据\r\n      const baseData = {\r\n        recordingId: this.recordingId,\r\n        events: validEvents,\r\n        startTime: new Date(this.recordingStartTime).toISOString(),\r\n        endTime: new Date().toISOString(),\r\n        duration: duration,\r\n        totalEvents: validEvents.length,\r\n        ...additionalInfo\r\n      }\r\n      \r\n      // 序列化原始数据\r\n      const originalData = JSON.stringify(baseData)\r\n      const originalSize = new Blob([originalData]).size\r\n      \r\n      console.log('GlobalRecorder：原始数据大小:', originalSize, '字节')\r\n      \r\n      // 使用全局pako进行压缩\r\n      if (typeof window.pako === 'undefined') {\r\n        throw new Error('pako压缩库未找到，请确保已正确引入')\r\n      }\r\n      \r\n      const compressed = window.pako.gzip(originalData)\r\n      const compressedSize = compressed.length\r\n      const compressionRatio = ((1 - compressedSize / originalSize) * 100).toFixed(2) + '%'\r\n      \r\n      console.log('GlobalRecorder：压缩后大小:', compressedSize, '字节，压缩率:', compressionRatio)\r\n      \r\n      // 准备最终数据\r\n      const finalData = {\r\n        ...baseData,\r\n        compressedEvents: Array.from(compressed) // 转换为数组便于传输\r\n      }\r\n      \r\n      const result = {\r\n        success: true,\r\n        recordingResult: {\r\n          events: validEvents,\r\n          duration: duration,\r\n          eventCount: validEvents.length\r\n        },\r\n        data: {\r\n          recordingId: this.recordingId,\r\n          startTime: baseData.startTime,\r\n          endTime: baseData.endTime,\r\n          duration: duration,\r\n          finalData: finalData,\r\n          sizes: {\r\n            original: originalSize,\r\n            compressed: compressedSize\r\n          },\r\n          compressionRatio: compressionRatio\r\n        }\r\n      }\r\n      \r\n      console.log('GlobalRecorder：数据处理完成')\r\n      return result\r\n      \r\n    } catch (error) {\r\n      console.error('GlobalRecorder：处理录制数据失败:', error)\r\n      return {\r\n        success: false,\r\n        error: error.message\r\n      }\r\n    }\r\n  }\r\n\r\n  // 完成录制（供外部页面调用的简单接口）\r\n  async finishRecording(businessData = {}) {\r\n    console.log('GlobalRecorder：收到完成录制请求，业务数据:', businessData)\r\n    \r\n    try {\r\n      // 调用内部的停止录制并处理方法\r\n      const result = await this.stopRecordingAndProcess(businessData)\r\n      \r\n      // 发送完成事件给父组件\r\n      this.emit('recording-finished', result)\r\n      \r\n      return result\r\n    } catch (error) {\r\n      console.error('GlobalRecorder：完成录制失败:', error)\r\n      const errorResult = {\r\n        success: false,\r\n        error: error.message,\r\n        message: '录制完成处理失败'\r\n      }\r\n      \r\n      this.emit('recording-finished', errorResult)\r\n      return errorResult\r\n    }\r\n  }\r\n}\r\n\r\nexport default GlobalRecorder ","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"app\">\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App'\r\n}\r\n</script>\r\n\r\n<style>\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\nhtml, body {\r\n  height: 100%;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', Helvetica, Segoe UI, Arial, Roboto, 'PingFang SC', 'miui', 'Hiragino Sans GB', 'Microsoft Yahei', sans-serif;\r\n}\r\n\r\n#app {\r\n  height: 100%;\r\n  background-color: #f7f8fa;\r\n}\r\n</style> ","import mod from \"-!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6adc8546\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=6adc8546&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"simple-record\"},[_c('van-nav-bar',{attrs:{\"title\":\"页面录制\",\"fixed\":\"\"}}),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"control-section\"},[_c('div',{staticClass:\"status-info\"},[_c('div',{staticClass:\"status-text\"},[(!_vm.isRecording && !_vm.recordData)?_c('span',[_vm._v(\"准备录制\")]):_vm._e(),(_vm.isRecording)?_c('span',[_vm._v(\"正在录制中...\")]):_vm._e(),(!_vm.isRecording && _vm.recordData)?_c('span',[_vm._v(\"录制完成\")]):_vm._e()]),(_vm.isRecording)?_c('div',{staticClass:\"recording-indicator\"},[_c('div',{staticClass:\"red-dot\"}),_c('span',[_vm._v(\"REC\")])]):_vm._e()]),_c('div',{staticClass:\"control-buttons\"},[(!_vm.isRecording && !_vm.recordData)?_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\",\"loading\":_vm.loading,\"icon\":\"video-o\"},on:{\"click\":_vm.startRecord}},[_vm._v(\" 开始录制 \")]):_vm._e(),(_vm.isRecording)?_c('van-button',{attrs:{\"type\":\"danger\",\"size\":\"large\",\"block\":\"\",\"round\":\"\",\"loading\":_vm.loading,\"icon\":\"stop\"},on:{\"click\":_vm.stopRecord}},[_vm._v(\" 停止录制 \")]):_vm._e(),(!_vm.isRecording && _vm.recordData)?_c('div',{staticClass:\"action-buttons\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"round\":\"\",\"icon\":\"play\"},on:{\"click\":_vm.playRecord}},[_vm._v(\" 播放回放 \")]),_c('van-button',{attrs:{\"type\":\"info\",\"size\":\"large\",\"round\":\"\",\"loading\":_vm.downloading,\"icon\":\"download\"},on:{\"click\":_vm.downloadCompressedFile}},[_vm._v(\" 下载压缩文件 \")]),_c('van-button',{attrs:{\"type\":\"success\",\"size\":\"large\",\"round\":\"\",\"loading\":_vm.uploading,\"icon\":\"cloud-upload\"},on:{\"click\":_vm.uploadRecord}},[_vm._v(\" 上传录制 \")]),_c('van-button',{attrs:{\"size\":\"large\",\"round\":\"\",\"icon\":\"refresh\"},on:{\"click\":_vm.resetRecord}},[_vm._v(\" 重新录制 \")])],1):_vm._e()],1)]),(_vm.recordData)?_c('div',{staticClass:\"record-info\"},[_c('van-cell-group',{attrs:{\"title\":\"录制信息\"}},[_c('van-cell',{attrs:{\"title\":\"录制时长\",\"value\":_vm.recordDuration}}),_c('van-cell',{attrs:{\"title\":\"事件数量\",\"value\":_vm.recordData.events ? _vm.recordData.events.length : 0}}),_c('van-cell',{attrs:{\"title\":\"数据大小\",\"value\":_vm.recordSize}}),_c('van-cell',{attrs:{\"title\":\"录制时间\",\"value\":_vm.recordTime}})],1)],1):_vm._e(),(_vm.showPlayer)?_c('div',{staticClass:\"player-section\"},[_c('div',{staticClass:\"player-header\"},[_c('h3',[_vm._v(\"录制回放\")]),_c('van-button',{attrs:{\"size\":\"small\",\"icon\":\"cross\"},on:{\"click\":_vm.closePlayer}},[_vm._v(\"关闭\")])],1),_c('div',{ref:\"playerContainer\",staticClass:\"player-container\"}),_c('div',{staticClass:\"player-controls\"},[_c('van-button',{attrs:{\"size\":\"small\",\"icon\":_vm.isPlaying ? 'pause' : 'play'},on:{\"click\":_vm.togglePlay}},[_vm._v(\" \"+_vm._s(_vm.isPlaying ? '暂停' : '播放')+\" \")]),_c('van-button',{attrs:{\"size\":\"small\",\"icon\":\"replay\"},on:{\"click\":_vm.resetPlayer}},[_vm._v(\"重播\")])],1)]):_vm._e(),_c('div',{staticClass:\"demo-section\"},[_c('van-cell-group',{attrs:{\"title\":\"演示操作区域\"}},[_c('van-cell',{attrs:{\"title\":\"点击这里\",\"is-link\":\"\"},on:{\"click\":_vm.demoClick}}),_c('van-field',{attrs:{\"label\":\"输入文本\",\"placeholder\":\"在这里输入一些文字\"},model:{value:(_vm.demoText),callback:function ($$v) {_vm.demoText=$$v},expression:\"demoText\"}}),_c('van-cell',{attrs:{\"title\":\"切换开关\"},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [_c('van-switch',{model:{value:(_vm.demoSwitch),callback:function ($$v) {_vm.demoSwitch=$$v},expression:\"demoSwitch\"}})]},proxy:true}])})],1),_c('div',{staticClass:\"demo-buttons\"},[_c('van-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.demoAlert}},[_vm._v(\"显示弹窗\")]),_c('van-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.demoToast}},[_vm._v(\"显示提示\")])],1)],1),_c('div',{staticClass:\"navigation-section\"},[_c('van-cell-group',{attrs:{\"title\":\"录制模式\"}},[_c('van-cell',{attrs:{\"title\":\"多页面录制\",\"is-link\":\"\"},on:{\"click\":_vm.goToMultiPage}})],1)],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"simple-record\">\r\n    <van-nav-bar title=\"页面录制\" fixed />\r\n    \r\n    <div class=\"content\">\r\n      <!-- 录制控制区域 -->\r\n      <div class=\"control-section\">\r\n        <div class=\"status-info\">\r\n          <div class=\"status-text\">\r\n            <span v-if=\"!isRecording && !recordData\">准备录制</span>\r\n            <span v-if=\"isRecording\">正在录制中...</span>\r\n            <span v-if=\"!isRecording && recordData\">录制完成</span>\r\n          </div>\r\n          <div v-if=\"isRecording\" class=\"recording-indicator\">\r\n            <div class=\"red-dot\"></div>\r\n            <span>REC</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"control-buttons\">\r\n          <van-button \r\n            v-if=\"!isRecording && !recordData\"\r\n            type=\"primary\" \r\n            size=\"large\" \r\n            block\r\n            round\r\n            @click=\"startRecord\"\r\n            :loading=\"loading\"\r\n            icon=\"video-o\"\r\n          >\r\n            开始录制\r\n          </van-button>\r\n\r\n          <van-button \r\n            v-if=\"isRecording\"\r\n            type=\"danger\" \r\n            size=\"large\" \r\n            block\r\n            round\r\n            @click=\"stopRecord\"\r\n            :loading=\"loading\"\r\n            icon=\"stop\"\r\n          >\r\n            停止录制\r\n          </van-button>\r\n\r\n          <div v-if=\"!isRecording && recordData\" class=\"action-buttons\">\r\n            <van-button \r\n              type=\"primary\" \r\n              size=\"large\"\r\n              round\r\n              @click=\"playRecord\"\r\n              icon=\"play\"\r\n            >\r\n              播放回放\r\n            </van-button>\r\n            <van-button \r\n              type=\"info\" \r\n              size=\"large\"\r\n              round\r\n              @click=\"downloadCompressedFile\"\r\n              :loading=\"downloading\"\r\n              icon=\"download\"\r\n            >\r\n              下载压缩文件\r\n            </van-button>\r\n            <van-button \r\n              type=\"success\" \r\n              size=\"large\"\r\n              round\r\n              @click=\"uploadRecord\"\r\n              :loading=\"uploading\"\r\n              icon=\"cloud-upload\"\r\n            >\r\n              上传录制\r\n            </van-button>\r\n            <van-button \r\n              size=\"large\"\r\n              round\r\n              @click=\"resetRecord\"\r\n              icon=\"refresh\"\r\n            >\r\n              重新录制\r\n            </van-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 录制信息 -->\r\n      <div v-if=\"recordData\" class=\"record-info\">\r\n        <van-cell-group title=\"录制信息\">\r\n          <van-cell title=\"录制时长\" :value=\"recordDuration\" />\r\n          <van-cell title=\"事件数量\" :value=\"recordData.events ? recordData.events.length : 0\" />\r\n          <van-cell title=\"数据大小\" :value=\"recordSize\" />\r\n          <van-cell title=\"录制时间\" :value=\"recordTime\" />\r\n        </van-cell-group>\r\n      </div>\r\n\r\n      <!-- 回放区域 -->\r\n      <div v-if=\"showPlayer\" class=\"player-section\">\r\n        <div class=\"player-header\">\r\n          <h3>录制回放</h3>\r\n          <van-button size=\"small\" @click=\"closePlayer\" icon=\"cross\">关闭</van-button>\r\n        </div>\r\n        <div ref=\"playerContainer\" class=\"player-container\"></div>\r\n        <div class=\"player-controls\">\r\n          <van-button size=\"small\" @click=\"togglePlay\" :icon=\"isPlaying ? 'pause' : 'play'\">\r\n            {{ isPlaying ? '暂停' : '播放' }}\r\n          </van-button>\r\n          <van-button size=\"small\" @click=\"resetPlayer\" icon=\"replay\">重播</van-button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 演示内容区域 -->\r\n      <div class=\"demo-section\">\r\n        <van-cell-group title=\"演示操作区域\">\r\n          <van-cell title=\"点击这里\" is-link @click=\"demoClick\" />\r\n          <van-field v-model=\"demoText\" label=\"输入文本\" placeholder=\"在这里输入一些文字\" />\r\n          <van-cell title=\"切换开关\">\r\n            <template #right-icon>\r\n              <van-switch v-model=\"demoSwitch\" />\r\n            </template>\r\n          </van-cell>\r\n        </van-cell-group>\r\n\r\n        <div class=\"demo-buttons\">\r\n          <van-button type=\"primary\" @click=\"demoAlert\">显示弹窗</van-button>\r\n          <van-button type=\"warning\" @click=\"demoToast\">显示提示</van-button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 页面跳转区域 -->\r\n      <div class=\"navigation-section\">\r\n        <van-cell-group title=\"录制模式\">\r\n          <van-cell title=\"多页面录制\" is-link @click=\"goToMultiPage\" />\r\n        </van-cell-group>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { record } from 'rrweb' // 已移除，使用全局变量\r\n// import rrwebPlayer from 'rrweb-player' // 已移除，使用全局变量\r\n// import pako from 'pako' // 已移除，使用全局变量\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'SimpleRecord',\r\n  data() {\r\n    return {\r\n      isRecording: false,\r\n      loading: false,\r\n      uploading: false,\r\n      downloading: false,\r\n      recordData: null,\r\n      recordTime: '',\r\n      stopFn: null,\r\n      events: [],\r\n      \r\n      // 播放器相关\r\n      showPlayer: false,\r\n      player: null,\r\n      isPlaying: false,\r\n      \r\n      // 演示数据\r\n      demoText: '',\r\n      demoSwitch: false\r\n    }\r\n  },\r\n  computed: {\r\n    recordDuration() {\r\n      if (!this.recordData || !this.recordData.metadata) return '0秒'\r\n      const duration = Math.round(this.recordData.metadata.duration / 1000)\r\n      return `${duration}秒`\r\n    },\r\n    recordSize() {\r\n      if (!this.recordData) return '0KB'\r\n      const size = JSON.stringify(this.recordData).length\r\n      return `${(size / 1024).toFixed(2)}KB`\r\n    }\r\n  },\r\n  methods: {\r\n    // 开始录制\r\n    async startRecord() {\r\n      this.loading = true\r\n      try {\r\n        // 等待页面完全加载\r\n        await this.waitForPageLoad()\r\n        \r\n        this.events = []\r\n        this.recordData = null\r\n        \r\n        // 检查全局rrweb是否可用\r\n        if (typeof window.rrweb === 'undefined') {\r\n          throw new Error('rrweb库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        console.log('SimpleRecord：开始录制，rrweb版本:', window.rrweb)\r\n        \r\n        // 开始rrweb录制\r\n        this.stopFn = window.rrweb.record({\r\n          emit: (event) => {\r\n            this.events.push(event)\r\n            console.log('SimpleRecord：记录事件，类型:', event.type, '总数:', this.events.length)\r\n          },\r\n          recordCanvas: true,\r\n          collectFonts: true,\r\n          checkoutEveryNms: 30 * 1000 // 每30秒创建一个检查点\r\n        })\r\n        \r\n        this.isRecording = true\r\n        this.recordTime = new Date().toLocaleString()\r\n        this.$toast.success('开始录制')\r\n        \r\n        console.log('SimpleRecord：录制启动成功，stopFn:', typeof this.stopFn)\r\n      } catch (error) {\r\n        console.error('录制失败:', error)\r\n        this.$toast.fail('录制失败: ' + error.message)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // 停止录制\r\n    async stopRecord() {\r\n      this.loading = true\r\n      try {\r\n        if (this.stopFn) {\r\n          this.stopFn()\r\n          this.stopFn = null\r\n        }\r\n        \r\n        this.isRecording = false\r\n        \r\n        // 生成录制数据\r\n        this.recordData = {\r\n          events: this.events,\r\n          metadata: {\r\n            recordTime: Date.now(),\r\n            eventsCount: this.events.length,\r\n            duration: this.events.length > 0 ? \r\n              this.events[this.events.length - 1].timestamp - this.events[0].timestamp : 0\r\n          }\r\n        }\r\n        \r\n        this.$toast.success('录制完成')\r\n      } catch (error) {\r\n        console.error('停止录制失败:', error)\r\n        this.$toast.fail('停止录制失败')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // 播放录制\r\n    async playRecord() {\r\n      if (!this.recordData || !this.recordData.events) {\r\n        this.$toast.fail('没有录制数据')\r\n        return\r\n      }\r\n      \r\n      // 检查事件数量\r\n      if (this.recordData.events.length < 2) {\r\n        this.$toast.fail('录制事件不足，无法回放')\r\n        return\r\n      }\r\n      \r\n      this.showPlayer = true\r\n      await this.$nextTick()\r\n      \r\n      try {\r\n        // 清理之前的播放器\r\n        if (this.$refs.playerContainer) {\r\n          this.$refs.playerContainer.innerHTML = ''\r\n        }\r\n        \r\n        // 检查全局rrweb-player是否可用\r\n        if (typeof window.rrwebPlayer === 'undefined') {\r\n          throw new Error('rrweb-player库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        // 创建新的播放器\r\n        this.player = new window.rrwebPlayer({\r\n          target: this.$refs.playerContainer,\r\n          props: {\r\n            events: this.recordData.events,\r\n            width: 375,\r\n            height: 400,\r\n            autoPlay: false,\r\n            showController: true,\r\n            skipInactive: true,\r\n            speed: 1\r\n          }\r\n        })\r\n        \r\n        this.isPlaying = false\r\n        this.$toast.success('录制加载成功')\r\n        \r\n        // 监听播放器事件\r\n        if (this.player && this.player.addEventListener) {\r\n          this.player.addEventListener('finish', () => {\r\n            this.isPlaying = false\r\n          })\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('播放失败:', error)\r\n        this.$toast.fail('播放失败: ' + error.message)\r\n        this.showPlayer = false\r\n      }\r\n    },\r\n\r\n    // 上传录制\r\n    async uploadRecord() {\r\n      if (!this.recordData) {\r\n        this.$toast.fail('没有录制数据')\r\n        return\r\n      }\r\n      \r\n      this.uploading = true\r\n      try {\r\n        // 生成压缩文件\r\n        const result = await this.generateCompressedFile()\r\n        \r\n        if (!result.success) {\r\n          this.$toast.fail(result.message)\r\n          return\r\n        }\r\n        \r\n        // 模拟上传到服务器\r\n        console.log('上传数据:', result.data)\r\n        console.log('文件大小:', (result.size / 1024 / 1024).toFixed(2) + 'MB')\r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        \r\n        this.$toast.success(`上传成功 (${(result.size / 1024 / 1024).toFixed(2)}MB)`)\r\n      } catch (error) {\r\n        console.error('上传失败:', error)\r\n        this.$toast.fail('上传失败')\r\n      } finally {\r\n        this.uploading = false\r\n      }\r\n    },\r\n\r\n    // 生成压缩文件\r\n    async generateCompressedFile() {\r\n      try {\r\n        const MAX_SIZE = 2 * 1024 * 1024 // 2MB限制\r\n        \r\n        // 优化录制数据\r\n        let optimizedData = this.optimizeRecordData(this.recordData)\r\n        \r\n        // 检查全局pako是否可用\r\n        if (typeof window.pako === 'undefined') {\r\n          throw new Error('pako压缩库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        // 压缩数据\r\n        const jsonString = JSON.stringify(optimizedData)\r\n        const compressed = window.pako.gzip(jsonString)\r\n        \r\n        const compressedData = {\r\n          compressed: true,\r\n          data: Array.from(compressed),\r\n          originalSize: jsonString.length,\r\n          compressedSize: compressed.length,\r\n          metadata: optimizedData.metadata,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n        \r\n        const finalJson = JSON.stringify(compressedData)\r\n        const finalSize = finalJson.length\r\n        \r\n        console.log('文件大小检查:')\r\n        console.log('原始数据:', (jsonString.length / 1024).toFixed(2) + 'KB')\r\n        console.log('压缩后:', (compressed.length / 1024).toFixed(2) + 'KB')\r\n        console.log('最终JSON:', (finalSize / 1024).toFixed(2) + 'KB')\r\n        console.log('压缩比:', ((1 - compressed.length / jsonString.length) * 100).toFixed(2) + '%')\r\n        \r\n        // 检查文件大小\r\n        if (finalSize > MAX_SIZE) {\r\n          // 如果超过2MB，进一步优化\r\n          const furtherOptimized = this.furtherOptimizeData(optimizedData)\r\n          const recompressed = window.pako.gzip(JSON.stringify(furtherOptimized))\r\n          \r\n          const newCompressedData = {\r\n            compressed: true,\r\n            data: Array.from(recompressed),\r\n            originalSize: JSON.stringify(furtherOptimized).length,\r\n            compressedSize: recompressed.length,\r\n            metadata: furtherOptimized.metadata,\r\n            timestamp: new Date().toISOString(),\r\n            optimized: true\r\n          }\r\n          \r\n          const newFinalJson = JSON.stringify(newCompressedData)\r\n          const newFinalSize = newFinalJson.length\r\n          \r\n          console.log('进一步优化后:', (newFinalSize / 1024).toFixed(2) + 'KB')\r\n          \r\n          if (newFinalSize > MAX_SIZE) {\r\n            return {\r\n              success: false,\r\n              message: `文件过大 (${(newFinalSize / 1024 / 1024).toFixed(2)}MB)，请缩短录制时间`\r\n            }\r\n          }\r\n          \r\n          return {\r\n            success: true,\r\n            data: newCompressedData,\r\n            size: newFinalSize,\r\n            optimized: true\r\n          }\r\n        }\r\n        \r\n        return {\r\n          success: true,\r\n          data: compressedData,\r\n          size: finalSize,\r\n          optimized: false\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('压缩失败:', error)\r\n        return {\r\n          success: false,\r\n          message: '数据压缩失败'\r\n        }\r\n      }\r\n    },\r\n\r\n    // 优化录制数据\r\n    optimizeRecordData(data) {\r\n      const optimized = {\r\n        events: data.events.map(event => {\r\n          // 移除不必要的字段，保留核心数据\r\n          const optimizedEvent = {\r\n            type: event.type,\r\n            timestamp: event.timestamp\r\n          }\r\n          \r\n          // 只保留必要的data字段\r\n          if (event.data) {\r\n            optimizedEvent.data = {}\r\n            \r\n            // 根据事件类型保留关键字段\r\n            switch (event.type) {\r\n              case 0: // DomContentLoaded\r\n              case 1: // Load\r\n                optimizedEvent.data = {\r\n                  href: event.data.href,\r\n                  width: event.data.width,\r\n                  height: event.data.height\r\n                }\r\n                break\r\n              case 2: // FullSnapshot\r\n                optimizedEvent.data = {\r\n                  node: event.data.node,\r\n                  initialOffset: event.data.initialOffset\r\n                }\r\n                break\r\n              case 3: // IncrementalSnapshot\r\n                optimizedEvent.data = {\r\n                  source: event.data.source,\r\n                  type: event.data.type,\r\n                  id: event.data.id\r\n                }\r\n                // 根据具体类型添加必要字段\r\n                if (event.data.positions) optimizedEvent.data.positions = event.data.positions\r\n                if (event.data.texts) optimizedEvent.data.texts = event.data.texts\r\n                if (event.data.attributes) optimizedEvent.data.attributes = event.data.attributes\r\n                break\r\n              default:\r\n                optimizedEvent.data = event.data\r\n            }\r\n          }\r\n          \r\n          return optimizedEvent\r\n        }),\r\n        metadata: data.metadata\r\n      }\r\n      \r\n      return optimized\r\n    },\r\n\r\n    // 进一步优化数据\r\n    furtherOptimizeData(data) {\r\n      // 采样优化：保留关键事件，减少冗余事件\r\n      const keyEvents = []\r\n      const SAMPLE_INTERVAL = 100 // 每100ms保留一个事件\r\n      \r\n      let lastTimestamp = 0\r\n      \r\n      data.events.forEach(event => {\r\n        // 始终保留关键事件类型\r\n        if (event.type === 0 || event.type === 1 || event.type === 2) {\r\n          keyEvents.push(event)\r\n          lastTimestamp = event.timestamp\r\n        } else {\r\n          // 对其他事件进行采样\r\n          if (event.timestamp - lastTimestamp >= SAMPLE_INTERVAL) {\r\n            keyEvents.push(event)\r\n            lastTimestamp = event.timestamp\r\n          }\r\n        }\r\n      })\r\n      \r\n      return {\r\n        events: keyEvents,\r\n        metadata: {\r\n          ...data.metadata,\r\n          originalEventsCount: data.events.length,\r\n          sampledEventsCount: keyEvents.length,\r\n          optimized: true\r\n        }\r\n      }\r\n    },\r\n\r\n    // 下载压缩文件\r\n    async downloadCompressedFile() {\r\n      if (!this.recordData) {\r\n        this.$toast.fail('没有录制数据')\r\n        return\r\n      }\r\n      \r\n      this.downloading = true\r\n      try {\r\n        const result = await this.generateCompressedFile()\r\n        \r\n        if (!result.success) {\r\n          this.$toast.fail(result.message)\r\n          return\r\n        }\r\n        \r\n        // 生成文件名\r\n        const timestamp = new Date().toISOString().replace(/[:.]/g, '-')\r\n        const filename = `record-compressed-${timestamp}.json`\r\n        \r\n        // 下载文件\r\n        const content = JSON.stringify(result.data, null, 2)\r\n        this.downloadFile(content, filename, 'application/json')\r\n        \r\n        const sizeInfo = (result.size / 1024).toFixed(2)\r\n        const optimizedText = result.optimized ? ' (已优化)' : ''\r\n        this.$toast.success(`文件已下载 (${sizeInfo}KB)${optimizedText}`)\r\n        \r\n      } catch (error) {\r\n        console.error('下载失败:', error)\r\n        this.$toast.fail('下载失败')\r\n      } finally {\r\n        this.downloading = false\r\n      }\r\n    },\r\n\r\n    // 下载文件\r\n    downloadFile(content, filename, mimeType) {\r\n      const blob = new Blob([content], { type: mimeType })\r\n      const url = URL.createObjectURL(blob)\r\n      const link = document.createElement('a')\r\n      link.href = url\r\n      link.download = filename\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      URL.revokeObjectURL(url)\r\n    },\r\n\r\n    // 重新录制\r\n    resetRecord() {\r\n      this.recordData = null\r\n      this.events = []\r\n      this.closePlayer()\r\n      this.$toast.success('已重置，可以重新录制')\r\n    },\r\n\r\n    // 播放控制\r\n    togglePlay() {\r\n      if (!this.player) return\r\n      \r\n      try {\r\n        if (this.isPlaying) {\r\n          if (typeof this.player.pause === 'function') {\r\n            this.player.pause()\r\n          }\r\n        } else {\r\n          if (typeof this.player.play === 'function') {\r\n            this.player.play()\r\n          }\r\n        }\r\n        this.isPlaying = !this.isPlaying\r\n      } catch (error) {\r\n        console.warn('播放控制出错:', error)\r\n        this.$toast.fail('播放控制失败')\r\n      }\r\n    },\r\n\r\n    resetPlayer() {\r\n      if (!this.player) return\r\n      \r\n      try {\r\n        if (typeof this.player.goto === 'function') {\r\n          this.player.goto(0)\r\n        } else if (typeof this.player.setCurrentTime === 'function') {\r\n          this.player.setCurrentTime(0)\r\n        }\r\n        this.isPlaying = false\r\n      } catch (error) {\r\n        console.warn('重置播放器出错:', error)\r\n        this.$toast.fail('重置失败')\r\n      }\r\n    },\r\n\r\n    closePlayer() {\r\n      if (this.player) {\r\n        try {\r\n          // 尝试不同的销毁方法\r\n          if (typeof this.player.destroy === 'function') {\r\n            this.player.destroy()\r\n          } else if (typeof this.player.$destroy === 'function') {\r\n            this.player.$destroy()\r\n          } else if (this.player.$el && this.player.$el.parentNode) {\r\n            // 直接移除DOM元素\r\n            this.player.$el.parentNode.removeChild(this.player.$el)\r\n          }\r\n        } catch (error) {\r\n          console.warn('播放器销毁时出现警告:', error)\r\n        }\r\n        this.player = null\r\n      }\r\n      \r\n      // 清理播放器容器\r\n      if (this.$refs.playerContainer) {\r\n        this.$refs.playerContainer.innerHTML = ''\r\n      }\r\n      \r\n      this.showPlayer = false\r\n      this.isPlaying = false\r\n    },\r\n\r\n    // 等待页面加载\r\n    waitForPageLoad() {\r\n      return new Promise((resolve) => {\r\n        if (document.readyState === 'complete') {\r\n          setTimeout(resolve, 500)\r\n        } else {\r\n          window.addEventListener('load', () => {\r\n            setTimeout(resolve, 500)\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 演示操作\r\n    demoClick() {\r\n      this.$toast('你点击了演示按钮')\r\n    },\r\n\r\n    demoAlert() {\r\n      this.$dialog.alert({\r\n        message: '这是一个演示弹窗'\r\n      })\r\n    },\r\n\r\n    demoToast() {\r\n      this.$toast.success('这是一个演示提示')\r\n    },\r\n\r\n    // 跳转到多页面录制\r\n    goToMultiPage() {\r\n      this.$router.push('/multi-page')\r\n    }\r\n  },\r\n\r\n  beforeDestroy() {\r\n    if (this.isRecording && this.stopFn) {\r\n      this.stopFn()\r\n    }\r\n    this.closePlayer()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.simple-record {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.control-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.status-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.status-text {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: #323233;\r\n}\r\n\r\n.recording-indicator {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #ee0a24;\r\n  font-weight: 500;\r\n}\r\n\r\n.red-dot {\r\n  width: 8px;\r\n  height: 8px;\r\n  background: #ee0a24;\r\n  border-radius: 50%;\r\n  margin-right: 6px;\r\n  animation: blink 1s infinite;\r\n}\r\n\r\n@keyframes blink {\r\n  0%, 50% { opacity: 1; }\r\n  51%, 100% { opacity: 0.3; }\r\n}\r\n\r\n.control-buttons .van-button {\r\n  height: 48px;\r\n  font-size: 16px;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.record-info {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.player-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.player-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.player-header h3 {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  color: #323233;\r\n}\r\n\r\n.player-container {\r\n  border: 1px solid #ebedf0;\r\n  border-radius: 8px;\r\n  margin-bottom: 16px;\r\n  min-height: 300px;\r\n  overflow: hidden;\r\n}\r\n\r\n.player-controls {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: center;\r\n}\r\n\r\n.demo-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.demo-buttons {\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-top: 16px;\r\n}\r\n\r\n.demo-buttons .van-button {\r\n  flex: 1;\r\n}\r\n\r\n.navigation-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SimpleRecord.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SimpleRecord.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SimpleRecord.vue?vue&type=template&id=14bad980&scoped=true\"\nimport script from \"./SimpleRecord.vue?vue&type=script&lang=js\"\nexport * from \"./SimpleRecord.vue?vue&type=script&lang=js\"\nimport style0 from \"./SimpleRecord.vue?vue&type=style&index=0&id=14bad980&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14bad980\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"multi-page-record\"},[_c('van-nav-bar',{attrs:{\"title\":\"多页面录制\",\"fixed\":\"\"}}),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"control-section\"},[_c('div',{staticClass:\"status-info\"},[_c('div',{staticClass:\"status-text\"},[(!_vm.isRecording && !_vm.recordData)?_c('span',[_vm._v(\"准备录制\")]):_vm._e(),(_vm.isRecording)?_c('span',[_vm._v(\"正在录制中... (\"+_vm._s(_vm.currentPage)+\")\")]):_vm._e(),(!_vm.isRecording && _vm.recordData)?_c('span',[_vm._v(\"录制完成\")]):_vm._e()]),(_vm.isRecording)?_c('div',{staticClass:\"recording-indicator\"},[_c('div',{staticClass:\"red-dot\"}),_c('span',[_vm._v(\"REC\")])]):_vm._e()]),_c('div',{staticClass:\"control-buttons\"},[(!_vm.isRecording && !_vm.recordData)?_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\",\"loading\":_vm.loading,\"icon\":\"video-o\"},on:{\"click\":_vm.startRecord}},[_vm._v(\" 开始录制 \")]):_vm._e(),(_vm.isRecording)?_c('van-button',{attrs:{\"type\":\"danger\",\"size\":\"large\",\"block\":\"\",\"round\":\"\",\"loading\":_vm.loading,\"icon\":\"stop\"},on:{\"click\":_vm.stopRecord}},[_vm._v(\" 停止录制 \")]):_vm._e(),(!_vm.isRecording && _vm.recordData)?_c('div',{staticClass:\"action-buttons\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"round\":\"\",\"icon\":\"play\"},on:{\"click\":_vm.playRecord}},[_vm._v(\" 播放回放 \")]),_c('van-button',{attrs:{\"type\":\"info\",\"size\":\"large\",\"round\":\"\",\"loading\":_vm.downloading,\"icon\":\"download\"},on:{\"click\":_vm.downloadCompressedFile}},[_vm._v(\" 下载压缩文件 \")]),_c('van-button',{attrs:{\"type\":\"success\",\"size\":\"large\",\"round\":\"\",\"loading\":_vm.uploading,\"icon\":\"cloud-upload\"},on:{\"click\":_vm.uploadRecord}},[_vm._v(\" 上传录制 \")]),_c('van-button',{attrs:{\"size\":\"large\",\"round\":\"\",\"icon\":\"refresh\"},on:{\"click\":_vm.resetRecord}},[_vm._v(\" 重新录制 \")])],1):_vm._e()],1)]),(_vm.isRecording)?_c('div',{staticClass:\"navigation-section\"},[_c('van-cell-group',{attrs:{\"title\":\"页面导航 (录制中可跳转)\"}},[_c('van-cell',{class:{ active: _vm.currentPage === '首页' },attrs:{\"title\":\"首页\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.navigateTo('home')}}}),_c('van-cell',{class:{ active: _vm.currentPage === '产品列表' },attrs:{\"title\":\"产品列表\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.navigateTo('products')}}}),_c('van-cell',{class:{ active: _vm.currentPage === '产品详情' },attrs:{\"title\":\"产品详情\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.navigateTo('product-detail')}}}),_c('van-cell',{class:{ active: _vm.currentPage === '购买页面' },attrs:{\"title\":\"购买页面\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.navigateTo('purchase')}}}),_c('van-cell',{class:{ active: _vm.currentPage === '赎回页面' },attrs:{\"title\":\"赎回页面\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.navigateTo('redeem')}}})],1)],1):_vm._e(),(_vm.recordData)?_c('div',{staticClass:\"record-info\"},[_c('van-cell-group',{attrs:{\"title\":\"录制信息\"}},[_c('van-cell',{attrs:{\"title\":\"录制时长\",\"value\":_vm.recordDuration}}),_c('van-cell',{attrs:{\"title\":\"事件数量\",\"value\":_vm.recordData.events ? _vm.recordData.events.length : 0}}),_c('van-cell',{attrs:{\"title\":\"页面数量\",\"value\":_vm.visitedPages.length}}),_c('van-cell',{attrs:{\"title\":\"数据大小\",\"value\":_vm.recordSize}}),_c('van-cell',{attrs:{\"title\":\"录制时间\",\"value\":_vm.recordTime}})],1),_c('van-cell-group',{attrs:{\"title\":\"访问页面\"}},_vm._l((_vm.visitedPages),function(page,index){return _c('van-cell',{key:index,attrs:{\"title\":`${index + 1}. ${page.name}`,\"value\":page.duration}})}),1)],1):_vm._e(),(_vm.showPlayer)?_c('div',{staticClass:\"player-section\"},[_c('div',{staticClass:\"player-header\"},[_c('h3',[_vm._v(\"录制回放\")]),_c('van-button',{attrs:{\"size\":\"small\",\"icon\":\"cross\"},on:{\"click\":_vm.closePlayer}},[_vm._v(\"关闭\")])],1),_c('div',{ref:\"playerContainer\",staticClass:\"player-container\"}),_c('div',{staticClass:\"player-controls\"},[_c('van-button',{attrs:{\"size\":\"small\",\"icon\":_vm.isPlaying ? 'pause' : 'play'},on:{\"click\":_vm.togglePlay}},[_vm._v(\" \"+_vm._s(_vm.isPlaying ? '暂停' : '播放')+\" \")]),_c('van-button',{attrs:{\"size\":\"small\",\"icon\":\"replay\"},on:{\"click\":_vm.resetPlayer}},[_vm._v(\"重播\")])],1)]):_vm._e(),_c('div',{staticClass:\"current-page-content\"},[_c(_vm.currentPageComponent,{tag:\"component\",on:{\"page-change\":_vm.onPageChange}})],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home-page\"},[_vm._m(0),_c('div',{staticClass:\"features\"},[_c('div',{staticClass:\"feature-item\",on:{\"click\":function($event){return _vm.handleClick('安全保障')}}},[_c('div',{staticClass:\"feature-icon\"},[_vm._v(\"🛡️\")]),_c('div',{staticClass:\"feature-text\"},[_vm._v(\"安全保障\")])]),_c('div',{staticClass:\"feature-item\",on:{\"click\":function($event){return _vm.handleClick('收益稳定')}}},[_c('div',{staticClass:\"feature-icon\"},[_vm._v(\"📈\")]),_c('div',{staticClass:\"feature-text\"},[_vm._v(\"收益稳定\")])]),_c('div',{staticClass:\"feature-item\",on:{\"click\":function($event){return _vm.handleClick('专业服务')}}},[_c('div',{staticClass:\"feature-icon\"},[_vm._v(\"👨‍💼\")]),_c('div',{staticClass:\"feature-text\"},[_vm._v(\"专业服务\")])])]),_c('div',{staticClass:\"demo-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"block\":\"\"},on:{\"click\":_vm.showDialog}},[_vm._v(\"查看详情\")]),_c('van-field',{attrs:{\"label\":\"用户姓名\",\"placeholder\":\"请输入您的姓名\"},model:{value:(_vm.userInput),callback:function ($$v) {_vm.userInput=$$v},expression:\"userInput\"}}),_c('van-button',{attrs:{\"type\":\"info\",\"block\":\"\"},on:{\"click\":_vm.submitInfo}},[_vm._v(\"提交信息\")])],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"welcome-banner\"},[_c('h2',[_vm._v(\"欢迎使用理财产品\")]),_c('p',[_vm._v(\"为您提供专业的理财服务\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home-page\">\r\n    <div class=\"welcome-banner\">\r\n      <h2>欢迎使用理财产品</h2>\r\n      <p>为您提供专业的理财服务</p>\r\n    </div>\r\n    \r\n    <div class=\"features\">\r\n      <div class=\"feature-item\" @click=\"handleClick('安全保障')\">\r\n        <div class=\"feature-icon\">🛡️</div>\r\n        <div class=\"feature-text\">安全保障</div>\r\n      </div>\r\n      <div class=\"feature-item\" @click=\"handleClick('收益稳定')\">\r\n        <div class=\"feature-icon\">📈</div>\r\n        <div class=\"feature-text\">收益稳定</div>\r\n      </div>\r\n      <div class=\"feature-item\" @click=\"handleClick('专业服务')\">\r\n        <div class=\"feature-icon\">👨‍💼</div>\r\n        <div class=\"feature-text\">专业服务</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"demo-actions\">\r\n      <van-button type=\"primary\" block @click=\"showDialog\">查看详情</van-button>\r\n      <van-field v-model=\"userInput\" label=\"用户姓名\" placeholder=\"请输入您的姓名\" />\r\n      <van-button type=\"info\" block @click=\"submitInfo\">提交信息</van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'HomePage',\r\n  data() {\r\n    return {\r\n      userInput: ''\r\n    }\r\n  },\r\n  methods: {\r\n    handleClick(feature) {\r\n      this.$toast(`点击了${feature}`)\r\n    },\r\n    showDialog() {\r\n      this.$dialog.alert({\r\n        title: '产品详情',\r\n        message: '我们提供多种理财产品，满足不同客户的需求。'\r\n      })\r\n    },\r\n    submitInfo() {\r\n      if (this.userInput) {\r\n        this.$toast.success(`欢迎 ${this.userInput}！`)\r\n      } else {\r\n        this.$toast.fail('请输入姓名')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.home-page {\r\n  padding: 20px;\r\n}\r\n\r\n.welcome-banner {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  padding: 30px 20px;\r\n  border-radius: 12px;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.welcome-banner h2 {\r\n  margin: 0 0 10px 0;\r\n  font-size: 24px;\r\n}\r\n\r\n.welcome-banner p {\r\n  margin: 0;\r\n  opacity: 0.9;\r\n}\r\n\r\n.features {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.feature-item {\r\n  text-align: center;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  background: white;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.feature-item:hover {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.feature-icon {\r\n  font-size: 32px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.feature-text {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.demo-actions {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.demo-actions .van-button {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.demo-actions .van-field {\r\n  margin-bottom: 15px;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomePage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomePage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./HomePage.vue?vue&type=template&id=34f6a022&scoped=true\"\nimport script from \"./HomePage.vue?vue&type=script&lang=js\"\nexport * from \"./HomePage.vue?vue&type=script&lang=js\"\nimport style0 from \"./HomePage.vue?vue&type=style&index=0&id=34f6a022&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34f6a022\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"products-page\"},[_vm._m(0),_c('div',{staticClass:\"filter-section\"},[_c('van-field',{attrs:{\"placeholder\":\"搜索产品名称\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}}),_c('div',{staticClass:\"filter-buttons\"},_vm._l((_vm.productTypes),function(type){return _c('van-button',{key:type,attrs:{\"size\":\"small\",\"type\":_vm.selectedType === type ? 'primary' : 'default'},on:{\"click\":function($event){return _vm.filterByType(type)}}},[_vm._v(\" \"+_vm._s(type)+\" \")])}),1)],1),_c('div',{staticClass:\"products-list\"},_vm._l((_vm.filteredProducts),function(product){return _c('div',{key:product.id,staticClass:\"product-card\",on:{\"click\":function($event){return _vm.selectProduct(product)}}},[_c('div',{staticClass:\"product-header\"},[_c('h4',[_vm._v(_vm._s(product.name))]),_c('span',{staticClass:\"product-rate\"},[_vm._v(_vm._s(product.rate)+\"%\")])]),_c('div',{staticClass:\"product-info\"},[_c('div',{staticClass:\"info-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"起购金额:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(product.minAmount)+\"万\")])]),_c('div',{staticClass:\"info-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"期限:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(product.period))])]),_c('div',{staticClass:\"info-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"风险等级:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(product.riskLevel))])])]),_c('div',{staticClass:\"product-actions\"},[_c('van-button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.viewDetail(product)}}},[_vm._v(\"查看详情\")]),_c('van-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.buyProduct(product)}}},[_vm._v(\"立即购买\")])],1)])}),0)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-header\"},[_c('h3',[_vm._v(\"理财产品列表\")]),_c('p',[_vm._v(\"为您精选优质理财产品\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"products-page\">\r\n    <div class=\"page-header\">\r\n      <h3>理财产品列表</h3>\r\n      <p>为您精选优质理财产品</p>\r\n    </div>\r\n\r\n    <div class=\"filter-section\">\r\n      <van-field v-model=\"searchText\" placeholder=\"搜索产品名称\" />\r\n      <div class=\"filter-buttons\">\r\n        <van-button \r\n          v-for=\"type in productTypes\" \r\n          :key=\"type\"\r\n          size=\"small\"\r\n          :type=\"selectedType === type ? 'primary' : 'default'\"\r\n          @click=\"filterByType(type)\"\r\n        >\r\n          {{ type }}\r\n        </van-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"products-list\">\r\n      <div \r\n        v-for=\"product in filteredProducts\" \r\n        :key=\"product.id\"\r\n        class=\"product-card\"\r\n        @click=\"selectProduct(product)\"\r\n      >\r\n        <div class=\"product-header\">\r\n          <h4>{{ product.name }}</h4>\r\n          <span class=\"product-rate\">{{ product.rate }}%</span>\r\n        </div>\r\n        <div class=\"product-info\">\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">起购金额:</span>\r\n            <span class=\"value\">{{ product.minAmount }}万</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">期限:</span>\r\n            <span class=\"value\">{{ product.period }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">风险等级:</span>\r\n            <span class=\"value\">{{ product.riskLevel }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"product-actions\">\r\n          <van-button size=\"small\" type=\"info\" @click.stop=\"viewDetail(product)\">查看详情</van-button>\r\n          <van-button size=\"small\" type=\"primary\" @click.stop=\"buyProduct(product)\">立即购买</van-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ProductsPage',\r\n  data() {\r\n    return {\r\n      searchText: '',\r\n      selectedType: '全部',\r\n      productTypes: ['全部', '稳健型', '平衡型', '进取型'],\r\n      products: [\r\n        {\r\n          id: 1,\r\n          name: '稳健增利1号',\r\n          rate: 4.2,\r\n          minAmount: 1,\r\n          period: '90天',\r\n          riskLevel: 'R2',\r\n          type: '稳健型'\r\n        },\r\n        {\r\n          id: 2,\r\n          name: '平衡收益2号',\r\n          rate: 5.8,\r\n          minAmount: 5,\r\n          period: '180天',\r\n          riskLevel: 'R3',\r\n          type: '平衡型'\r\n        },\r\n        {\r\n          id: 3,\r\n          name: '进取成长3号',\r\n          rate: 7.5,\r\n          minAmount: 10,\r\n          period: '365天',\r\n          riskLevel: 'R4',\r\n          type: '进取型'\r\n        },\r\n        {\r\n          id: 4,\r\n          name: '稳健保本4号',\r\n          rate: 3.8,\r\n          minAmount: 1,\r\n          period: '60天',\r\n          riskLevel: 'R1',\r\n          type: '稳健型'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    filteredProducts() {\r\n      let filtered = this.products\r\n      \r\n      // 按类型筛选\r\n      if (this.selectedType !== '全部') {\r\n        filtered = filtered.filter(p => p.type === this.selectedType)\r\n      }\r\n      \r\n      // 按搜索文本筛选\r\n      if (this.searchText) {\r\n        filtered = filtered.filter(p => \r\n          p.name.toLowerCase().includes(this.searchText.toLowerCase())\r\n        )\r\n      }\r\n      \r\n      return filtered\r\n    }\r\n  },\r\n  methods: {\r\n    filterByType(type) {\r\n      this.selectedType = type\r\n      this.$toast(`筛选: ${type}`)\r\n    },\r\n    selectProduct(product) {\r\n      this.$toast(`选择了 ${product.name}`)\r\n    },\r\n    viewDetail(product) {\r\n      this.$toast(`查看 ${product.name} 详情`)\r\n    },\r\n    buyProduct(product) {\r\n      this.$toast(`购买 ${product.name}`)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.products-page {\r\n  padding: 20px;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.page-header h3 {\r\n  margin: 0 0 5px 0;\r\n  color: #323233;\r\n}\r\n\r\n.page-header p {\r\n  margin: 0;\r\n  color: #969799;\r\n  font-size: 14px;\r\n}\r\n\r\n.filter-section {\r\n  background: white;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.filter-buttons {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 15px;\r\n}\r\n\r\n.products-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n}\r\n\r\n.product-card {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.product-card:hover {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.product-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.product-header h4 {\r\n  margin: 0;\r\n  color: #323233;\r\n  font-size: 16px;\r\n}\r\n\r\n.product-rate {\r\n  color: #ff6b6b;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n}\r\n\r\n.product-info {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.label {\r\n  color: #969799;\r\n  font-size: 14px;\r\n}\r\n\r\n.value {\r\n  color: #323233;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n\r\n.product-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  justify-content: flex-end;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductsPage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductsPage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ProductsPage.vue?vue&type=template&id=02f66d73&scoped=true\"\nimport script from \"./ProductsPage.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsPage.vue?vue&type=script&lang=js\"\nimport style0 from \"./ProductsPage.vue?vue&type=style&index=0&id=02f66d73&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"02f66d73\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"product-detail-page\"},[_c('div',{staticClass:\"product-banner\"},[_c('h3',[_vm._v(_vm._s(_vm.product.name))]),_c('div',{staticClass:\"rate-display\"},[_vm._v(_vm._s(_vm.product.rate)+\"%\")]),_c('p',[_vm._v(\"预期年化收益率\")])]),_c('div',{staticClass:\"product-details\"},[_c('van-cell-group',{attrs:{\"title\":\"产品信息\"}},[_c('van-cell',{attrs:{\"title\":\"起购金额\",\"value\":`${_vm.product.minAmount}万元`}}),_c('van-cell',{attrs:{\"title\":\"产品期限\",\"value\":_vm.product.period}}),_c('van-cell',{attrs:{\"title\":\"风险等级\",\"value\":_vm.product.riskLevel}}),_c('van-cell',{attrs:{\"title\":\"募集状态\",\"value\":\"募集中\"}})],1),_c('van-cell-group',{attrs:{\"title\":\"收益说明\"}},[_c('van-cell',{attrs:{\"title\":\"收益类型\",\"value\":\"非保本浮动收益\"}}),_c('van-cell',{attrs:{\"title\":\"计息方式\",\"value\":\"按日计息\"}}),_c('van-cell',{attrs:{\"title\":\"到期处理\",\"value\":\"自动赎回\"}})],1)],1),_c('div',{staticClass:\"demo-interactions\"},[_c('van-field',{attrs:{\"label\":\"投资金额\",\"placeholder\":\"请输入投资金额\",\"type\":\"number\"},model:{value:(_vm.investAmount),callback:function ($$v) {_vm.investAmount=$$v},expression:\"investAmount\"}}),_c('van-field',{attrs:{\"label\":\"客户姓名\",\"placeholder\":\"请输入姓名\"},model:{value:(_vm.customerName),callback:function ($$v) {_vm.customerName=$$v},expression:\"customerName\"}}),_c('van-switch',{model:{value:(_vm.agreeTerms),callback:function ($$v) {_vm.agreeTerms=$$v},expression:\"agreeTerms\"}}),_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(\"我已阅读并同意产品协议\")])],1),_c('div',{staticClass:\"action-buttons\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"block\":\"\"},on:{\"click\":_vm.purchaseProduct}},[_vm._v(\"立即购买\")]),_c('van-button',{attrs:{\"type\":\"info\",\"block\":\"\"},on:{\"click\":_vm.addToFavorites}},[_vm._v(\"加入收藏\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"product-detail-page\">\r\n    <div class=\"product-banner\">\r\n      <h3>{{ product.name }}</h3>\r\n      <div class=\"rate-display\">{{ product.rate }}%</div>\r\n      <p>预期年化收益率</p>\r\n    </div>\r\n\r\n    <div class=\"product-details\">\r\n      <van-cell-group title=\"产品信息\">\r\n        <van-cell title=\"起购金额\" :value=\"`${product.minAmount}万元`\" />\r\n        <van-cell title=\"产品期限\" :value=\"product.period\" />\r\n        <van-cell title=\"风险等级\" :value=\"product.riskLevel\" />\r\n        <van-cell title=\"募集状态\" value=\"募集中\" />\r\n      </van-cell-group>\r\n\r\n      <van-cell-group title=\"收益说明\">\r\n        <van-cell title=\"收益类型\" value=\"非保本浮动收益\" />\r\n        <van-cell title=\"计息方式\" value=\"按日计息\" />\r\n        <van-cell title=\"到期处理\" value=\"自动赎回\" />\r\n      </van-cell-group>\r\n    </div>\r\n\r\n    <div class=\"demo-interactions\">\r\n      <van-field v-model=\"investAmount\" label=\"投资金额\" placeholder=\"请输入投资金额\" type=\"number\" />\r\n      <van-field v-model=\"customerName\" label=\"客户姓名\" placeholder=\"请输入姓名\" />\r\n      <van-switch v-model=\"agreeTerms\" /> \r\n      <span style=\"margin-left: 10px;\">我已阅读并同意产品协议</span>\r\n    </div>\r\n\r\n    <div class=\"action-buttons\">\r\n      <van-button type=\"primary\" block @click=\"purchaseProduct\">立即购买</van-button>\r\n      <van-button type=\"info\" block @click=\"addToFavorites\">加入收藏</van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ProductDetailPage',\r\n  data() {\r\n    return {\r\n      product: {\r\n        name: '稳健增利1号',\r\n        rate: 4.2,\r\n        minAmount: 1,\r\n        period: '90天',\r\n        riskLevel: 'R2'\r\n      },\r\n      investAmount: '',\r\n      customerName: '',\r\n      agreeTerms: false\r\n    }\r\n  },\r\n  methods: {\r\n    purchaseProduct() {\r\n      if (!this.agreeTerms) {\r\n        this.$toast.fail('请先同意产品协议')\r\n        return\r\n      }\r\n      this.$toast.success('跳转到购买页面')\r\n    },\r\n    addToFavorites() {\r\n      this.$toast.success('已加入收藏')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.product-detail-page {\r\n  padding: 20px;\r\n}\r\n\r\n.product-banner {\r\n  background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);\r\n  color: white;\r\n  padding: 30px 20px;\r\n  border-radius: 12px;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.rate-display {\r\n  font-size: 36px;\r\n  font-weight: bold;\r\n  margin: 10px 0;\r\n}\r\n\r\n.product-details {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.demo-interactions {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.demo-interactions .van-field {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.action-buttons .van-button {\r\n  margin-bottom: 10px;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductDetailPage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductDetailPage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ProductDetailPage.vue?vue&type=template&id=5eb9d020&scoped=true\"\nimport script from \"./ProductDetailPage.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetailPage.vue?vue&type=script&lang=js\"\nimport style0 from \"./ProductDetailPage.vue?vue&type=style&index=0&id=5eb9d020&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5eb9d020\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"purchase-page\"},[_vm._m(0),_c('div',{staticClass:\"purchase-form\"},[_c('van-cell-group',{attrs:{\"title\":\"购买信息\"}},[_c('van-cell',{attrs:{\"title\":\"产品名称\",\"value\":\"稳健增利1号\"}}),_c('van-cell',{attrs:{\"title\":\"预期收益率\",\"value\":\"4.2%\"}})],1),_c('van-cell-group',{attrs:{\"title\":\"投资信息\"}},[_c('van-field',{attrs:{\"label\":\"投资金额\",\"placeholder\":\"请输入投资金额\",\"type\":\"number\"},model:{value:(_vm.form.amount),callback:function ($$v) {_vm.$set(_vm.form, \"amount\", $$v)},expression:\"form.amount\"}}),_c('van-field',{attrs:{\"label\":\"投资人姓名\",\"placeholder\":\"请输入姓名\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('van-field',{attrs:{\"label\":\"手机号码\",\"placeholder\":\"请输入手机号\"},model:{value:(_vm.form.phone),callback:function ($$v) {_vm.$set(_vm.form, \"phone\", $$v)},expression:\"form.phone\"}}),_c('van-field',{attrs:{\"label\":\"身份证号\",\"placeholder\":\"请输入身份证号\"},model:{value:(_vm.form.idCard),callback:function ($$v) {_vm.$set(_vm.form, \"idCard\", $$v)},expression:\"form.idCard\"}})],1),_c('div',{staticClass:\"risk-notice\"},[_c('h4',[_vm._v(\"风险提示\")]),_c('p',[_vm._v(\"本产品为非保本浮动收益型产品，存在投资风险，请您仔细阅读产品说明书。\")]),_c('div',{staticClass:\"agree-section\"},[_c('van-switch',{model:{value:(_vm.form.agreeRisk),callback:function ($$v) {_vm.$set(_vm.form, \"agreeRisk\", $$v)},expression:\"form.agreeRisk\"}}),_c('span',[_vm._v(\"我已充分了解产品风险\")])],1)]),_c('div',{staticClass:\"demo-actions\"},[_c('van-button',{attrs:{\"type\":\"warning\",\"block\":\"\"},on:{\"click\":_vm.calculateIncome}},[_vm._v(\"计算收益\")]),_c('van-button',{attrs:{\"type\":\"primary\",\"block\":\"\"},on:{\"click\":_vm.confirmPurchase}},[_vm._v(\"确认购买\")])],1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-header\"},[_c('h3',[_vm._v(\"产品购买\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"purchase-page\">\r\n    <div class=\"page-header\">\r\n      <h3>产品购买</h3>\r\n    </div>\r\n\r\n    <div class=\"purchase-form\">\r\n      <van-cell-group title=\"购买信息\">\r\n        <van-cell title=\"产品名称\" value=\"稳健增利1号\" />\r\n        <van-cell title=\"预期收益率\" value=\"4.2%\" />\r\n      </van-cell-group>\r\n\r\n      <van-cell-group title=\"投资信息\">\r\n        <van-field v-model=\"form.amount\" label=\"投资金额\" placeholder=\"请输入投资金额\" type=\"number\" />\r\n        <van-field v-model=\"form.name\" label=\"投资人姓名\" placeholder=\"请输入姓名\" />\r\n        <van-field v-model=\"form.phone\" label=\"手机号码\" placeholder=\"请输入手机号\" />\r\n        <van-field v-model=\"form.idCard\" label=\"身份证号\" placeholder=\"请输入身份证号\" />\r\n      </van-cell-group>\r\n\r\n      <div class=\"risk-notice\">\r\n        <h4>风险提示</h4>\r\n        <p>本产品为非保本浮动收益型产品，存在投资风险，请您仔细阅读产品说明书。</p>\r\n        <div class=\"agree-section\">\r\n          <van-switch v-model=\"form.agreeRisk\" />\r\n          <span>我已充分了解产品风险</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"demo-actions\">\r\n        <van-button type=\"warning\" block @click=\"calculateIncome\">计算收益</van-button>\r\n        <van-button type=\"primary\" block @click=\"confirmPurchase\">确认购买</van-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'PurchasePage',\r\n  data() {\r\n    return {\r\n      form: {\r\n        amount: '',\r\n        name: '',\r\n        phone: '',\r\n        idCard: '',\r\n        agreeRisk: false\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    calculateIncome() {\r\n      if (!this.form.amount) {\r\n        this.$toast.fail('请输入投资金额')\r\n        return\r\n      }\r\n      const income = (this.form.amount * 10000 * 0.042 * 90 / 365).toFixed(2)\r\n      this.$toast.success(`预计收益: ${income}元`)\r\n    },\r\n    confirmPurchase() {\r\n      if (!this.form.agreeRisk) {\r\n        this.$toast.fail('请先确认风险提示')\r\n        return\r\n      }\r\n      if (!this.form.amount || !this.form.name) {\r\n        this.$toast.fail('请填写完整信息')\r\n        return\r\n      }\r\n      this.$toast.success('购买成功！')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.purchase-page {\r\n  padding: 20px;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.purchase-form .van-cell-group {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.risk-notice {\r\n  background: #fff3cd;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #ffeaa7;\r\n}\r\n\r\n.risk-notice h4 {\r\n  margin: 0 0 10px 0;\r\n  color: #856404;\r\n}\r\n\r\n.risk-notice p {\r\n  margin: 0 0 15px 0;\r\n  color: #856404;\r\n  font-size: 14px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.agree-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.demo-actions .van-button {\r\n  margin-bottom: 10px;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchasePage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchasePage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PurchasePage.vue?vue&type=template&id=75a3e44c&scoped=true\"\nimport script from \"./PurchasePage.vue?vue&type=script&lang=js\"\nexport * from \"./PurchasePage.vue?vue&type=script&lang=js\"\nimport style0 from \"./PurchasePage.vue?vue&type=style&index=0&id=75a3e44c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75a3e44c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"redeem-page\"},[_vm._m(0),_c('div',{staticClass:\"redeem-form\"},[_c('van-cell-group',{attrs:{\"title\":\"持仓信息\"}},[_c('van-cell',{attrs:{\"title\":\"产品名称\",\"value\":\"稳健增利1号\"}}),_c('van-cell',{attrs:{\"title\":\"持有金额\",\"value\":\"50,000.00元\"}}),_c('van-cell',{attrs:{\"title\":\"累计收益\",\"value\":\"1,245.67元\"}}),_c('van-cell',{attrs:{\"title\":\"持有天数\",\"value\":\"45天\"}})],1),_c('van-cell-group',{attrs:{\"title\":\"赎回信息\"}},[_c('van-field',{attrs:{\"label\":\"赎回金额\",\"placeholder\":\"请输入赎回金额\",\"type\":\"number\"},model:{value:(_vm.form.redeemAmount),callback:function ($$v) {_vm.$set(_vm.form, \"redeemAmount\", $$v)},expression:\"form.redeemAmount\"}}),_c('van-cell',{attrs:{\"title\":\"赎回类型\"},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [_c('van-switch',{on:{\"change\":_vm.onRedeemTypeChange},model:{value:(_vm.form.isFullRedeem),callback:function ($$v) {_vm.$set(_vm.form, \"isFullRedeem\", $$v)},expression:\"form.isFullRedeem\"}}),_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(_vm.form.isFullRedeem ? '全部赎回' : '部分赎回'))])]},proxy:true}])}),_c('van-field',{attrs:{\"label\":\"到账银行卡\",\"placeholder\":\"请输入银行卡号\"},model:{value:(_vm.form.bankCard),callback:function ($$v) {_vm.$set(_vm.form, \"bankCard\", $$v)},expression:\"form.bankCard\"}})],1),_c('div',{staticClass:\"redeem-notice\"},[_c('h4',[_vm._v(\"赎回说明\")]),_vm._m(1),_c('div',{staticClass:\"agree-section\"},[_c('van-switch',{model:{value:(_vm.form.agreeRedeem),callback:function ($$v) {_vm.$set(_vm.form, \"agreeRedeem\", $$v)},expression:\"form.agreeRedeem\"}}),_c('span',[_vm._v(\"我已了解赎回规则\")])],1)]),_c('div',{staticClass:\"demo-actions\"},[_c('van-button',{attrs:{\"type\":\"warning\",\"block\":\"\"},on:{\"click\":_vm.calculateFee}},[_vm._v(\"计算手续费\")]),_c('van-button',{attrs:{\"type\":\"danger\",\"block\":\"\"},on:{\"click\":_vm.confirmRedeem}},[_vm._v(\"确认赎回\")])],1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-header\"},[_c('h3',[_vm._v(\"产品赎回\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\"赎回申请提交后不可撤销\")]),_c('li',[_vm._v(\"资金将在T+1个工作日到账\")]),_c('li',[_vm._v(\"部分赎回最低保留金额1万元\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"redeem-page\">\r\n    <div class=\"page-header\">\r\n      <h3>产品赎回</h3>\r\n    </div>\r\n\r\n    <div class=\"redeem-form\">\r\n      <van-cell-group title=\"持仓信息\">\r\n        <van-cell title=\"产品名称\" value=\"稳健增利1号\" />\r\n        <van-cell title=\"持有金额\" value=\"50,000.00元\" />\r\n        <van-cell title=\"累计收益\" value=\"1,245.67元\" />\r\n        <van-cell title=\"持有天数\" value=\"45天\" />\r\n      </van-cell-group>\r\n\r\n      <van-cell-group title=\"赎回信息\">\r\n        <van-field v-model=\"form.redeemAmount\" label=\"赎回金额\" placeholder=\"请输入赎回金额\" type=\"number\" />\r\n        <van-cell title=\"赎回类型\">\r\n          <template #right-icon>\r\n            <van-switch v-model=\"form.isFullRedeem\" @change=\"onRedeemTypeChange\" />\r\n            <span style=\"margin-left: 10px;\">{{ form.isFullRedeem ? '全部赎回' : '部分赎回' }}</span>\r\n          </template>\r\n        </van-cell>\r\n        <van-field v-model=\"form.bankCard\" label=\"到账银行卡\" placeholder=\"请输入银行卡号\" />\r\n      </van-cell-group>\r\n\r\n      <div class=\"redeem-notice\">\r\n        <h4>赎回说明</h4>\r\n        <ul>\r\n          <li>赎回申请提交后不可撤销</li>\r\n          <li>资金将在T+1个工作日到账</li>\r\n          <li>部分赎回最低保留金额1万元</li>\r\n        </ul>\r\n        <div class=\"agree-section\">\r\n          <van-switch v-model=\"form.agreeRedeem\" />\r\n          <span>我已了解赎回规则</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"demo-actions\">\r\n        <van-button type=\"warning\" block @click=\"calculateFee\">计算手续费</van-button>\r\n        <van-button type=\"danger\" block @click=\"confirmRedeem\">确认赎回</van-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'RedeemPage',\r\n  data() {\r\n    return {\r\n      form: {\r\n        redeemAmount: '',\r\n        isFullRedeem: false,\r\n        bankCard: '',\r\n        agreeRedeem: false\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    onRedeemTypeChange(value) {\r\n      if (value) {\r\n        this.form.redeemAmount = '50000'\r\n      } else {\r\n        this.form.redeemAmount = ''\r\n      }\r\n    },\r\n    calculateFee() {\r\n      if (!this.form.redeemAmount) {\r\n        this.$toast.fail('请输入赎回金额')\r\n        return\r\n      }\r\n      const fee = (this.form.redeemAmount * 0.001).toFixed(2)\r\n      this.$toast.success(`手续费: ${fee}元`)\r\n    },\r\n    confirmRedeem() {\r\n      if (!this.form.agreeRedeem) {\r\n        this.$toast.fail('请先确认赎回规则')\r\n        return\r\n      }\r\n      if (!this.form.redeemAmount || !this.form.bankCard) {\r\n        this.$toast.fail('请填写完整信息')\r\n        return\r\n      }\r\n      this.$toast.success('赎回申请提交成功！')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.redeem-page {\r\n  padding: 20px;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.redeem-form .van-cell-group {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.redeem-notice {\r\n  background: #f8d7da;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #f5c6cb;\r\n}\r\n\r\n.redeem-notice h4 {\r\n  margin: 0 0 10px 0;\r\n  color: #721c24;\r\n}\r\n\r\n.redeem-notice ul {\r\n  margin: 0 0 15px 0;\r\n  padding-left: 20px;\r\n  color: #721c24;\r\n}\r\n\r\n.redeem-notice li {\r\n  margin-bottom: 5px;\r\n  font-size: 14px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.agree-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.demo-actions .van-button {\r\n  margin-bottom: 10px;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RedeemPage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RedeemPage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RedeemPage.vue?vue&type=template&id=37ca8da5&scoped=true\"\nimport script from \"./RedeemPage.vue?vue&type=script&lang=js\"\nexport * from \"./RedeemPage.vue?vue&type=script&lang=js\"\nimport style0 from \"./RedeemPage.vue?vue&type=style&index=0&id=37ca8da5&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37ca8da5\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"multi-page-record\">\r\n    <van-nav-bar title=\"多页面录制\" fixed />\r\n    \r\n    <div class=\"content\">\r\n      <!-- 录制控制区域 -->\r\n      <div class=\"control-section\">\r\n        <div class=\"status-info\">\r\n          <div class=\"status-text\">\r\n            <span v-if=\"!isRecording && !recordData\">准备录制</span>\r\n            <span v-if=\"isRecording\">正在录制中... ({{ currentPage }})</span>\r\n            <span v-if=\"!isRecording && recordData\">录制完成</span>\r\n          </div>\r\n          <div v-if=\"isRecording\" class=\"recording-indicator\">\r\n            <div class=\"red-dot\"></div>\r\n            <span>REC</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"control-buttons\">\r\n          <van-button \r\n            v-if=\"!isRecording && !recordData\"\r\n            type=\"primary\" \r\n            size=\"large\" \r\n            block\r\n            round\r\n            @click=\"startRecord\"\r\n            :loading=\"loading\"\r\n            icon=\"video-o\"\r\n          >\r\n            开始录制\r\n          </van-button>\r\n\r\n          <van-button \r\n            v-if=\"isRecording\"\r\n            type=\"danger\" \r\n            size=\"large\" \r\n            block\r\n            round\r\n            @click=\"stopRecord\"\r\n            :loading=\"loading\"\r\n            icon=\"stop\"\r\n          >\r\n            停止录制\r\n          </van-button>\r\n\r\n          <div v-if=\"!isRecording && recordData\" class=\"action-buttons\">\r\n            <van-button \r\n              type=\"primary\" \r\n              size=\"large\"\r\n              round\r\n              @click=\"playRecord\"\r\n              icon=\"play\"\r\n            >\r\n              播放回放\r\n            </van-button>\r\n            <van-button \r\n              type=\"info\" \r\n              size=\"large\"\r\n              round\r\n              @click=\"downloadCompressedFile\"\r\n              :loading=\"downloading\"\r\n              icon=\"download\"\r\n            >\r\n              下载压缩文件\r\n            </van-button>\r\n            <van-button \r\n              type=\"success\" \r\n              size=\"large\"\r\n              round\r\n              @click=\"uploadRecord\"\r\n              :loading=\"uploading\"\r\n              icon=\"cloud-upload\"\r\n            >\r\n              上传录制\r\n            </van-button>\r\n            <van-button \r\n              size=\"large\"\r\n              round\r\n              @click=\"resetRecord\"\r\n              icon=\"refresh\"\r\n            >\r\n              重新录制\r\n            </van-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 页面导航区域 -->\r\n      <div v-if=\"isRecording\" class=\"navigation-section\">\r\n        <van-cell-group title=\"页面导航 (录制中可跳转)\">\r\n          <van-cell \r\n            title=\"首页\" \r\n            is-link \r\n            @click=\"navigateTo('home')\"\r\n            :class=\"{ active: currentPage === '首页' }\"\r\n          />\r\n          <van-cell \r\n            title=\"产品列表\" \r\n            is-link \r\n            @click=\"navigateTo('products')\"\r\n            :class=\"{ active: currentPage === '产品列表' }\"\r\n          />\r\n          <van-cell \r\n            title=\"产品详情\" \r\n            is-link \r\n            @click=\"navigateTo('product-detail')\"\r\n            :class=\"{ active: currentPage === '产品详情' }\"\r\n          />\r\n          <van-cell \r\n            title=\"购买页面\" \r\n            is-link \r\n            @click=\"navigateTo('purchase')\"\r\n            :class=\"{ active: currentPage === '购买页面' }\"\r\n          />\r\n          <van-cell \r\n            title=\"赎回页面\" \r\n            is-link \r\n            @click=\"navigateTo('redeem')\"\r\n            :class=\"{ active: currentPage === '赎回页面' }\"\r\n          />\r\n        </van-cell-group>\r\n      </div>\r\n\r\n      <!-- 录制信息 -->\r\n      <div v-if=\"recordData\" class=\"record-info\">\r\n        <van-cell-group title=\"录制信息\">\r\n          <van-cell title=\"录制时长\" :value=\"recordDuration\" />\r\n          <van-cell title=\"事件数量\" :value=\"recordData.events ? recordData.events.length : 0\" />\r\n          <van-cell title=\"页面数量\" :value=\"visitedPages.length\" />\r\n          <van-cell title=\"数据大小\" :value=\"recordSize\" />\r\n          <van-cell title=\"录制时间\" :value=\"recordTime\" />\r\n        </van-cell-group>\r\n        \r\n        <van-cell-group title=\"访问页面\">\r\n          <van-cell \r\n            v-for=\"(page, index) in visitedPages\" \r\n            :key=\"index\"\r\n            :title=\"`${index + 1}. ${page.name}`\" \r\n            :value=\"page.duration\"\r\n          />\r\n        </van-cell-group>\r\n      </div>\r\n\r\n      <!-- 回放区域 -->\r\n      <div v-if=\"showPlayer\" class=\"player-section\">\r\n        <div class=\"player-header\">\r\n          <h3>录制回放</h3>\r\n          <van-button size=\"small\" @click=\"closePlayer\" icon=\"cross\">关闭</van-button>\r\n        </div>\r\n        <div ref=\"playerContainer\" class=\"player-container\"></div>\r\n        <div class=\"player-controls\">\r\n          <van-button size=\"small\" @click=\"togglePlay\" :icon=\"isPlaying ? 'pause' : 'play'\">\r\n            {{ isPlaying ? '暂停' : '播放' }}\r\n          </van-button>\r\n          <van-button size=\"small\" @click=\"resetPlayer\" icon=\"replay\">重播</van-button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 当前页面内容区域 -->\r\n      <div class=\"current-page-content\">\r\n        <component :is=\"currentPageComponent\" @page-change=\"onPageChange\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { record } from 'rrweb' // 已移除，使用全局变量\r\n// import rrwebPlayer from 'rrweb-player' // 已移除，使用全局变量\r\n// import pako from 'pako' // 已移除，使用全局变量\r\n\r\n// 导入页面组件\r\nimport HomePage from './pages/HomePage.vue'\r\nimport ProductsPage from './pages/ProductsPage.vue'\r\nimport ProductDetailPage from './pages/ProductDetailPage.vue'\r\nimport PurchasePage from './pages/PurchasePage.vue'\r\nimport RedeemPage from './pages/RedeemPage.vue'\r\n\r\nexport default {\r\n  name: 'MultiPageRecord',\r\n  components: {\r\n    HomePage,\r\n    ProductsPage,\r\n    ProductDetailPage,\r\n    PurchasePage,\r\n    RedeemPage\r\n  },\r\n  data() {\r\n    return {\r\n      isRecording: false,\r\n      loading: false,\r\n      uploading: false,\r\n      downloading: false,\r\n      recordData: null,\r\n      recordTime: '',\r\n      stopFn: null,\r\n      events: [],\r\n      \r\n      // 页面相关\r\n      currentPage: '首页',\r\n      currentPageComponent: 'HomePage',\r\n      visitedPages: [],\r\n      pageStartTime: null,\r\n      \r\n      // 播放器相关\r\n      showPlayer: false,\r\n      player: null,\r\n      isPlaying: false\r\n    }\r\n  },\r\n  computed: {\r\n    recordDuration() {\r\n      if (!this.recordData || !this.recordData.metadata) return '0秒'\r\n      const duration = Math.round(this.recordData.metadata.duration / 1000)\r\n      return `${duration}秒`\r\n    },\r\n    recordSize() {\r\n      if (!this.recordData) return '0KB'\r\n      const size = JSON.stringify(this.recordData).length\r\n      return `${(size / 1024).toFixed(2)}KB`\r\n    }\r\n  },\r\n  methods: {\r\n    // 开始录制\r\n    async startRecord() {\r\n      this.loading = true\r\n      try {\r\n        await this.waitForPageLoad()\r\n        \r\n        this.events = []\r\n        this.recordData = null\r\n        this.visitedPages = []\r\n        this.pageStartTime = Date.now()\r\n        \r\n        // 记录首页访问\r\n        this.visitedPages.push({\r\n          name: this.currentPage,\r\n          startTime: this.pageStartTime,\r\n          url: window.location.href\r\n        })\r\n        \r\n        // 检查全局rrweb是否可用\r\n        if (typeof window.rrweb === 'undefined') {\r\n          throw new Error('rrweb库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        // 开始rrweb录制\r\n        this.stopFn = window.rrweb.record({\r\n          emit: (event) => {\r\n            // 为每个事件添加页面信息\r\n            event.pageInfo = {\r\n              pageName: this.currentPage,\r\n              url: window.location.href,\r\n              timestamp: Date.now()\r\n            }\r\n            this.events.push(event)\r\n          },\r\n          recordCanvas: true,\r\n          collectFonts: true,\r\n          recordCrossOriginIframes: true\r\n        })\r\n        \r\n        this.isRecording = true\r\n        this.recordTime = new Date().toLocaleString()\r\n        this.$toast.success('开始录制，可以跳转页面')\r\n      } catch (error) {\r\n        console.error('录制失败:', error)\r\n        this.$toast.fail('录制失败')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // 停止录制\r\n    async stopRecord() {\r\n      this.loading = true\r\n      try {\r\n        if (this.stopFn) {\r\n          this.stopFn()\r\n          this.stopFn = null\r\n        }\r\n        \r\n        // 记录最后一个页面的停留时间\r\n        if (this.visitedPages.length > 0) {\r\n          const lastPage = this.visitedPages[this.visitedPages.length - 1]\r\n          if (!lastPage.endTime) {\r\n            lastPage.endTime = Date.now()\r\n            lastPage.duration = `${Math.round((lastPage.endTime - lastPage.startTime) / 1000)}秒`\r\n          }\r\n        }\r\n        \r\n        this.isRecording = false\r\n        \r\n        // 生成录制数据\r\n        this.recordData = {\r\n          events: this.events,\r\n          metadata: {\r\n            recordTime: Date.now(),\r\n            eventsCount: this.events.length,\r\n            duration: this.events.length > 0 ? \r\n              this.events[this.events.length - 1].timestamp - this.events[0].timestamp : 0,\r\n            visitedPages: this.visitedPages,\r\n            totalPages: this.visitedPages.length\r\n          }\r\n        }\r\n        \r\n        this.$toast.success('录制完成')\r\n      } catch (error) {\r\n        console.error('停止录制失败:', error)\r\n        this.$toast.fail('停止录制失败')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // 页面导航\r\n    navigateTo(pageName) {\r\n      if (!this.isRecording) return\r\n      \r\n      // 记录当前页面的结束时间\r\n      if (this.visitedPages.length > 0) {\r\n        const currentPageRecord = this.visitedPages[this.visitedPages.length - 1]\r\n        if (!currentPageRecord.endTime) {\r\n          currentPageRecord.endTime = Date.now()\r\n          currentPageRecord.duration = `${Math.round((currentPageRecord.endTime - currentPageRecord.startTime) / 1000)}秒`\r\n        }\r\n      }\r\n      \r\n      // 切换页面\r\n      const pageMap = {\r\n        'home': { name: '首页', component: 'HomePage' },\r\n        'products': { name: '产品列表', component: 'ProductsPage' },\r\n        'product-detail': { name: '产品详情', component: 'ProductDetailPage' },\r\n        'purchase': { name: '购买页面', component: 'PurchasePage' },\r\n        'redeem': { name: '赎回页面', component: 'RedeemPage' }\r\n      }\r\n      \r\n      const pageInfo = pageMap[pageName]\r\n      if (pageInfo) {\r\n        this.currentPage = pageInfo.name\r\n        this.currentPageComponent = pageInfo.component\r\n        \r\n        // 记录新页面访问\r\n        const newPageStartTime = Date.now()\r\n        this.visitedPages.push({\r\n          name: pageInfo.name,\r\n          startTime: newPageStartTime,\r\n          url: window.location.href + '#' + pageName\r\n        })\r\n        \r\n        this.$toast(`已切换到${pageInfo.name}`)\r\n      }\r\n    },\r\n\r\n    // 页面变化回调\r\n    onPageChange(pageName) {\r\n      console.log('页面变化:', pageName)\r\n    },\r\n\r\n    // 播放录制\r\n    async playRecord() {\r\n      if (!this.recordData || !this.recordData.events) {\r\n        this.$toast.fail('没有录制数据')\r\n        return\r\n      }\r\n      \r\n      if (this.recordData.events.length < 2) {\r\n        this.$toast.fail('录制事件不足，无法回放')\r\n        return\r\n      }\r\n      \r\n      this.showPlayer = true\r\n      await this.$nextTick()\r\n      \r\n      try {\r\n        if (this.$refs.playerContainer) {\r\n          this.$refs.playerContainer.innerHTML = ''\r\n        }\r\n        \r\n        // 检查全局rrweb-player是否可用\r\n        if (typeof window.rrwebPlayer === 'undefined') {\r\n          throw new Error('rrweb-player库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        this.player = new window.rrwebPlayer({\r\n          target: this.$refs.playerContainer,\r\n          props: {\r\n            events: this.recordData.events,\r\n            width: 375,\r\n            height: 400,\r\n            autoPlay: false,\r\n            showController: true,\r\n            skipInactive: true,\r\n            speed: 1\r\n          }\r\n        })\r\n        \r\n        this.isPlaying = false\r\n        this.$toast.success('录制加载成功')\r\n        \r\n        if (this.player && this.player.addEventListener) {\r\n          this.player.addEventListener('finish', () => {\r\n            this.isPlaying = false\r\n          })\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('播放失败:', error)\r\n        this.$toast.fail('播放失败: ' + error.message)\r\n        this.showPlayer = false\r\n      }\r\n    },\r\n\r\n    // 下载压缩文件\r\n    async downloadCompressedFile() {\r\n      if (!this.recordData) {\r\n        this.$toast.fail('没有录制数据')\r\n        return\r\n      }\r\n      \r\n      this.downloading = true\r\n      try {\r\n        const result = await this.generateCompressedFile()\r\n        \r\n        if (!result.success) {\r\n          this.$toast.fail(result.message)\r\n          return\r\n        }\r\n        \r\n        const timestamp = new Date().toISOString().replace(/[:.]/g, '-')\r\n        const filename = `multi-page-record-${timestamp}.json`\r\n        \r\n        const content = JSON.stringify(result.data, null, 2)\r\n        this.downloadFile(content, filename, 'application/json')\r\n        \r\n        const sizeInfo = (result.size / 1024).toFixed(2)\r\n        const optimizedText = result.optimized ? ' (已优化)' : ''\r\n        this.$toast.success(`文件已下载 (${sizeInfo}KB)${optimizedText}`)\r\n        \r\n      } catch (error) {\r\n        console.error('下载失败:', error)\r\n        this.$toast.fail('下载失败')\r\n      } finally {\r\n        this.downloading = false\r\n      }\r\n    },\r\n\r\n    // 上传录制\r\n    async uploadRecord() {\r\n      if (!this.recordData) {\r\n        this.$toast.fail('没有录制数据')\r\n        return\r\n      }\r\n      \r\n      this.uploading = true\r\n      try {\r\n        const result = await this.generateCompressedFile()\r\n        \r\n        if (!result.success) {\r\n          this.$toast.fail(result.message)\r\n          return\r\n        }\r\n        \r\n        console.log('上传数据:', result.data)\r\n        console.log('文件大小:', (result.size / 1024 / 1024).toFixed(2) + 'MB')\r\n        console.log('访问页面:', this.visitedPages)\r\n        \r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        \r\n        this.$toast.success(`上传成功 (${(result.size / 1024 / 1024).toFixed(2)}MB)`)\r\n      } catch (error) {\r\n        console.error('上传失败:', error)\r\n        this.$toast.fail('上传失败')\r\n      } finally {\r\n        this.uploading = false\r\n      }\r\n    },\r\n\r\n    // 生成压缩文件\r\n    async generateCompressedFile() {\r\n      try {\r\n        const MAX_SIZE = 2 * 1024 * 1024\r\n        \r\n        let optimizedData = this.optimizeRecordData(this.recordData)\r\n        const jsonString = JSON.stringify(optimizedData)\r\n        // 检查全局pako是否可用\r\n        if (typeof window.pako === 'undefined') {\r\n          throw new Error('pako压缩库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        const compressed = window.pako.gzip(jsonString)\r\n        \r\n        const compressedData = {\r\n          compressed: true,\r\n          data: Array.from(compressed),\r\n          originalSize: jsonString.length,\r\n          compressedSize: compressed.length,\r\n          metadata: optimizedData.metadata,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n        \r\n        const finalJson = JSON.stringify(compressedData)\r\n        const finalSize = finalJson.length\r\n        \r\n        console.log('多页面录制压缩信息:')\r\n        console.log('原始数据:', (jsonString.length / 1024).toFixed(2) + 'KB')\r\n        console.log('压缩后:', (compressed.length / 1024).toFixed(2) + 'KB')\r\n        console.log('最终JSON:', (finalSize / 1024).toFixed(2) + 'KB')\r\n        \r\n        if (finalSize > MAX_SIZE) {\r\n          const furtherOptimized = this.furtherOptimizeData(optimizedData)\r\n          const recompressed = window.pako.gzip(JSON.stringify(furtherOptimized))\r\n          \r\n          const newCompressedData = {\r\n            compressed: true,\r\n            data: Array.from(recompressed),\r\n            originalSize: JSON.stringify(furtherOptimized).length,\r\n            compressedSize: recompressed.length,\r\n            metadata: furtherOptimized.metadata,\r\n            timestamp: new Date().toISOString(),\r\n            optimized: true\r\n          }\r\n          \r\n          const newFinalJson = JSON.stringify(newCompressedData)\r\n          const newFinalSize = newFinalJson.length\r\n          \r\n          if (newFinalSize > MAX_SIZE) {\r\n            return {\r\n              success: false,\r\n              message: `文件过大 (${(newFinalSize / 1024 / 1024).toFixed(2)}MB)，请缩短录制时间`\r\n            }\r\n          }\r\n          \r\n          return {\r\n            success: true,\r\n            data: newCompressedData,\r\n            size: newFinalSize,\r\n            optimized: true\r\n          }\r\n        }\r\n        \r\n        return {\r\n          success: true,\r\n          data: compressedData,\r\n          size: finalSize,\r\n          optimized: false\r\n        }\r\n        \r\n      } catch (error) {\r\n        return {\r\n          success: false,\r\n          message: '数据压缩失败'\r\n        }\r\n      }\r\n    },\r\n\r\n    // 优化录制数据\r\n    optimizeRecordData(data) {\r\n      const optimized = {\r\n        events: data.events.map(event => {\r\n          const optimizedEvent = {\r\n            type: event.type,\r\n            timestamp: event.timestamp,\r\n            pageInfo: event.pageInfo // 保留页面信息\r\n          }\r\n          \r\n          if (event.data) {\r\n            optimizedEvent.data = {}\r\n            \r\n            switch (event.type) {\r\n              case 0:\r\n              case 1:\r\n                optimizedEvent.data = {\r\n                  href: event.data.href,\r\n                  width: event.data.width,\r\n                  height: event.data.height\r\n                }\r\n                break\r\n              case 2:\r\n                optimizedEvent.data = {\r\n                  node: event.data.node,\r\n                  initialOffset: event.data.initialOffset\r\n                }\r\n                break\r\n              case 3:\r\n                optimizedEvent.data = {\r\n                  source: event.data.source,\r\n                  type: event.data.type,\r\n                  id: event.data.id\r\n                }\r\n                if (event.data.positions) optimizedEvent.data.positions = event.data.positions\r\n                if (event.data.texts) optimizedEvent.data.texts = event.data.texts\r\n                if (event.data.attributes) optimizedEvent.data.attributes = event.data.attributes\r\n                break\r\n              default:\r\n                optimizedEvent.data = event.data\r\n            }\r\n          }\r\n          \r\n          return optimizedEvent\r\n        }),\r\n        metadata: data.metadata\r\n      }\r\n      \r\n      return optimized\r\n    },\r\n\r\n    // 进一步优化数据\r\n    furtherOptimizeData(data) {\r\n      const keyEvents = []\r\n      const SAMPLE_INTERVAL = 150\r\n      \r\n      let lastTimestamp = 0\r\n      \r\n      data.events.forEach(event => {\r\n        if (event.type === 0 || event.type === 1 || event.type === 2) {\r\n          keyEvents.push(event)\r\n          lastTimestamp = event.timestamp\r\n        } else {\r\n          if (event.timestamp - lastTimestamp >= SAMPLE_INTERVAL) {\r\n            keyEvents.push(event)\r\n            lastTimestamp = event.timestamp\r\n          }\r\n        }\r\n      })\r\n      \r\n      return {\r\n        events: keyEvents,\r\n        metadata: {\r\n          ...data.metadata,\r\n          originalEventsCount: data.events.length,\r\n          sampledEventsCount: keyEvents.length,\r\n          optimized: true\r\n        }\r\n      }\r\n    },\r\n\r\n    // 工具方法\r\n    downloadFile(content, filename, mimeType) {\r\n      const blob = new Blob([content], { type: mimeType })\r\n      const url = URL.createObjectURL(blob)\r\n      const link = document.createElement('a')\r\n      link.href = url\r\n      link.download = filename\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      URL.revokeObjectURL(url)\r\n    },\r\n\r\n    waitForPageLoad() {\r\n      return new Promise((resolve) => {\r\n        if (document.readyState === 'complete') {\r\n          setTimeout(resolve, 500)\r\n        } else {\r\n          window.addEventListener('load', () => {\r\n            setTimeout(resolve, 500)\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    resetRecord() {\r\n      this.recordData = null\r\n      this.events = []\r\n      this.visitedPages = []\r\n      this.currentPage = '首页'\r\n      this.currentPageComponent = 'HomePage'\r\n      this.closePlayer()\r\n      this.$toast.success('已重置，可以重新录制')\r\n    },\r\n\r\n    // 播放器控制方法\r\n    togglePlay() {\r\n      if (!this.player) return\r\n      \r\n      try {\r\n        if (this.isPlaying) {\r\n          if (typeof this.player.pause === 'function') {\r\n            this.player.pause()\r\n          }\r\n        } else {\r\n          if (typeof this.player.play === 'function') {\r\n            this.player.play()\r\n          }\r\n        }\r\n        this.isPlaying = !this.isPlaying\r\n      } catch (error) {\r\n        console.warn('播放控制出错:', error)\r\n        this.$toast.fail('播放控制失败')\r\n      }\r\n    },\r\n\r\n    resetPlayer() {\r\n      if (!this.player) return\r\n      \r\n      try {\r\n        if (typeof this.player.goto === 'function') {\r\n          this.player.goto(0)\r\n        } else if (typeof this.player.setCurrentTime === 'function') {\r\n          this.player.setCurrentTime(0)\r\n        }\r\n        this.isPlaying = false\r\n      } catch (error) {\r\n        console.warn('重置播放器出错:', error)\r\n        this.$toast.fail('重置失败')\r\n      }\r\n    },\r\n\r\n    closePlayer() {\r\n      if (this.player) {\r\n        try {\r\n          if (typeof this.player.destroy === 'function') {\r\n            this.player.destroy()\r\n          } else if (typeof this.player.$destroy === 'function') {\r\n            this.player.$destroy()\r\n          } else if (this.player.$el && this.player.$el.parentNode) {\r\n            this.player.$el.parentNode.removeChild(this.player.$el)\r\n          }\r\n        } catch (error) {\r\n          console.warn('播放器销毁时出现警告:', error)\r\n        }\r\n        this.player = null\r\n      }\r\n      \r\n      if (this.$refs.playerContainer) {\r\n        this.$refs.playerContainer.innerHTML = ''\r\n      }\r\n      \r\n      this.showPlayer = false\r\n      this.isPlaying = false\r\n    }\r\n  },\r\n\r\n  beforeDestroy() {\r\n    if (this.isRecording && this.stopFn) {\r\n      this.stopFn()\r\n    }\r\n    this.closePlayer()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.multi-page-record {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.control-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.status-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.status-text {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: #323233;\r\n}\r\n\r\n.recording-indicator {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #ee0a24;\r\n  font-weight: 500;\r\n}\r\n\r\n.red-dot {\r\n  width: 8px;\r\n  height: 8px;\r\n  background: #ee0a24;\r\n  border-radius: 50%;\r\n  margin-right: 6px;\r\n  animation: blink 1s infinite;\r\n}\r\n\r\n@keyframes blink {\r\n  0%, 50% { opacity: 1; }\r\n  51%, 100% { opacity: 0.3; }\r\n}\r\n\r\n.control-buttons .van-button {\r\n  height: 48px;\r\n  font-size: 16px;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.navigation-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.navigation-section .van-cell.active {\r\n  background-color: #f0f9ff;\r\n  color: #1989fa;\r\n}\r\n\r\n.record-info {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.player-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.player-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.player-header h3 {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  color: #323233;\r\n}\r\n\r\n.player-container {\r\n  border: 1px solid #ebedf0;\r\n  border-radius: 8px;\r\n  margin-bottom: 16px;\r\n  min-height: 300px;\r\n  overflow: hidden;\r\n}\r\n\r\n.player-controls {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: center;\r\n}\r\n\r\n.current-page-content {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MultiPageRecord.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MultiPageRecord.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MultiPageRecord.vue?vue&type=template&id=23cfd779&scoped=true\"\nimport script from \"./MultiPageRecord.vue?vue&type=script&lang=js\"\nexport * from \"./MultiPageRecord.vue?vue&type=script&lang=js\"\nimport style0 from \"./MultiPageRecord.vue?vue&type=style&index=0&id=23cfd779&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23cfd779\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"router-index\"},[_c('van-nav-bar',{attrs:{\"title\":\"路由导航\",\"fixed\":\"\"}}),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"section\"},[_c('h3',[_vm._v(\"录制功能\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"单页面录制\",\"is-link\":\"\",\"to\":\"/SimpleRecord\"}}),_c('van-cell',{attrs:{\"title\":\"多页面录制\",\"is-link\":\"\",\"to\":\"/multi-page\"}})],1)],1),_c('div',{staticClass:\"section\"},[_c('h3',[_vm._v(\"业务页面\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"产品列表\",\"is-link\":\"\",\"to\":\"/\"}}),_c('van-cell',{attrs:{\"title\":\"产品详情\",\"is-link\":\"\",\"to\":\"/product/1\"}}),_c('van-cell',{attrs:{\"title\":\"传统购买流程\",\"is-link\":\"\",\"to\":\"/purchase/1\"}}),_c('van-cell',{attrs:{\"title\":\"产品赎回\",\"is-link\":\"\",\"to\":\"/redeem/1\"}}),_c('van-cell',{attrs:{\"title\":\"录制回放\",\"is-link\":\"\",\"to\":\"/player\"}})],1)],1),_c('div',{staticClass:\"section\"},[_c('h3',[_vm._v(\"新分步购买流程\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"步骤1：确认产品\",\"is-link\":\"\",\"to\":{ name: 'PurchaseStepOne', query: { id: 1 } }}}),_c('van-cell',{attrs:{\"title\":\"步骤2：填写信息\",\"is-link\":\"\",\"to\":{ name: 'PurchaseStepTwo', query: { id: 1 } }}}),_c('van-cell',{attrs:{\"title\":\"步骤3：确认购买\",\"is-link\":\"\",\"to\":{ name: 'PurchaseStepThree', query: { id: 1 } }}}),_c('van-cell',{attrs:{\"title\":\"步骤4：购买完成\",\"is-link\":\"\",\"to\":{ name: 'PurchaseStepFour', query: { id: 1 } }}})],1)],1),_c('div',{staticClass:\"section\"},[_c('h3',[_vm._v(\"Pages组件\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"首页组件\",\"is-link\":\"\",\"to\":\"/pages/home\"}}),_c('van-cell',{attrs:{\"title\":\"产品页面\",\"is-link\":\"\",\"to\":\"/pages/products\"}}),_c('van-cell',{attrs:{\"title\":\"产品详情页面\",\"is-link\":\"\",\"to\":\"/pages/product-detail\"}}),_c('van-cell',{attrs:{\"title\":\"购买页面\",\"is-link\":\"\",\"to\":\"/pages/purchase\"}}),_c('van-cell',{attrs:{\"title\":\"赎回页面\",\"is-link\":\"\",\"to\":\"/pages/redeem\"}})],1)],1),_vm._m(0)])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"section\"},[_c('h3',[_vm._v(\"录制测试说明\")]),_c('div',{staticClass:\"test-guide\"},[_c('h4',[_vm._v(\"测试新的录制功能：\")]),_c('ol',[_c('li',[_vm._v(\"点击\\\"产品列表\\\"进入主页面\")]),_c('li',[_vm._v(\"点击\\\"开始录制\\\"按钮，会弹出录制权限申请弹框\")]),_c('li',[_vm._v(\"点击\\\"同意录制\\\"开始录制，会显示录制状态和时间\")]),_c('li',[_vm._v(\"点击任意产品的\\\"立即购买\\\"按钮\")]),_c('li',[_vm._v(\"选择\\\"分步购买流程\\\"\")]),_c('li',[_vm._v(\"按步骤完成购买流程（注意：超过3分钟会提示交易失败）\")]),_c('li',[_vm._v(\"在最后一步会自动停止录制并显示录制结果\")])]),_c('h4',[_vm._v(\"功能特点：\")]),_c('ul',[_c('li',[_vm._v(\"✅ 录制前需要用户同意\")]),_c('li',[_vm._v(\"✅ 实时显示录制时间\")]),_c('li',[_vm._v(\"✅ 3分钟录制超时保护\")]),_c('li',[_vm._v(\"✅ 分步骤页面间跳转继续录制\")]),_c('li',[_vm._v(\"✅ 表单数据在步骤间自动保存\")]),_c('li',[_vm._v(\"✅ 购买完成后自动停止录制\")]),_c('li',[_vm._v(\"✅ 录制数据压缩和上传\")])])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"router-index\">\r\n    <van-nav-bar title=\"路由导航\" fixed />\r\n    \r\n    <div class=\"content\">\r\n      <div class=\"section\">\r\n        <h3>录制功能</h3>\r\n        <van-cell-group>\r\n          <van-cell title=\"单页面录制\" is-link to=\"/SimpleRecord\" />\r\n          <van-cell title=\"多页面录制\" is-link to=\"/multi-page\" />\r\n        </van-cell-group>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h3>业务页面</h3>\r\n        <van-cell-group>\r\n          <van-cell title=\"产品列表\" is-link to=\"/\" />\r\n          <van-cell title=\"产品详情\" is-link to=\"/product/1\" />\r\n          <van-cell title=\"传统购买流程\" is-link to=\"/purchase/1\" />\r\n          <van-cell title=\"产品赎回\" is-link to=\"/redeem/1\" />\r\n          <van-cell title=\"录制回放\" is-link to=\"/player\" />\r\n        </van-cell-group>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h3>新分步购买流程</h3>\r\n        <van-cell-group>\r\n          <van-cell \r\n            title=\"步骤1：确认产品\" \r\n            is-link \r\n            :to=\"{ name: 'PurchaseStepOne', query: { id: 1 } }\" \r\n          />\r\n          <van-cell \r\n            title=\"步骤2：填写信息\" \r\n            is-link \r\n            :to=\"{ name: 'PurchaseStepTwo', query: { id: 1 } }\" \r\n          />\r\n          <van-cell \r\n            title=\"步骤3：确认购买\" \r\n            is-link \r\n            :to=\"{ name: 'PurchaseStepThree', query: { id: 1 } }\" \r\n          />\r\n          <van-cell \r\n            title=\"步骤4：购买完成\" \r\n            is-link \r\n            :to=\"{ name: 'PurchaseStepFour', query: { id: 1 } }\" \r\n          />\r\n        </van-cell-group>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h3>Pages组件</h3>\r\n        <van-cell-group>\r\n          <van-cell title=\"首页组件\" is-link to=\"/pages/home\" />\r\n          <van-cell title=\"产品页面\" is-link to=\"/pages/products\" />\r\n          <van-cell title=\"产品详情页面\" is-link to=\"/pages/product-detail\" />\r\n          <van-cell title=\"购买页面\" is-link to=\"/pages/purchase\" />\r\n          <van-cell title=\"赎回页面\" is-link to=\"/pages/redeem\" />\r\n        </van-cell-group>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h3>录制测试说明</h3>\r\n        <div class=\"test-guide\">\r\n          <h4>测试新的录制功能：</h4>\r\n          <ol>\r\n            <li>点击\"产品列表\"进入主页面</li>\r\n            <li>点击\"开始录制\"按钮，会弹出录制权限申请弹框</li>\r\n            <li>点击\"同意录制\"开始录制，会显示录制状态和时间</li>\r\n            <li>点击任意产品的\"立即购买\"按钮</li>\r\n            <li>选择\"分步购买流程\"</li>\r\n            <li>按步骤完成购买流程（注意：超过3分钟会提示交易失败）</li>\r\n            <li>在最后一步会自动停止录制并显示录制结果</li>\r\n          </ol>\r\n          \r\n          <h4>功能特点：</h4>\r\n          <ul>\r\n            <li>✅ 录制前需要用户同意</li>\r\n            <li>✅ 实时显示录制时间</li>\r\n            <li>✅ 3分钟录制超时保护</li>\r\n            <li>✅ 分步骤页面间跳转继续录制</li>\r\n            <li>✅ 表单数据在步骤间自动保存</li>\r\n            <li>✅ 购买完成后自动停止录制</li>\r\n            <li>✅ 录制数据压缩和上传</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'RouterIndex'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.router-index {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section h3 {\r\n  margin: 0 0 12px 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  padding-left: 4px;\r\n}\r\n\r\n.test-guide {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.test-guide h4 {\r\n  margin: 0 0 12px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #1989fa;\r\n}\r\n\r\n.test-guide ol,\r\n.test-guide ul {\r\n  margin: 0 0 16px 0;\r\n  padding-left: 20px;\r\n}\r\n\r\n.test-guide ol:last-child,\r\n.test-guide ul:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.test-guide li {\r\n  margin-bottom: 6px;\r\n  font-size: 13px;\r\n  color: #666;\r\n  line-height: 1.5;\r\n}\r\n\r\n.test-guide ul li {\r\n  color: #07c160;\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RouterIndex.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RouterIndex.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RouterIndex.vue?vue&type=template&id=0fd5bf03&scoped=true\"\nimport script from \"./RouterIndex.vue?vue&type=script&lang=js\"\nexport * from \"./RouterIndex.vue?vue&type=script&lang=js\"\nimport style0 from \"./RouterIndex.vue?vue&type=style&index=0&id=0fd5bf03&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0fd5bf03\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home\"},[_c('van-nav-bar',{attrs:{\"title\":\"手机银行理财产品\",\"fixed\":\"\"}}),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"welcome-banner\"},[_vm._m(0),_c('div',{staticClass:\"banner-image\"},[_c('van-icon',{attrs:{\"name\":\"gold-coin-o\",\"size\":\"40\",\"color\":\"#1989fa\"}})],1)]),_c('div',{staticClass:\"main-features\"},[_c('van-grid',{attrs:{\"column-num\":2,\"gutter\":16}},[_c('van-grid-item',{attrs:{\"icon\":\"gold-coin-o\",\"text\":\"理财产品\"},on:{\"click\":function($event){return _vm.$router.push('/products')}}}),_c('van-grid-item',{attrs:{\"icon\":\"video-o\",\"text\":\"录制回放\"},on:{\"click\":function($event){return _vm.$router.push('/player')}}})],1)],1),_c('div',{staticClass:\"features-section\"},[_vm._m(1),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"完整录制\",\"label\":\"记录购买和赎回的完整操作流程\",\"icon\":\"video\"}}),_c('van-cell',{attrs:{\"title\":\"数据压缩\",\"label\":\"使用pako压缩技术，节省存储空间\",\"icon\":\"compress\"}}),_c('van-cell',{attrs:{\"title\":\"回放功能\",\"label\":\"支持操作回放，便于审核和复盘\",\"icon\":\"play-circle\"}}),_c('van-cell',{attrs:{\"title\":\"安全可靠\",\"label\":\"数据加密传输，保障操作安全\",\"icon\":\"shield\"}})],1)],1),_c('div',{staticClass:\"quick-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":function($event){return _vm.$router.push('/products')}}},[_vm._v(\" 开始体验 \")])],1)])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"banner-content\"},[_c('h2',[_vm._v(\"智能录制系统\")]),_c('p',[_vm._v(\"为您的每一笔理财操作提供完整的可回溯记录\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"section-title\"},[_c('h3',[_vm._v(\"功能特色\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home\">\r\n    <van-nav-bar title=\"手机银行理财产品\" fixed />\r\n    \r\n    <div class=\"content\">\r\n      <!-- 欢迎横幅 -->\r\n      <div class=\"welcome-banner\">\r\n        <div class=\"banner-content\">\r\n          <h2>智能录制系统</h2>\r\n          <p>为您的每一笔理财操作提供完整的可回溯记录</p>\r\n        </div>\r\n        <div class=\"banner-image\">\r\n          <van-icon name=\"gold-coin-o\" size=\"40\" color=\"#1989fa\" />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 主要功能 -->\r\n      <div class=\"main-features\">\r\n        <van-grid :column-num=\"2\" :gutter=\"16\">\r\n          <van-grid-item\r\n            icon=\"gold-coin-o\"\r\n            text=\"理财产品\"\r\n            @click=\"$router.push('/products')\"\r\n          />\r\n          <van-grid-item\r\n            icon=\"video-o\"\r\n            text=\"录制回放\"\r\n            @click=\"$router.push('/player')\"\r\n          />\r\n        </van-grid>\r\n      </div>\r\n\r\n      <!-- 功能特色 -->\r\n      <div class=\"features-section\">\r\n        <div class=\"section-title\">\r\n          <h3>功能特色</h3>\r\n        </div>\r\n        <van-cell-group>\r\n          <van-cell \r\n            title=\"完整录制\" \r\n            label=\"记录购买和赎回的完整操作流程\"\r\n            icon=\"video\"\r\n          />\r\n          <van-cell \r\n            title=\"数据压缩\" \r\n            label=\"使用pako压缩技术，节省存储空间\"\r\n            icon=\"compress\"\r\n          />\r\n          <van-cell \r\n            title=\"回放功能\" \r\n            label=\"支持操作回放，便于审核和复盘\"\r\n            icon=\"play-circle\"\r\n          />\r\n          <van-cell \r\n            title=\"安全可靠\" \r\n            label=\"数据加密传输，保障操作安全\"\r\n            icon=\"shield\"\r\n          />\r\n        </van-cell-group>\r\n      </div>\r\n\r\n      <!-- 快速入口 -->\r\n      <div class=\"quick-actions\">\r\n        <van-button \r\n          type=\"primary\" \r\n          size=\"large\" \r\n          block \r\n          round\r\n          @click=\"$router.push('/products')\"\r\n        >\r\n          开始体验\r\n        </van-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Home'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.home {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.welcome-banner {\r\n  background: linear-gradient(135deg, #1989fa 0%, #0570e8 100%);\r\n  border-radius: 12px;\r\n  padding: 24px;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  color: white;\r\n  box-shadow: 0 4px 12px rgba(25, 137, 250, 0.3);\r\n}\r\n\r\n.banner-content h2 {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.banner-content p {\r\n  font-size: 14px;\r\n  opacity: 0.9;\r\n  line-height: 1.4;\r\n}\r\n\r\n.banner-image {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.main-features {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.main-features .van-grid-item {\r\n  background: white;\r\n  border-radius: 8px;\r\n}\r\n\r\n.features-section {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.section-title {\r\n  padding: 0 4px 16px;\r\n}\r\n\r\n.section-title h3 {\r\n  color: #323233;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  margin: 0;\r\n}\r\n\r\n.features-section .van-cell-group {\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.quick-actions {\r\n  margin-top: 32px;\r\n  padding: 0 16px;\r\n}\r\n\r\n.quick-actions .van-button {\r\n  height: 48px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=c1752790&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=c1752790&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c1752790\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('RecordWrapper',{ref:\"recordWrapper\",attrs:{\"show-controls\":false,\"auto-start\":false,\"stop-on-destroy\":false,\"require-consent\":true,\"metadata\":{ action: 'browse_products' }},on:{\"record-started\":_vm.onRecordStarted,\"record-declined\":_vm.onRecordDeclined,\"record-timeout\":_vm.onRecordTimeout,\"timeout-confirmed\":_vm.onTimeoutConfirmed}},[_c('div',{staticClass:\"product-list\"},[_c('van-nav-bar',{attrs:{\"title\":\"理财产品\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('van-dialog',{attrs:{\"title\":\"选择购买流程\",\"show-cancel-button\":true,\"confirm-button-text\":\"分步购买流程\",\"cancel-button-text\":\"传统单页购买\",\"before-close\":_vm.handleModeDialogClose,\"close-on-click-overlay\":false},model:{value:(_vm.showModeSelection),callback:function ($$v) {_vm.showModeSelection=$$v},expression:\"showModeSelection\"}},[_c('div',{staticClass:\"mode-dialog-content\"},[_c('div',{staticClass:\"dialog-icon\"},[_c('van-icon',{attrs:{\"name\":\"shopping-cart-o\",\"size\":\"48\",\"color\":\"#1989fa\"}})],1),_c('p',{staticClass:\"dialog-text\"},[_vm._v(\" 请选择您喜欢的购买方式： \")]),_c('div',{staticClass:\"mode-options\"},[_c('div',{staticClass:\"mode-option\"},[_c('h4',[_vm._v(\"📝 分步购买流程\")]),_c('p',[_vm._v(\"• 分步骤引导，操作简单\")]),_c('p',[_vm._v(\"• 支持录制回放\")]),_c('p',[_vm._v(\"• 数据自动保存\")])]),_c('div',{staticClass:\"mode-option\"},[_c('h4',[_vm._v(\"⚡ 传统单页购买\")]),_c('p',[_vm._v(\"• 一页完成所有操作\")]),_c('p',[_vm._v(\"• 快速便捷\")]),_c('p',[_vm._v(\"• 适合熟悉用户\")])])])])]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"stats-card\"},[_c('div',{staticClass:\"stat-item\"},[_c('div',{staticClass:\"stat-number\"},[_vm._v(_vm._s(_vm.products.length))]),_c('div',{staticClass:\"stat-label\"},[_vm._v(\"在售产品\")])]),_c('div',{staticClass:\"stat-divider\"}),_c('div',{staticClass:\"stat-item\"},[_c('div',{staticClass:\"stat-number\"},[_vm._v(\"4.2%-9.5%\")]),_c('div',{staticClass:\"stat-label\"},[_vm._v(\"收益区间\")])])]),_c('div',{staticClass:\"products-container\"},_vm._l((_vm.products),function(product){return _c('div',{key:product.id,staticClass:\"product-card\",on:{\"click\":function($event){return _vm.goToDetail(product.id)}}},[_c('div',{staticClass:\"product-header\"},[_c('div',{staticClass:\"product-info\"},[_c('h3',{staticClass:\"product-name\"},[_vm._v(_vm._s(product.name))]),_c('p',{staticClass:\"product-desc\"},[_vm._v(_vm._s(product.description))])]),_c('div',{staticClass:\"product-return\"},[_c('div',{staticClass:\"return-rate\"},[_vm._v(_vm._s(product.expectedReturn))]),_c('div',{staticClass:\"return-label\"},[_vm._v(\"预期收益率\")])])]),_c('div',{staticClass:\"product-details\"},[_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"detail-label\"},[_vm._v(\"起购金额\")]),_c('span',{staticClass:\"detail-value\"},[_vm._v(_vm._s(product.minAmount))])]),_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"detail-label\"},[_vm._v(\"风险等级\")]),_c('van-tag',{attrs:{\"type\":product.riskLevel === '低风险' ? 'success' : product.riskLevel === '中风险' ? 'warning' : 'danger',\"size\":\"small\"}},[_vm._v(\" \"+_vm._s(product.riskLevel)+\" \")])],1)]),_c('div',{staticClass:\"product-actions\"},[_c('van-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handlePurchaseClick(product.id)}}},[_vm._v(\" 立即购买 \")]),_c('van-button',{attrs:{\"size\":\"small\",\"plain\":\"\",\"round\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.goToRedeem(product.id)}}},[_vm._v(\" 产品赎回 \")])],1)])}),0)])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"record-wrapper\"},[_c('van-dialog',{attrs:{\"title\":\"录制权限申请\",\"show-cancel-button\":true,\"confirm-button-text\":\"同意录制\",\"cancel-button-text\":\"不同意\",\"before-close\":_vm.handleDialogClose,\"close-on-click-overlay\":false},model:{value:(_vm.showRecordDialog),callback:function ($$v) {_vm.showRecordDialog=$$v},expression:\"showRecordDialog\"}},[_c('div',{staticClass:\"record-dialog-content\"},[_c('div',{staticClass:\"dialog-icon\"},[_c('van-icon',{attrs:{\"name\":\"video-o\",\"size\":\"48\",\"color\":\"#1989fa\"}})],1),_c('p',{staticClass:\"dialog-text\"},[_vm._v(\" 为了更好地记录您的操作流程，我们需要录制您在此页面的操作行为。 \")]),_c('p',{staticClass:\"dialog-note\"},[_vm._v(\" • 录制仅用于操作流程分析\"),_c('br'),_vm._v(\" • 录制数据会进行加密处理\"),_c('br'),_vm._v(\" • 您可以随时停止录制 \")])])]),_c('van-dialog',{attrs:{\"title\":\"交易超时\",\"show-cancel-button\":false,\"confirm-button-text\":\"确定\"},on:{\"confirm\":_vm.handleTimeout},model:{value:(_vm.showTimeoutDialog),callback:function ($$v) {_vm.showTimeoutDialog=$$v},expression:\"showTimeoutDialog\"}},[_c('div',{staticClass:\"timeout-dialog-content\"},[_c('div',{staticClass:\"dialog-icon\"},[_c('van-icon',{attrs:{\"name\":\"warning-o\",\"size\":\"48\",\"color\":\"#ff6b35\"}})],1),_c('p',{staticClass:\"dialog-text\"},[_vm._v(\" 录制时间已超过3分钟，交易失败。请重新开始操作。 \")])])]),(_vm.showIndicator && _vm.isRecording)?_c('div',{staticClass:\"record-indicator\"},[_c('div',{staticClass:\"record-dot\"}),_c('span',[_vm._v(\"正在录制 \"+_vm._s(_vm.recordingTime))])]):_vm._e(),(_vm.showControls)?_c('div',{staticClass:\"record-controls\"},[(!_vm.isRecording)?_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"round\":\"\",\"loading\":_vm.loading,\"icon\":\"video-o\"},on:{\"click\":_vm.showRecordingConsent}},[_vm._v(\" 开始录制 \")]):_c('van-button',{attrs:{\"type\":\"danger\",\"size\":\"small\",\"round\":\"\",\"loading\":_vm.loading,\"icon\":\"pause\"},on:{\"click\":_vm.stopRecord}},[_vm._v(\" 停止录制 \")])],1):_vm._e(),_c('div',{staticClass:\"content-wrapper\"},[_vm._t(\"default\")],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"record-wrapper\">\r\n    <!-- 录制同意弹框 -->\r\n    <van-dialog\r\n      v-model=\"showRecordDialog\"\r\n      title=\"录制权限申请\"\r\n      :show-cancel-button=\"true\"\r\n      confirm-button-text=\"同意录制\"\r\n      cancel-button-text=\"不同意\"\r\n      :before-close=\"handleDialogClose\"\r\n      :close-on-click-overlay=\"false\"\r\n    >\r\n      <div class=\"record-dialog-content\">\r\n        <div class=\"dialog-icon\">\r\n          <van-icon name=\"video-o\" size=\"48\" color=\"#1989fa\" />\r\n        </div>\r\n        <p class=\"dialog-text\">\r\n          为了更好地记录您的操作流程，我们需要录制您在此页面的操作行为。\r\n        </p>\r\n        <p class=\"dialog-note\">\r\n          • 录制仅用于操作流程分析<br>\r\n          • 录制数据会进行加密处理<br>\r\n          • 您可以随时停止录制\r\n        </p>\r\n      </div>\r\n    </van-dialog>\r\n\r\n    <!-- 录制超时提示弹框 -->\r\n    <van-dialog\r\n      v-model=\"showTimeoutDialog\"\r\n      title=\"交易超时\"\r\n      :show-cancel-button=\"false\"\r\n      confirm-button-text=\"确定\"\r\n      @confirm=\"handleTimeout\"\r\n    >\r\n      <div class=\"timeout-dialog-content\">\r\n        <div class=\"dialog-icon\">\r\n          <van-icon name=\"warning-o\" size=\"48\" color=\"#ff6b35\" />\r\n        </div>\r\n        <p class=\"dialog-text\">\r\n          录制时间已超过3分钟，交易失败。请重新开始操作。\r\n        </p>\r\n      </div>\r\n    </van-dialog>\r\n\r\n    <!-- 录制状态指示器 -->\r\n    <div v-if=\"showIndicator && isRecording\" class=\"record-indicator\">\r\n      <div class=\"record-dot\"></div>\r\n      <span>正在录制 {{ recordingTime }}</span>\r\n    </div>\r\n\r\n    <!-- 录制控制按钮 -->\r\n    <div v-if=\"showControls\" class=\"record-controls\">\r\n      <van-button \r\n        v-if=\"!isRecording\" \r\n        type=\"primary\" \r\n        size=\"small\"\r\n        round\r\n        @click=\"showRecordingConsent\"\r\n        :loading=\"loading\"\r\n        icon=\"video-o\"\r\n      >\r\n        开始录制\r\n      </van-button>\r\n      <van-button \r\n        v-else \r\n        type=\"danger\" \r\n        size=\"small\"\r\n        round\r\n        @click=\"stopRecord\"\r\n        :loading=\"loading\"\r\n        icon=\"pause\"\r\n      >\r\n        停止录制\r\n      </van-button>\r\n    </div>\r\n\r\n    <!-- 内容插槽 -->\r\n    <div class=\"content-wrapper\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GlobalRecorder from '@/utils/global-recorder'\r\n\r\nexport default {\r\n  name: 'RecordWrapper',\r\n  props: {\r\n    // 是否显示录制状态指示器\r\n    showIndicator: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 是否显示录制控制按钮\r\n    showControls: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 录制配置\r\n    recordOptions: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    // 自动开始录制\r\n    autoStart: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 录制元数据\r\n    metadata: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    // 组件销毁时是否停止录制\r\n    stopOnDestroy: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 录制超时时间（毫秒），默认3分钟\r\n    timeoutDuration: {\r\n      type: Number,\r\n      default: 3 * 60 * 1000 // 3分钟\r\n    },\r\n    // 是否需要用户同意录制\r\n    requireConsent: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      globalRecorder: null,\r\n      isRecording: false,\r\n      loading: false,\r\n      showRecordDialog: false,\r\n      showTimeoutDialog: false,\r\n      recordingStartTime: null,\r\n      recordingTimer: null,\r\n      timeoutTimer: null,\r\n      recordingTime: '00:00',\r\n      hasUserConsent: false\r\n    }\r\n  },\r\n  async mounted() {\r\n    // 获取全局录制器实例\r\n    this.globalRecorder = GlobalRecorder.getInstance()\r\n    \r\n    // 添加监听器\r\n    this.globalRecorder.addListener(this.onRecordEvent)\r\n    \r\n    // 获取当前录制状态\r\n    const status = this.globalRecorder.getRecordingStatus()\r\n    this.isRecording = status.isRecording\r\n\r\n    // 如果已经在录制，启动计时器\r\n    if (this.isRecording) {\r\n      this.startRecordingTimer()\r\n    }\r\n\r\n    // 如果设置了自动开始且当前没有录制\r\n    if (this.autoStart && !this.isRecording) {\r\n      setTimeout(() => {\r\n        if (this.requireConsent && !this.hasUserConsent) {\r\n          // 需要用户同意，显示弹框，但不开始录制\r\n          console.log('RecordWrapper：显示录制同意弹框')\r\n          this.showRecordingConsent()\r\n        } else {\r\n          // 不需要同意或用户已同意，直接开始录制\r\n          console.log('RecordWrapper：自动开始录制')\r\n          this.startRecord()\r\n        }\r\n      }, 500) // 减少延迟，让用户更快看到弹框\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    // 清理定时器\r\n    this.clearTimers()\r\n    \r\n    // 移除监听器\r\n    if (this.globalRecorder) {\r\n      this.globalRecorder.removeListener(this.onRecordEvent)\r\n    }\r\n    \r\n    // 组件销毁前停止录制（只有在设置了stopOnDestroy时才停止）\r\n    if (this.isRecording && this.stopOnDestroy) {\r\n      this.stopRecord()\r\n    }\r\n  },\r\n  methods: {\r\n    // 显示录制同意弹框（供外部调用）\r\n    showRecordingConsent() {\r\n      if (this.requireConsent && !this.isRecording) {\r\n        this.showRecordDialog = true\r\n      } else if (!this.requireConsent && !this.isRecording) {\r\n        // 如果不需要同意，直接开始录制\r\n        this.startRecord()\r\n      }\r\n    },\r\n\r\n    // 处理弹框关闭\r\n    handleDialogClose(action) {\r\n      this.showRecordDialog = false\r\n      if (action === 'confirm') {\r\n        // 用户同意录制\r\n        this.hasUserConsent = true\r\n        this.startRecord()\r\n      } else {\r\n        // 用户拒绝录制\r\n        this.$toast('已取消录制')\r\n        this.$emit('record-declined')\r\n      }\r\n    },\r\n\r\n    // 开始录制\r\n    async startRecord() {\r\n      if (this.loading || this.isRecording) return\r\n\r\n      this.loading = true\r\n      try {\r\n        const success = await this.globalRecorder.startRecording({\r\n          ...this.metadata,\r\n          component: this.$options.name,\r\n          route: this.$route.path,\r\n          startTime: new Date().toISOString()\r\n        })\r\n\r\n        if (success) {\r\n          this.recordingStartTime = Date.now()\r\n          this.startRecordingTimer()\r\n          this.startTimeoutTimer()\r\n          this.$emit('record-started')\r\n          this.$toast.success('开始录制')\r\n        } else {\r\n          this.$toast.fail('录制启动失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('启动录制失败:', error)\r\n        this.$toast.fail('录制启动失败')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // 停止录制\r\n    async stopRecord() {\r\n      if (this.loading || !this.isRecording) return\r\n\r\n      this.loading = true\r\n      try {\r\n        this.clearTimers()\r\n        const result = await this.globalRecorder.stopRecording()\r\n        this.$emit('record-stopped', result)\r\n        \r\n        if (result) {\r\n          this.$toast.success('录制已完成')\r\n        } else {\r\n          this.$toast.fail('录制停止失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('停止录制失败:', error)\r\n        this.$toast.fail('录制停止失败')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // 停止录制并处理数据（统一处理方法）\r\n    async stopRecordingAndProcess(additionalInfo = {}) {\r\n      if (this.loading || !this.isRecording) {\r\n        return {\r\n          success: false,\r\n          error: '录制未开始或已停止'\r\n        }\r\n      }\r\n\r\n      this.loading = true\r\n      try {\r\n        this.clearTimers()\r\n        \r\n        // 使用全局录制器的stopRecordingAndProcess方法\r\n        const result = await this.globalRecorder.stopRecordingAndProcess({\r\n          ...additionalInfo,\r\n          component: this.$options.name,\r\n          route: this.$route.path,\r\n          stopTime: new Date().toISOString()\r\n        })\r\n        \r\n        console.log('RecordWrapper：录制数据处理结果:', result)\r\n        \r\n        if (result.success) {\r\n          // 上传录制数据到视频存储接口\r\n          const uploadResult = await this.uploadVideoData(result.data, additionalInfo)\r\n          \r\n          console.log('RecordWrapper：视频上传结果:', uploadResult)\r\n          \r\n          const finalResult = {\r\n            success: true,\r\n            events: result.recordingResult.events,\r\n            data: result.data,\r\n            uploadResult: uploadResult,\r\n            stats: {\r\n              originalSize: result.data.sizes.original,\r\n              compressedSize: result.data.sizes.compressed,\r\n              compressionRatio: result.data.compressionRatio,\r\n              eventCount: result.data.finalData.totalEvents\r\n            }\r\n          }\r\n          \r\n          // 发送处理完成事件\r\n          this.$emit('record-processed', finalResult)\r\n          this.$toast.success('录制数据处理并上传成功')\r\n          \r\n          return finalResult\r\n        } else {\r\n          console.warn('RecordWrapper：录制数据处理失败:', result.error)\r\n          const errorResult = { \r\n            success: false, \r\n            error: result.error,\r\n            message: result.error === '录制数据为空' ? \r\n              '请先开始录制，然后进行操作' : \r\n              '录制过程中出现错误'\r\n          }\r\n          \r\n          this.$emit('record-process-failed', errorResult)\r\n          this.$toast.fail('录制数据处理失败: ' + result.error)\r\n          \r\n          return errorResult\r\n        }\r\n      } catch (error) {\r\n        console.error('RecordWrapper：停止录制并处理数据失败:', error)\r\n        const errorResult = { success: false, error: error.message }\r\n        \r\n        this.$emit('record-process-failed', errorResult)\r\n        this.$toast.fail('录制处理失败: ' + error.message)\r\n        \r\n        return errorResult\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // 上传视频数据到专门的视频存储接口\r\n    async uploadVideoData(recordingData, additionalInfo = {}) {\r\n      try {\r\n        console.log('RecordWrapper：开始上传视频数据...')\r\n        \r\n        // 准备上传数据\r\n        const uploadData = {\r\n          // 录制基础信息\r\n          recordingInfo: {\r\n            duration: recordingData.duration,\r\n            eventCount: recordingData.finalData.totalEvents,\r\n            startTime: recordingData.startTime,\r\n            endTime: recordingData.endTime,\r\n            compressionRatio: recordingData.compressionRatio\r\n          },\r\n          \r\n          // 录制事件数据（压缩后）\r\n          eventsData: recordingData.finalData.compressedEvents,\r\n          \r\n          // 文件大小信息\r\n          sizes: recordingData.sizes,\r\n          \r\n          // 附加业务信息\r\n          businessInfo: {\r\n            ...additionalInfo,\r\n            component: this.$options.name,\r\n            route: this.$route.path,\r\n            userAgent: navigator.userAgent,\r\n            timestamp: Date.now()\r\n          },\r\n          \r\n          // 元数据\r\n          metadata: {\r\n            ...this.metadata,\r\n            recordingId: recordingData.recordingId || `rec_${Date.now()}`,\r\n            version: '1.0'\r\n          }\r\n        }\r\n        \r\n        console.log('RecordWrapper：准备上传的数据大小:', JSON.stringify(uploadData).length, '字节')\r\n        \r\n        // 调用专门的视频上传接口\r\n        const response = await fetch('/api/upload-video-recording', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'X-Recording-Type': 'video-session'\r\n          },\r\n          body: JSON.stringify(uploadData)\r\n        })\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`上传请求失败: ${response.status} ${response.statusText}`)\r\n        }\r\n        \r\n        const result = await response.json()\r\n        \r\n        console.log('RecordWrapper：视频上传成功:', result)\r\n        \r\n        return {\r\n          success: true,\r\n          uploadId: result.uploadId || result.id,\r\n          videoUrl: result.videoUrl || result.url,\r\n          size: JSON.stringify(uploadData).length,\r\n          timestamp: Date.now(),\r\n          response: result\r\n        }\r\n      } catch (error) {\r\n        console.error('RecordWrapper：视频上传失败:', error)\r\n        \r\n        // 如果是网络错误或服务器错误，尝试本地存储\r\n        try {\r\n          const localStorageKey = `video_recording_${Date.now()}`\r\n          const localData = {\r\n            ...recordingData,\r\n            additionalInfo,\r\n            uploadFailedAt: new Date().toISOString(),\r\n            error: error.message\r\n          }\r\n          \r\n          localStorage.setItem(localStorageKey, JSON.stringify(localData))\r\n          console.log('RecordWrapper：视频数据已保存到本地存储:', localStorageKey)\r\n          \r\n          return {\r\n            success: false,\r\n            error: error.message,\r\n            localStorageKey: localStorageKey,\r\n            fallbackStorage: true,\r\n            message: '上传失败，数据已保存到本地存储'\r\n          }\r\n        } catch (localError) {\r\n          console.error('RecordWrapper：本地存储也失败:', localError)\r\n          \r\n          return {\r\n            success: false,\r\n            error: error.message,\r\n            localError: localError.message,\r\n            message: '上传失败且本地存储失败'\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    // 开始录制计时器\r\n    startRecordingTimer() {\r\n      if (this.recordingTimer) {\r\n        clearInterval(this.recordingTimer)\r\n      }\r\n      \r\n      this.recordingTimer = setInterval(() => {\r\n        if (this.recordingStartTime) {\r\n          const elapsed = Date.now() - this.recordingStartTime\r\n          this.recordingTime = this.formatTime(elapsed)\r\n        }\r\n      }, 1000)\r\n    },\r\n\r\n    // 开始超时计时器\r\n    startTimeoutTimer() {\r\n      if (this.timeoutTimer) {\r\n        clearTimeout(this.timeoutTimer)\r\n      }\r\n      \r\n      this.timeoutTimer = setTimeout(() => {\r\n        this.handleRecordingTimeout()\r\n      }, this.timeoutDuration)\r\n    },\r\n\r\n    // 处理录制超时\r\n    async handleRecordingTimeout() {\r\n      console.log('录制超时，停止录制')\r\n      this.showTimeoutDialog = true\r\n      \r\n      // 停止录制\r\n      if (this.isRecording) {\r\n        await this.stopRecord()\r\n      }\r\n      \r\n      this.$emit('record-timeout')\r\n    },\r\n\r\n    // 处理超时弹框确认\r\n    handleTimeout() {\r\n      this.showTimeoutDialog = false\r\n      // 可以在这里添加跳转到指定页面的逻辑\r\n      this.$emit('timeout-confirmed')\r\n    },\r\n\r\n    // 清理所有定时器\r\n    clearTimers() {\r\n      if (this.recordingTimer) {\r\n        clearInterval(this.recordingTimer)\r\n        this.recordingTimer = null\r\n      }\r\n      if (this.timeoutTimer) {\r\n        clearTimeout(this.timeoutTimer)\r\n        this.timeoutTimer = null\r\n      }\r\n    },\r\n\r\n    // 格式化时间显示\r\n    formatTime(milliseconds) {\r\n      const totalSeconds = Math.floor(milliseconds / 1000)\r\n      const minutes = Math.floor(totalSeconds / 60)\r\n      const seconds = totalSeconds % 60\r\n      return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\r\n    },\r\n\r\n    // 获取录制状态\r\n    getRecordingStatus() {\r\n      return this.globalRecorder ? this.globalRecorder.getRecordingStatus() : null\r\n    },\r\n\r\n    // 录制事件监听器\r\n    onRecordEvent(event, data) {\r\n      switch (event) {\r\n        case 'started':\r\n          this.isRecording = true\r\n          break\r\n        case 'stopped':\r\n          this.isRecording = false\r\n          this.clearTimers()\r\n          this.recordingTime = '00:00'\r\n          break\r\n        case 'error':\r\n          this.isRecording = false\r\n          this.clearTimers()\r\n          console.error('录制错误:', data)\r\n          break\r\n      }\r\n    },\r\n\r\n    // 完成录制（供外部页面调用的简单接口）\r\n    async finishRecording(businessData = {}) {\r\n      console.log('RecordWrapper：收到完成录制请求，业务数据:', businessData)\r\n      \r\n      try {\r\n        // 检查录制状态\r\n        if (!this.isRecording) {\r\n          console.warn('RecordWrapper：录制未开始，无法完成录制')\r\n          const errorResult = {\r\n            success: false,\r\n            error: '录制未开始',\r\n            message: '请先开始录制，然后进行操作'\r\n          }\r\n          this.$emit('recording-finished', errorResult)\r\n          return errorResult\r\n        }\r\n        \r\n        // 直接调用GlobalRecorder的finishRecording方法\r\n        const result = await this.globalRecorder.finishRecording(businessData)\r\n        \r\n        console.log('RecordWrapper：录制完成结果:', result)\r\n        \r\n        // 发送完成事件给父组件\r\n        this.$emit('recording-finished', result)\r\n        \r\n        return result\r\n      } catch (error) {\r\n        console.error('RecordWrapper：完成录制失败:', error)\r\n        const errorResult = {\r\n          success: false,\r\n          error: error.message,\r\n          message: '录制完成处理失败'\r\n        }\r\n        \r\n        this.$emit('recording-finished', errorResult)\r\n        return errorResult\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.record-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content-wrapper {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.record-indicator {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  background: rgba(255, 107, 107, 0.9);\r\n  color: white;\r\n  padding: 8px 12px;\r\n  border-radius: 20px;\r\n  font-size: 12px;\r\n  z-index: 1000;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.record-dot {\r\n  width: 8px;\r\n  height: 8px;\r\n  background: #fff;\r\n  border-radius: 50%;\r\n  animation: pulse 1.5s infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n  0%, 100% { opacity: 1; }\r\n  50% { opacity: 0.5; }\r\n}\r\n\r\n.record-controls {\r\n  position: fixed;\r\n  bottom: 30px;\r\n  right: 20px;\r\n  z-index: 1000;\r\n}\r\n\r\n.record-controls .van-button {\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n/* 弹框内容样式 */\r\n.record-dialog-content {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n.timeout-dialog-content {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n.dialog-icon {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.dialog-text {\r\n  font-size: 14px;\r\n  color: #333;\r\n  line-height: 1.5;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.dialog-note {\r\n  font-size: 12px;\r\n  color: #666;\r\n  line-height: 1.6;\r\n  text-align: left;\r\n  background: #f7f8fa;\r\n  padding: 12px;\r\n  border-radius: 6px;\r\n  margin: 0;\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RecordWrapper.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RecordWrapper.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RecordWrapper.vue?vue&type=template&id=5cf00da6&scoped=true\"\nimport script from \"./RecordWrapper.vue?vue&type=script&lang=js\"\nexport * from \"./RecordWrapper.vue?vue&type=script&lang=js\"\nimport style0 from \"./RecordWrapper.vue?vue&type=style&index=0&id=5cf00da6&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5cf00da6\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <RecordWrapper \r\n    ref=\"recordWrapper\"\r\n    :show-controls=\"false\"\r\n    :auto-start=\"false\"\r\n    :stop-on-destroy=\"false\"\r\n    :require-consent=\"true\"\r\n    :metadata=\"{ action: 'browse_products' }\"\r\n    @record-started=\"onRecordStarted\"\r\n    @record-declined=\"onRecordDeclined\"\r\n    @record-timeout=\"onRecordTimeout\"\r\n    @timeout-confirmed=\"onTimeoutConfirmed\"\r\n  >\r\n    <div class=\"product-list\">\r\n      <van-nav-bar \r\n        title=\"理财产品\" \r\n        left-arrow \r\n        fixed\r\n        @click-left=\"$router.back()\"\r\n      />\r\n\r\n      <!-- 购买流程选择弹框 -->\r\n      <van-dialog\r\n        v-model=\"showModeSelection\"\r\n        title=\"选择购买流程\"\r\n        :show-cancel-button=\"true\"\r\n        confirm-button-text=\"分步购买流程\"\r\n        cancel-button-text=\"传统单页购买\"\r\n        :before-close=\"handleModeDialogClose\"\r\n        :close-on-click-overlay=\"false\"\r\n      >\r\n        <div class=\"mode-dialog-content\">\r\n          <div class=\"dialog-icon\">\r\n            <van-icon name=\"shopping-cart-o\" size=\"48\" color=\"#1989fa\" />\r\n          </div>\r\n          <p class=\"dialog-text\">\r\n            请选择您喜欢的购买方式：\r\n          </p>\r\n          <div class=\"mode-options\">\r\n            <div class=\"mode-option\">\r\n              <h4>📝 分步购买流程</h4>\r\n              <p>• 分步骤引导，操作简单</p>\r\n              <p>• 支持录制回放</p>\r\n              <p>• 数据自动保存</p>\r\n            </div>\r\n            <div class=\"mode-option\">\r\n              <h4>⚡ 传统单页购买</h4>\r\n              <p>• 一页完成所有操作</p>\r\n              <p>• 快速便捷</p>\r\n              <p>• 适合熟悉用户</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </van-dialog>\r\n      \r\n      <div class=\"content\">\r\n        <!-- 产品统计 -->\r\n        <div class=\"stats-card\">\r\n          <div class=\"stat-item\">\r\n            <div class=\"stat-number\">{{ products.length }}</div>\r\n            <div class=\"stat-label\">在售产品</div>\r\n          </div>\r\n          <div class=\"stat-divider\"></div>\r\n          <div class=\"stat-item\">\r\n            <div class=\"stat-number\">4.2%-9.5%</div>\r\n            <div class=\"stat-label\">收益区间</div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 产品列表 -->\r\n        <div class=\"products-container\">\r\n          <div \r\n            v-for=\"product in products\"\r\n            :key=\"product.id\"\r\n            class=\"product-card\"\r\n            @click=\"goToDetail(product.id)\"\r\n          >\r\n            <div class=\"product-header\">\r\n              <div class=\"product-info\">\r\n                <h3 class=\"product-name\">{{ product.name }}</h3>\r\n                <p class=\"product-desc\">{{ product.description }}</p>\r\n              </div>\r\n              <div class=\"product-return\">\r\n                <div class=\"return-rate\">{{ product.expectedReturn }}</div>\r\n                <div class=\"return-label\">预期收益率</div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"product-details\">\r\n              <div class=\"detail-item\">\r\n                <span class=\"detail-label\">起购金额</span>\r\n                <span class=\"detail-value\">{{ product.minAmount }}</span>\r\n              </div>\r\n              <div class=\"detail-item\">\r\n                <span class=\"detail-label\">风险等级</span>\r\n                <van-tag \r\n                  :type=\"product.riskLevel === '低风险' ? 'success' : product.riskLevel === '中风险' ? 'warning' : 'danger'\"\r\n                  size=\"small\"\r\n                >\r\n                  {{ product.riskLevel }}\r\n                </van-tag>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"product-actions\">\r\n              <van-button \r\n                size=\"small\" \r\n                type=\"primary\"\r\n                round\r\n                @click.stop=\"handlePurchaseClick(product.id)\"\r\n              >\r\n                立即购买\r\n              </van-button>\r\n              <van-button \r\n                size=\"small\" \r\n                plain\r\n                round\r\n                @click.stop=\"goToRedeem(product.id)\"\r\n              >\r\n                产品赎回\r\n              </van-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </RecordWrapper>\r\n</template>\r\n\r\n<script>\r\nimport RecordWrapper from '@/components/RecordWrapper.vue'\r\n\r\nexport default {\r\n  name: 'ProductList',\r\n  components: {\r\n    RecordWrapper\r\n  },\r\n  data() {\r\n    return {\r\n      showModeSelection: false,\r\n      selectedProductId: null,\r\n      preferredPurchaseMode: 'step', // 'step' 或 'single'\r\n      products: [\r\n        {\r\n          id: 1,\r\n          name: '稳健增长理财产品',\r\n          description: '低风险，稳定收益，适合保守型投资者',\r\n          expectedReturn: '4.2%',\r\n          minAmount: '1000元',\r\n          riskLevel: '低风险',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        },\r\n        {\r\n          id: 2,\r\n          name: '平衡配置理财产品',\r\n          description: '中等风险，均衡收益，适合稳健型投资者',\r\n          expectedReturn: '6.8%',\r\n          minAmount: '5000元',\r\n          riskLevel: '中风险',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        },\r\n        {\r\n          id: 3,\r\n          name: '成长机会理财产品',\r\n          description: '高风险高收益，适合积极型投资者',\r\n          expectedReturn: '9.5%',\r\n          minAmount: '10000元',\r\n          riskLevel: '高风险',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    goToDetail(id) {\r\n      this.$router.push(`/product/${id}`)\r\n    },\r\n\r\n    // 处理购买点击\r\n    handlePurchaseClick(id) {\r\n      this.selectedProductId = id\r\n      \r\n      // 检查是否已经在录制中\r\n      this.checkRecordingStatus().then(isRecording => {\r\n        if (isRecording) {\r\n          // 如果已经在录制，直接进入分步购买流程\r\n          this.goToPurchase(id, 'step')\r\n        } else {\r\n          // 如果没有录制，触发录制同意弹框\r\n          this.triggerRecordingConsent()\r\n        }\r\n      })\r\n    },\r\n    // 触发录制同意弹框\r\n    triggerRecordingConsent() {\r\n      // 通过ref调用RecordWrapper的录制同意弹框\r\n      this.$refs.recordWrapper?.showRecordingConsent()\r\n    },\r\n\r\n    // 检查录制状态\r\n    async checkRecordingStatus() {\r\n      try {\r\n        const GlobalRecorder = (await import('@/utils/global-recorder')).default\r\n        const globalRecorder = GlobalRecorder.getInstance()\r\n        const status = globalRecorder.getRecordingStatus()\r\n        return status.isRecording\r\n      } catch (error) {\r\n        console.error('检查录制状态失败:', error)\r\n        return false\r\n      }\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // 处理购买流程选择弹框关闭\r\n    handleModeDialogClose(action) {\r\n      this.showModeSelection = false\r\n      \r\n      if (action === 'confirm') {\r\n        // 确认按钮 - 分步购买流程\r\n        this.selectPurchaseMode('step')\r\n      } else if (action === 'cancel') {\r\n        // 取消按钮 - 传统单页购买\r\n        this.selectPurchaseMode('single')\r\n      }\r\n      // 如果是其他方式关闭（比如点击遮罩），不做任何操作\r\n    },\r\n\r\n    // 选择购买模式\r\n    selectPurchaseMode(mode) {\r\n      this.preferredPurchaseMode = mode\r\n      this.goToPurchase(this.selectedProductId, mode)\r\n    },\r\n\r\n    // 去购买\r\n    goToPurchase(id, mode = 'step') {\r\n      if (mode === 'step') {\r\n        // 分步购买流程（默认）\r\n        this.$router.push({\r\n          name: 'PurchaseStepOne',\r\n          query: { id: id }\r\n        })\r\n      } else {\r\n        // 传统单页购买\r\n        this.$router.push(`/purchase/${id}`)\r\n      }\r\n    },\r\n\r\n    goToRedeem(id) {\r\n      this.$router.push(`/redeem/${id}`)\r\n    },\r\n\r\n    // 录制开始事件\r\n    onRecordStarted() {\r\n      console.log('产品列表：录制开始')\r\n      this.$toast.success('录制已开始，现在可以进行购买操作')\r\n      \r\n      // 录制开始后，直接进入分步购买流程\r\n      if (this.selectedProductId) {\r\n        this.goToPurchase(this.selectedProductId, 'step')\r\n      }\r\n    },\r\n\r\n    // 用户拒绝录制\r\n    onRecordDeclined() {\r\n      console.log('产品列表：用户拒绝录制')\r\n      this.$toast('已取消录制，将使用传统购买流程')\r\n      \r\n      // 用户拒绝录制，使用传统单页购买\r\n      if (this.selectedProductId) {\r\n        this.goToPurchase(this.selectedProductId, 'single')\r\n      }\r\n    },\r\n\r\n    // 录制超时\r\n    onRecordTimeout() {\r\n      console.log('产品列表：录制超时')\r\n      this.$toast.fail('录制超时，交易已取消')\r\n      this.showModeSelection = false\r\n    },\r\n\r\n    // 超时确认\r\n    onTimeoutConfirmed() {\r\n      console.log('产品列表：超时确认')\r\n      this.showModeSelection = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.product-list {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.stats-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.stat-item {\r\n  text-align: center;\r\n}\r\n\r\n.stat-number {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #1989fa;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 12px;\r\n  color: #969799;\r\n}\r\n\r\n.stat-divider {\r\n  width: 1px;\r\n  height: 30px;\r\n  background-color: #ebedf0;\r\n}\r\n\r\n.products-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.product-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.product-card:hover {\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.product-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.product-info {\r\n  flex: 1;\r\n}\r\n\r\n.product-name {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0 0 4px 0;\r\n}\r\n\r\n.product-desc {\r\n  font-size: 12px;\r\n  color: #969799;\r\n  margin: 0;\r\n  line-height: 1.4;\r\n}\r\n\r\n.product-return {\r\n  text-align: right;\r\n  margin-left: 16px;\r\n}\r\n\r\n.return-rate {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #ee0a24;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.return-label {\r\n  font-size: 10px;\r\n  color: #969799;\r\n}\r\n\r\n.product-details {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 16px;\r\n  padding: 12px 0;\r\n  border-top: 1px solid #f7f8fa;\r\n  border-bottom: 1px solid #f7f8fa;\r\n}\r\n\r\n.detail-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.detail-label {\r\n  font-size: 12px;\r\n  color: #969799;\r\n}\r\n\r\n.detail-value {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #323233;\r\n}\r\n\r\n.product-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n\r\n.product-actions .van-button {\r\n  flex: 1;\r\n  height: 36px;\r\n}\r\n\r\n/* 购买流程选择弹框样式 */\r\n.mode-dialog-content {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n.dialog-icon {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.dialog-text {\r\n  font-size: 14px;\r\n  color: #333;\r\n  margin-bottom: 20px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.mode-options {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  text-align: left;\r\n}\r\n\r\n.mode-option {\r\n  background: #f7f8fa;\r\n  border-radius: 8px;\r\n  padding: 12px;\r\n  border: 2px solid transparent;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.mode-option h4 {\r\n  margin: 0 0 8px 0;\r\n  font-size: 14px;\r\n  color: #323233;\r\n  font-weight: 600;\r\n}\r\n\r\n.mode-option p {\r\n  margin: 0 0 4px 0;\r\n  font-size: 12px;\r\n  color: #666;\r\n  line-height: 1.4;\r\n}\r\n\r\n.mode-option:last-child p:last-child {\r\n  margin-bottom: 0;\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ProductList.vue?vue&type=template&id=624eb8e7&scoped=true\"\nimport script from \"./ProductList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductList.vue?vue&type=script&lang=js\"\nimport style0 from \"./ProductList.vue?vue&type=style&index=0&id=624eb8e7&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"624eb8e7\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"product-detail\"},[_c('van-nav-bar',{attrs:{\"title\":\"产品详情\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),(_vm.product)?_c('div',{staticClass:\"content\"},[_c('van-card',{attrs:{\"title\":_vm.product.name,\"desc\":_vm.product.description,\"price\":_vm.product.expectedReturn,\"thumb\":_vm.product.image},scopedSlots:_vm._u([{key:\"tags\",fn:function(){return [_c('van-tag',{attrs:{\"type\":_vm.product.riskLevel === '低风险' ? 'success' : _vm.product.riskLevel === '中风险' ? 'warning' : 'danger'}},[_vm._v(\" \"+_vm._s(_vm.product.riskLevel)+\" \")])]},proxy:true}],null,false,269412469)}),_c('van-cell-group',{attrs:{\"title\":\"产品信息\"}},[_c('van-cell',{attrs:{\"title\":\"预期收益率\",\"value\":_vm.product.expectedReturn}}),_c('van-cell',{attrs:{\"title\":\"起购金额\",\"value\":_vm.product.minAmount}}),_c('van-cell',{attrs:{\"title\":\"产品期限\",\"value\":_vm.product.term}}),_c('van-cell',{attrs:{\"title\":\"风险等级\",\"value\":_vm.product.riskLevel}}),_c('van-cell',{attrs:{\"title\":\"投资方向\",\"value\":_vm.product.investmentDirection}})],1),_c('van-cell-group',{attrs:{\"title\":\"产品特色\"}},_vm._l((_vm.product.features),function(feature,index){return _c('van-cell',{key:index,attrs:{\"title\":feature}})}),1),_c('div',{staticClass:\"actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\"},on:{\"click\":_vm.goToPurchase}},[_vm._v(\" 立即购买 \")]),_c('van-button',{staticStyle:{\"margin-top\":\"12px\"},attrs:{\"size\":\"large\",\"block\":\"\"},on:{\"click\":_vm.goToRedeem}},[_vm._v(\" 产品赎回 \")])],1)],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"product-detail\">\r\n    <van-nav-bar \r\n      title=\"产品详情\" \r\n      left-arrow \r\n      @click-left=\"$router.back()\"\r\n    />\r\n    \r\n    <div class=\"content\" v-if=\"product\">\r\n      <van-card\r\n        :title=\"product.name\"\r\n        :desc=\"product.description\"\r\n        :price=\"product.expectedReturn\"\r\n        :thumb=\"product.image\"\r\n      >\r\n        <template #tags>\r\n          <van-tag \r\n            :type=\"product.riskLevel === '低风险' ? 'success' : product.riskLevel === '中风险' ? 'warning' : 'danger'\"\r\n          >\r\n            {{ product.riskLevel }}\r\n          </van-tag>\r\n        </template>\r\n      </van-card>\r\n\r\n      <van-cell-group title=\"产品信息\">\r\n        <van-cell title=\"预期收益率\" :value=\"product.expectedReturn\" />\r\n        <van-cell title=\"起购金额\" :value=\"product.minAmount\" />\r\n        <van-cell title=\"产品期限\" :value=\"product.term\" />\r\n        <van-cell title=\"风险等级\" :value=\"product.riskLevel\" />\r\n        <van-cell title=\"投资方向\" :value=\"product.investmentDirection\" />\r\n      </van-cell-group>\r\n\r\n      <van-cell-group title=\"产品特色\">\r\n        <van-cell \r\n          v-for=\"(feature, index) in product.features\"\r\n          :key=\"index\"\r\n          :title=\"feature\"\r\n        />\r\n      </van-cell-group>\r\n\r\n      <div class=\"actions\">\r\n        <van-button \r\n          type=\"primary\" \r\n          size=\"large\" \r\n          block\r\n          @click=\"goToPurchase\"\r\n        >\r\n          立即购买\r\n        </van-button>\r\n        <van-button \r\n          size=\"large\" \r\n          block\r\n          style=\"margin-top: 12px;\"\r\n          @click=\"goToRedeem\"\r\n        >\r\n          产品赎回\r\n        </van-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ProductDetail',\r\n  data() {\r\n    return {\r\n      product: null,\r\n      products: {\r\n        1: {\r\n          id: 1,\r\n          name: '稳健增长理财产品',\r\n          description: '低风险，稳定收益，适合保守型投资者',\r\n          expectedReturn: '4.2%',\r\n          minAmount: '1000元',\r\n          term: '90天',\r\n          riskLevel: '低风险',\r\n          investmentDirection: '货币市场工具、债券',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg',\r\n          features: [\r\n            '本金安全保障',\r\n            '收益稳定可预期',\r\n            '流动性较好',\r\n            '适合保守投资者'\r\n          ]\r\n        },\r\n        2: {\r\n          id: 2,\r\n          name: '平衡配置理财产品',\r\n          description: '中等风险，均衡收益，适合稳健型投资者',\r\n          expectedReturn: '6.8%',\r\n          minAmount: '5000元',\r\n          term: '180天',\r\n          riskLevel: '中风险',\r\n          investmentDirection: '债券、股票、基金',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg',\r\n          features: [\r\n            '风险收益平衡',\r\n            '投资组合多样化',\r\n            '专业团队管理',\r\n            '适合稳健投资者'\r\n          ]\r\n        },\r\n        3: {\r\n          id: 3,\r\n          name: '成长机会理财产品',\r\n          description: '高风险高收益，适合积极型投资者',\r\n          expectedReturn: '9.5%',\r\n          minAmount: '10000元',\r\n          term: '365天',\r\n          riskLevel: '高风险',\r\n          investmentDirection: '股票、期货、股权投资',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg',\r\n          features: [\r\n            '高收益潜力',\r\n            '成长性投资机会',\r\n            '风险控制机制',\r\n            '适合积极投资者'\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.loadProduct()\r\n  },\r\n  methods: {\r\n    loadProduct() {\r\n      const id = parseInt(this.$route.params.id)\r\n      this.product = this.products[id]\r\n    },\r\n    goToPurchase() {\r\n      this.$router.push(`/purchase/${this.product.id}`)\r\n    },\r\n    goToRedeem() {\r\n      this.$router.push(`/redeem/${this.product.id}`)\r\n    }\r\n  },\r\n  watch: {\r\n    '$route'() {\r\n      this.loadProduct()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.product-detail {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 16px;\r\n}\r\n\r\n.actions {\r\n  margin-top: 20px;\r\n  padding: 0 16px 20px;\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductDetail.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductDetail.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ProductDetail.vue?vue&type=template&id=abe6d008&scoped=true\"\nimport script from \"./ProductDetail.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetail.vue?vue&type=script&lang=js\"\nimport style0 from \"./ProductDetail.vue?vue&type=style&index=0&id=abe6d008&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"abe6d008\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('RecordWrapper',{attrs:{\"auto-start\":false,\"show-controls\":false,\"stop-on-destroy\":true,\"metadata\":{ action: 'purchase', productId: _vm.productId }},on:{\"record-started\":_vm.onRecordStarted,\"record-stopped\":_vm.onRecordStopped}},[_c('div',{staticClass:\"purchase\"},[_c('van-nav-bar',{attrs:{\"title\":\"产品购买\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),(_vm.product)?_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"product-info-card\"},[_c('div',{staticClass:\"product-header\"},[_c('h3',{staticClass:\"product-name\"},[_vm._v(_vm._s(_vm.product.name))]),_c('div',{staticClass:\"product-return\"},[_vm._v(_vm._s(_vm.product.expectedReturn))])]),_c('p',{staticClass:\"product-desc\"},[_vm._v(_vm._s(_vm.product.description))])]),_c('div',{staticClass:\"steps-container\"},[_c('van-steps',{attrs:{\"active\":_vm.currentStep,\"direction\":\"horizontal\"}},[_c('van-step',[_vm._v(\"确认产品\")]),_c('van-step',[_vm._v(\"填写信息\")]),_c('van-step',[_vm._v(\"确认购买\")]),_c('van-step',[_vm._v(\"购买完成\")])],1)],1),_c('div',{staticClass:\"step-content\"},[(_vm.currentStep === 0)?_c('div',{staticClass:\"step-card\"},[_c('h4',{staticClass:\"step-title\"},[_vm._v(\"产品确认\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"产品名称\",\"value\":_vm.product.name}}),_c('van-cell',{attrs:{\"title\":\"预期收益率\",\"value\":_vm.product.expectedReturn}}),_c('van-cell',{attrs:{\"title\":\"起购金额\",\"value\":_vm.product.minAmount}}),_c('van-cell',{attrs:{\"title\":\"产品期限\",\"value\":_vm.product.term}})],1),_c('div',{staticClass:\"step-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.nextStep}},[_vm._v(\" 确认产品信息 \")])],1)],1):_vm._e(),(_vm.currentStep === 1)?_c('div',{staticClass:\"step-card\"},[_c('h4',{staticClass:\"step-title\"},[_vm._v(\"填写购买信息\")]),_c('van-form',{ref:\"purchaseForm\",on:{\"submit\":_vm.onFormSubmit}},[_c('van-field',{attrs:{\"name\":\"amount\",\"label\":\"购买金额\",\"placeholder\":\"请输入购买金额\",\"type\":\"number\",\"rules\":[{ required: true, message: '请填写购买金额' }]},model:{value:(_vm.purchaseForm.amount),callback:function ($$v) {_vm.$set(_vm.purchaseForm, \"amount\", $$v)},expression:\"purchaseForm.amount\"}}),_c('van-field',{attrs:{\"name\":\"bankCard\",\"label\":\"银行卡号\",\"placeholder\":\"请输入银行卡号\",\"rules\":[{ required: true, message: '请填写银行卡号' }]},model:{value:(_vm.purchaseForm.bankCard),callback:function ($$v) {_vm.$set(_vm.purchaseForm, \"bankCard\", $$v)},expression:\"purchaseForm.bankCard\"}}),_c('van-field',{attrs:{\"name\":\"password\",\"label\":\"交易密码\",\"placeholder\":\"请输入交易密码\",\"type\":\"password\",\"rules\":[{ required: true, message: '请填写交易密码' }]},model:{value:(_vm.purchaseForm.password),callback:function ($$v) {_vm.$set(_vm.purchaseForm, \"password\", $$v)},expression:\"purchaseForm.password\"}}),_c('div',{staticClass:\"step-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.validateAndNext}},[_vm._v(\" 下一步 \")])],1)],1)],1):_vm._e(),(_vm.currentStep === 2)?_c('div',{staticClass:\"step-card\"},[_c('h4',{staticClass:\"step-title\"},[_vm._v(\"确认购买信息\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"产品名称\",\"value\":_vm.product.name}}),_c('van-cell',{attrs:{\"title\":\"购买金额\",\"value\":`¥${_vm.purchaseForm.amount}`}}),_c('van-cell',{attrs:{\"title\":\"预期收益\",\"value\":_vm.expectedProfit}}),_c('van-cell',{attrs:{\"title\":\"银行卡号\",\"value\":_vm.maskedBankCard}})],1),_c('div',{staticClass:\"risk-notice\"},[_c('van-notice-bar',{attrs:{\"left-icon\":\"warning-o\",\"text\":\"投资有风险，理财产品不保证本金和收益，过往业绩不代表未来表现\"}})],1),_c('div',{staticClass:\"step-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\",\"loading\":_vm.purchasing},on:{\"click\":_vm.confirmPurchase}},[_vm._v(\" 确认购买 \")])],1)],1):_vm._e(),(_vm.currentStep === 3)?_c('div',{staticClass:\"step-card success-card\"},[_c('div',{staticClass:\"success-content\"},[_c('van-icon',{attrs:{\"name\":\"success\",\"size\":\"50\",\"color\":\"#07c160\"}}),_c('h3',[_vm._v(\"购买成功！\")]),_c('p',[_vm._v(\"您已成功购买理财产品\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"订单号\",\"value\":_vm.orderNo}}),_c('van-cell',{attrs:{\"title\":\"购买时间\",\"value\":_vm.purchaseTime}}),_c('van-cell',{attrs:{\"title\":\"购买金额\",\"value\":`¥${_vm.purchaseForm.amount}`}}),_c('van-cell',{attrs:{\"title\":\"预期收益\",\"value\":_vm.expectedProfit}}),(_vm.recordingResult)?_c('van-cell',{attrs:{\"title\":\"录制状态\",\"value\":_vm.recordingResult.success ? '录制完成' : '录制失败'}}):_vm._e(),(_vm.recordingResult && _vm.recordingResult.dataSize)?_c('van-cell',{attrs:{\"title\":\"录制数据大小\",\"value\":_vm.recordingResult.dataSize}}):_vm._e(),(_vm.recordingResult && _vm.recordingResult.compressionRatio)?_c('van-cell',{attrs:{\"title\":\"压缩率\",\"value\":_vm.recordingResult.compressionRatio}}):_vm._e()],1),(_vm.recordingResult && _vm.recordingResult.success && _vm.recordingResult.events)?_c('div',{staticClass:\"replay-section\"},[_c('h4',[_vm._v(\"购买流程回放\")]),_c('div',{staticClass:\"replay-controls\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isReplaying},on:{\"click\":_vm.startReplay}},[_vm._v(\" \"+_vm._s(_vm.isReplaying ? '正在回放...' : '开始回放')+\" \")]),(_vm.isReplaying)?_c('van-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.stopReplay}},[_vm._v(\" 停止回放 \")]):_vm._e()],1),_c('div',{staticClass:\"replay-container\",attrs:{\"id\":\"replay-container\"}})]):_vm._e(),(_vm.recordingResult && _vm.recordingResult.success)?_c('div',{staticClass:\"recording-success-section\"},[_c('h4',[_vm._v(\"录制状态\")]),_c('van-notice-bar',{attrs:{\"type\":\"success\",\"text\":\"录制数据处理并上传成功\"}}),_c('div',{staticClass:\"success-info\",staticStyle:{\"margin-top\":\"12px\"}},[_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"事件数量:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.recordingResult.recordingResult ? _vm.recordingResult.recordingResult.eventCount : (_vm.recordingResult.data ? _vm.recordingResult.data.finalData.totalEvents : 0)))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"原始大小:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.formatFileSize(_vm.recordingResult.stats.originalSize)))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"压缩大小:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.formatFileSize(_vm.recordingResult.stats.compressedSize)))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"压缩率:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.recordingResult.stats.compressionRatio))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"上传状态:\")]),_c('van-tag',{attrs:{\"type\":_vm.recordingResult.uploadResult.success ? 'success' : 'danger'}},[_vm._v(\" \"+_vm._s(_vm.recordingResult.uploadResult.success ? '成功' : '失败')+\" \")])],1),(_vm.recordingResult.uploadResult.success)?_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"上传ID:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.recordingResult.uploadResult.uploadId))])]):_vm._e()]),_c('div',{staticClass:\"upload-details\",staticStyle:{\"margin-top\":\"16px\"}},[_c('h4',{staticStyle:{\"font-size\":\"14px\",\"margin-bottom\":\"8px\"}},[_vm._v(\"上传结果详情:\")]),_c('div',{staticClass:\"upload-result\",staticStyle:{\"background\":\"#f7f8fa\",\"padding\":\"12px\",\"border-radius\":\"4px\",\"font-size\":\"12px\",\"overflow-x\":\"auto\"}},[_c('pre',{staticStyle:{\"margin\":\"0\",\"white-space\":\"pre-wrap\",\"word-break\":\"break-all\"}},[_vm._v(_vm._s(JSON.stringify(_vm.recordingResult.uploadResult, null, 2)))])])])],1):(_vm.recordingResult && !_vm.recordingResult.success)?_c('div',{staticClass:\"recording-error-section\"},[_c('h4',[_vm._v(\"录制状态\")]),_c('van-notice-bar',{attrs:{\"type\":\"danger\",\"text\":_vm.recordingResult.message || _vm.recordingResult.error || '录制失败'}}),_c('div',{staticClass:\"error-suggestion\",staticStyle:{\"margin-top\":\"12px\",\"padding\":\"12px\",\"background\":\"#fff2f0\",\"border-radius\":\"4px\"}},[_c('p',{staticStyle:{\"margin\":\"0\",\"color\":\"#ff4757\",\"font-size\":\"14px\"}},[_c('van-icon',{staticStyle:{\"margin-right\":\"4px\"},attrs:{\"name\":\"info-o\"}}),_vm._v(\" 建议操作流程： \")],1),_c('ol',{staticStyle:{\"margin\":\"8px 0 0 20px\",\"color\":\"#666\",\"font-size\":\"13px\"}},[_c('li',[_vm._v(\"返回产品列表页面\")]),_c('li',[_vm._v(\"点击\\\"开始录制\\\"按钮\")]),_c('li',[_vm._v(\"再次进行购买操作\")])])])],1):_c('div',{staticClass:\"no-recording-section\"},[_c('h4',[_vm._v(\"录制状态\")]),_c('van-notice-bar',{attrs:{\"type\":\"warning\",\"text\":\"没有录制数据，请确保在操作前已开始录制\"}})],1),_c('div',{staticClass:\"step-actions\"},[(_vm.recordingResult && _vm.recordingResult.success)?_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.goHome}},[_vm._v(\" 返回首页 \")]):[_c('van-button',{staticStyle:{\"margin-bottom\":\"12px\"},attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.goToProducts}},[_vm._v(\" 重新开始录制 \")]),_c('van-button',{attrs:{\"type\":\"default\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.goHome}},[_vm._v(\" 返回首页 \")])]],2)],1)]):_vm._e()])]):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <RecordWrapper \r\n    :auto-start=\"false\"\r\n    :show-controls=\"false\"\r\n    :stop-on-destroy=\"true\"\r\n    :metadata=\"{ action: 'purchase', productId: productId }\"\r\n    @record-started=\"onRecordStarted\"\r\n    @record-stopped=\"onRecordStopped\"\r\n  >\r\n    <div class=\"purchase\">\r\n      <van-nav-bar \r\n        title=\"产品购买\" \r\n        left-arrow \r\n        fixed\r\n        @click-left=\"$router.back()\"\r\n      />\r\n      \r\n      <div class=\"content\" v-if=\"product\">\r\n        <!-- 产品信息 -->\r\n        <div class=\"product-info-card\">\r\n          <div class=\"product-header\">\r\n            <h3 class=\"product-name\">{{ product.name }}</h3>\r\n            <div class=\"product-return\">{{ product.expectedReturn }}</div>\r\n          </div>\r\n          <p class=\"product-desc\">{{ product.description }}</p>\r\n        </div>\r\n\r\n        <!-- 购买步骤 -->\r\n        <div class=\"steps-container\">\r\n          <van-steps :active=\"currentStep\" direction=\"horizontal\">\r\n            <van-step>确认产品</van-step>\r\n            <van-step>填写信息</van-step>\r\n            <van-step>确认购买</van-step>\r\n            <van-step>购买完成</van-step>\r\n          </van-steps>\r\n        </div>\r\n\r\n        <!-- 步骤内容 -->\r\n        <div class=\"step-content\">\r\n          <!-- 步骤1：确认产品 -->\r\n          <div v-if=\"currentStep === 0\" class=\"step-card\">\r\n            <h4 class=\"step-title\">产品确认</h4>\r\n            <van-cell-group>\r\n              <van-cell title=\"产品名称\" :value=\"product.name\" />\r\n              <van-cell title=\"预期收益率\" :value=\"product.expectedReturn\" />\r\n              <van-cell title=\"起购金额\" :value=\"product.minAmount\" />\r\n              <van-cell title=\"产品期限\" :value=\"product.term\" />\r\n            </van-cell-group>\r\n            <div class=\"step-actions\">\r\n              <van-button type=\"primary\" size=\"large\" block round @click=\"nextStep\">\r\n                确认产品信息\r\n              </van-button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 步骤2：填写信息 -->\r\n          <div v-if=\"currentStep === 1\" class=\"step-card\">\r\n            <h4 class=\"step-title\">填写购买信息</h4>\r\n            <van-form ref=\"purchaseForm\" @submit=\"onFormSubmit\">\r\n              <van-field\r\n                v-model=\"purchaseForm.amount\"\r\n                name=\"amount\"\r\n                label=\"购买金额\"\r\n                placeholder=\"请输入购买金额\"\r\n                type=\"number\"\r\n                :rules=\"[{ required: true, message: '请填写购买金额' }]\"\r\n              />\r\n              <van-field\r\n                v-model=\"purchaseForm.bankCard\"\r\n                name=\"bankCard\"\r\n                label=\"银行卡号\"\r\n                placeholder=\"请输入银行卡号\"\r\n                :rules=\"[{ required: true, message: '请填写银行卡号' }]\"\r\n              />\r\n              <van-field\r\n                v-model=\"purchaseForm.password\"\r\n                name=\"password\"\r\n                label=\"交易密码\"\r\n                placeholder=\"请输入交易密码\"\r\n                type=\"password\"\r\n                :rules=\"[{ required: true, message: '请填写交易密码' }]\"\r\n              />\r\n              <div class=\"step-actions\">\r\n                <van-button type=\"primary\" size=\"large\" block round @click=\"validateAndNext\">\r\n                  下一步\r\n                </van-button>\r\n              </div>\r\n            </van-form>\r\n          </div>\r\n\r\n          <!-- 步骤3：确认购买 -->\r\n          <div v-if=\"currentStep === 2\" class=\"step-card\">\r\n            <h4 class=\"step-title\">确认购买信息</h4>\r\n            <van-cell-group>\r\n              <van-cell title=\"产品名称\" :value=\"product.name\" />\r\n              <van-cell title=\"购买金额\" :value=\"`¥${purchaseForm.amount}`\" />\r\n              <van-cell title=\"预期收益\" :value=\"expectedProfit\" />\r\n              <van-cell title=\"银行卡号\" :value=\"maskedBankCard\" />\r\n            </van-cell-group>\r\n            \r\n            <div class=\"risk-notice\">\r\n              <van-notice-bar\r\n                left-icon=\"warning-o\"\r\n                text=\"投资有风险，理财产品不保证本金和收益，过往业绩不代表未来表现\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"step-actions\">\r\n              <van-button type=\"primary\" size=\"large\" block round @click=\"confirmPurchase\" :loading=\"purchasing\">\r\n                确认购买\r\n              </van-button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 步骤4：购买完成 -->\r\n          <div v-if=\"currentStep === 3\" class=\"step-card success-card\">\r\n            <div class=\"success-content\">\r\n              <van-icon name=\"success\" size=\"50\" color=\"#07c160\" />\r\n              <h3>购买成功！</h3>\r\n              <p>您已成功购买理财产品</p>\r\n              \r\n              <van-cell-group>\r\n                <van-cell title=\"订单号\" :value=\"orderNo\" />\r\n                <van-cell title=\"购买时间\" :value=\"purchaseTime\" />\r\n                <van-cell title=\"购买金额\" :value=\"`¥${purchaseForm.amount}`\" />\r\n                <van-cell title=\"预期收益\" :value=\"expectedProfit\" />\r\n                <van-cell \r\n                  v-if=\"recordingResult\" \r\n                  title=\"录制状态\" \r\n                  :value=\"recordingResult.success ? '录制完成' : '录制失败'\" \r\n                />\r\n                <van-cell \r\n                  v-if=\"recordingResult && recordingResult.dataSize\" \r\n                  title=\"录制数据大小\" \r\n                  :value=\"recordingResult.dataSize\" \r\n                />\r\n                <van-cell \r\n                  v-if=\"recordingResult && recordingResult.compressionRatio\" \r\n                  title=\"压缩率\" \r\n                  :value=\"recordingResult.compressionRatio\" \r\n                />\r\n              </van-cell-group>\r\n\r\n              <!-- 录制回放区域 -->\r\n              <div v-if=\"recordingResult && recordingResult.success && recordingResult.events\" class=\"replay-section\">\r\n                <h4>购买流程回放</h4>\r\n                <div class=\"replay-controls\">\r\n                  <van-button \r\n                    type=\"primary\" \r\n                    size=\"small\" \r\n                    @click=\"startReplay\"\r\n                    :disabled=\"isReplaying\"\r\n                  >\r\n                    {{ isReplaying ? '正在回放...' : '开始回放' }}\r\n                  </van-button>\r\n                  <van-button \r\n                    v-if=\"isReplaying\" \r\n                    size=\"small\" \r\n                    @click=\"stopReplay\"\r\n                  >\r\n                    停止回放\r\n                  </van-button>\r\n                </div>\r\n                <div \r\n                  id=\"replay-container\" \r\n                  class=\"replay-container\"\r\n                ></div>\r\n              </div>\r\n\r\n              <!-- 录制成功显示区域 -->\r\n              <div v-if=\"recordingResult && recordingResult.success\" class=\"recording-success-section\">\r\n                <h4>录制状态</h4>\r\n                <van-notice-bar \r\n                  type=\"success\" \r\n                  text=\"录制数据处理并上传成功\"\r\n                />\r\n                \r\n                <div class=\"success-info\" style=\"margin-top: 12px;\">\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">事件数量:</span>\r\n                                          <span class=\"value\">{{ recordingResult.recordingResult ? recordingResult.recordingResult.eventCount : (recordingResult.data ? recordingResult.data.finalData.totalEvents : 0) }}</span>\r\n                  </div>\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">原始大小:</span>\r\n                    <span class=\"value\">{{ formatFileSize(recordingResult.stats.originalSize) }}</span>\r\n                  </div>\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">压缩大小:</span>\r\n                    <span class=\"value\">{{ formatFileSize(recordingResult.stats.compressedSize) }}</span>\r\n                  </div>\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">压缩率:</span>\r\n                    <span class=\"value\">{{ recordingResult.stats.compressionRatio }}</span>\r\n                  </div>\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">上传状态:</span>\r\n                    <van-tag :type=\"recordingResult.uploadResult.success ? 'success' : 'danger'\">\r\n                      {{ recordingResult.uploadResult.success ? '成功' : '失败' }}\r\n                    </van-tag>\r\n                  </div>\r\n                  <div v-if=\"recordingResult.uploadResult.success\" class=\"success-item\">\r\n                    <span class=\"label\">上传ID:</span>\r\n                    <span class=\"value\">{{ recordingResult.uploadResult.uploadId }}</span>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- 显示上传结果详情 -->\r\n                <div class=\"upload-details\" style=\"margin-top: 16px;\">\r\n                  <h4 style=\"font-size: 14px; margin-bottom: 8px;\">上传结果详情:</h4>\r\n                  <div class=\"upload-result\" style=\"background: #f7f8fa; padding: 12px; border-radius: 4px; font-size: 12px; overflow-x: auto;\">\r\n                    <pre style=\"margin: 0; white-space: pre-wrap; word-break: break-all;\">{{ JSON.stringify(recordingResult.uploadResult, null, 2) }}</pre>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 录制错误提示区域 -->\r\n              <div v-else-if=\"recordingResult && !recordingResult.success\" class=\"recording-error-section\">\r\n                <h4>录制状态</h4>\r\n                <van-notice-bar \r\n                  type=\"danger\" \r\n                  :text=\"recordingResult.message || recordingResult.error || '录制失败'\"\r\n                />\r\n                <div class=\"error-suggestion\" style=\"margin-top: 12px; padding: 12px; background: #fff2f0; border-radius: 4px;\">\r\n                  <p style=\"margin: 0; color: #ff4757; font-size: 14px;\">\r\n                    <van-icon name=\"info-o\" style=\"margin-right: 4px;\" />\r\n                    建议操作流程：\r\n                  </p>\r\n                  <ol style=\"margin: 8px 0 0 20px; color: #666; font-size: 13px;\">\r\n                    <li>返回产品列表页面</li>\r\n                    <li>点击\"开始录制\"按钮</li>\r\n                    <li>再次进行购买操作</li>\r\n                  </ol>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 没有录制结果的情况 -->\r\n              <div v-else class=\"no-recording-section\">\r\n                <h4>录制状态</h4>\r\n                <van-notice-bar \r\n                  type=\"warning\" \r\n                  text=\"没有录制数据，请确保在操作前已开始录制\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"step-actions\">\r\n                <van-button \r\n                  v-if=\"recordingResult && recordingResult.success\" \r\n                  type=\"primary\" \r\n                  size=\"large\" \r\n                  block \r\n                  round \r\n                  @click=\"goHome\"\r\n                >\r\n                  返回首页\r\n                </van-button>\r\n                <template v-else>\r\n                  <van-button \r\n                    type=\"primary\" \r\n                    size=\"large\" \r\n                    block \r\n                    round \r\n                    @click=\"goToProducts\"\r\n                    style=\"margin-bottom: 12px;\"\r\n                  >\r\n                    重新开始录制\r\n                  </van-button>\r\n                  <van-button \r\n                    type=\"default\" \r\n                    size=\"large\" \r\n                    block \r\n                    round \r\n                    @click=\"goHome\"\r\n                  >\r\n                    返回首页\r\n                  </van-button>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </RecordWrapper>\r\n</template>\r\n\r\n<script>\r\nimport RecordWrapper from '@/components/RecordWrapper.vue'\r\n\r\nexport default {\r\n  name: 'Purchase',\r\n  components: {\r\n    RecordWrapper\r\n  },\r\n  data() {\r\n    return {\r\n      productId: null,\r\n      product: null,\r\n      currentStep: 0,\r\n      purchasing: false,\r\n      purchaseForm: {\r\n        amount: '',\r\n        bankCard: '',\r\n        password: ''\r\n      },\r\n      orderNo: '',\r\n      purchaseTime: '',\r\n      recordingResult: null,\r\n      isReplaying: false,\r\n      replayPlayer: null,\r\n      replayerObserver: null,\r\n      products: {\r\n        1: {\r\n          id: 1,\r\n          name: '稳健增长理财产品',\r\n          description: '低风险，稳定收益，适合保守型投资者',\r\n          expectedReturn: '4.2%',\r\n          minAmount: '1000元',\r\n          term: '90天',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        },\r\n        2: {\r\n          id: 2,\r\n          name: '平衡配置理财产品',\r\n          description: '中等风险，均衡收益，适合稳健型投资者',\r\n          expectedReturn: '6.8%',\r\n          minAmount: '5000元',\r\n          term: '180天',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        },\r\n        3: {\r\n          id: 3,\r\n          name: '成长机会理财产品',\r\n          description: '高风险高收益，适合积极型投资者',\r\n          expectedReturn: '9.5%',\r\n          minAmount: '10000元',\r\n          term: '365天',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    expectedProfit() {\r\n      if (!this.purchaseForm.amount || !this.product) return '¥0'\r\n      const rate = parseFloat(this.product.expectedReturn) / 100\r\n      const profit = this.purchaseForm.amount * rate\r\n      return `¥${profit.toFixed(2)}`\r\n    },\r\n    maskedBankCard() {\r\n      if (!this.purchaseForm.bankCard) return ''\r\n      const card = this.purchaseForm.bankCard\r\n      return card.replace(/(\\d{4})\\d+(\\d{4})/, '$1****$2')\r\n    }\r\n  },\r\n  created() {\r\n    this.loadProduct()\r\n  },\r\n  methods: {\r\n     // 简化的录制完成方法\r\n    async finishRecordingWithWrapper() {\r\n      try {\r\n        console.log('购买页面：调用RecordWrapper完成录制...')\r\n        \r\n        // 查找RecordWrapper组件实例\r\n        let recordWrapper = null\r\n        \r\n        // 通过$parent查找\r\n        if (this.$parent && this.$parent.$options.name === 'RecordWrapper') {\r\n          recordWrapper = this.$parent\r\n        }\r\n        // 通过$root递归查找  \r\n        else {\r\n          const findRecordWrapper = (component) => {\r\n            if (component.$options.name === 'RecordWrapper') {\r\n              return component\r\n            }\r\n            for (let child of component.$children || []) {\r\n              const found = findRecordWrapper(child)\r\n              if (found) return found\r\n            }\r\n            return null\r\n          }\r\n          recordWrapper = findRecordWrapper(this.$root)\r\n        }\r\n        \r\n        if (recordWrapper && typeof recordWrapper.finishRecording === 'function') {\r\n          // 调用RecordWrapper的简单接口，只传入业务数据\r\n          const result = await recordWrapper.finishRecording({\r\n            purchaseInfo: {\r\n              productId: this.productId,\r\n              productName: this.product.name,\r\n              amount: this.purchaseForm.amount,\r\n              bankCard: this.maskedBankCard,\r\n              orderNo: this.orderNo,\r\n              timestamp: Date.now(),\r\n              page: 'Purchase'\r\n            }\r\n          })\r\n          \r\n          console.log('购买页面：录制完成结果:', result)\r\n          this.recordingResult = result\r\n        } else {\r\n          console.warn('未找到RecordWrapper组件或finishRecording方法')\r\n          this.recordingResult = {\r\n            success: false,\r\n            error: '未找到录制组件',\r\n            message: '录制组件不可用'\r\n          }\r\n          this.$toast.fail('录制组件不可用')\r\n        }\r\n      } catch (error) {\r\n        console.error('购买页面：调用录制完成失败:', error)\r\n        this.recordingResult = { \r\n          success: false, \r\n          error: error.message,\r\n          message: '录制完成失败'\r\n        }\r\n        this.$toast.fail('录制完成失败: ' + error.message)\r\n      }\r\n    },\r\n\r\n\r\n    loadProduct() {\r\n      this.productId = parseInt(this.$route.params.id)\r\n      this.product = this.products[this.productId]\r\n    },\r\n    nextStep() {\r\n\r\n      if (this.currentStep < 3) {\r\n        this.currentStep++\r\n      }\r\n    },\r\n    // 表单验证并进入下一步\r\n    validateAndNext() {\r\n      // 手动验证表单\r\n      if (!this.purchaseForm.amount) {\r\n        this.$toast.fail('请填写购买金额')\r\n        return\r\n      }\r\n      if (!this.purchaseForm.bankCard) {\r\n        this.$toast.fail('请填写银行卡号')\r\n        return\r\n      }\r\n      if (!this.purchaseForm.password) {\r\n        this.$toast.fail('请填写交易密码')\r\n        return\r\n      }\r\n      \r\n      // 验证金额是否符合最低购买要求\r\n      const minAmount = parseInt(this.product.minAmount.replace(/[^\\d]/g, ''))\r\n      if (parseInt(this.purchaseForm.amount) < minAmount) {\r\n        this.$toast.fail(`购买金额不能少于${this.product.minAmount}`)\r\n        return\r\n      }\r\n      \r\n      // 验证银行卡号格式（简单验证）\r\n      if (this.purchaseForm.bankCard.length < 16) {\r\n        this.$toast.fail('请输入正确的银行卡号')\r\n        return\r\n      }\r\n      \r\n      // 验证交易密码长度\r\n      if (this.purchaseForm.password.length < 6) {\r\n        this.$toast.fail('交易密码至少6位数')\r\n        return\r\n      }\r\n      \r\n      this.nextStep()\r\n    },\r\n    // 表单提交事件（如果使用native-type=\"submit\"）\r\n    onFormSubmit() {\r\n      this.nextStep()\r\n    },\r\n    async confirmPurchase() {\r\n      // 检查录制状态\r\n      try {\r\n        const GlobalRecorder = (await import('@/utils/global-recorder')).default\r\n        const globalRecorder = GlobalRecorder.getInstance()\r\n        const status = globalRecorder.getRecordingStatus()\r\n        \r\n        if (!status.isRecording) {\r\n          this.$toast.fail('请先在产品列表页开始录制')\r\n          return\r\n        }\r\n      } catch (error) {\r\n        console.error('检查录制状态失败:', error)\r\n        this.$toast.fail('录制状态检查失败')\r\n        return\r\n      }\r\n      \r\n      this.purchasing = true\r\n      \r\n      try {\r\n        // 模拟购买过程\r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        \r\n        this.orderNo = 'PO' + Date.now()\r\n        this.purchaseTime = new Date().toLocaleString()\r\n        \r\n        this.purchasing = false\r\n        this.nextStep()\r\n        \r\n        // 延迟停止录制，让用户能看到完整的购买流程，包括成功页面\r\n        setTimeout(async () => {\r\n          console.log('购买成功页面已显示，开始停止录制...')\r\n          \r\n          // 先检查录制状态\r\n          const GlobalRecorder = (await import('@/utils/global-recorder')).default\r\n          const globalRecorder = GlobalRecorder.getInstance()\r\n          const status = globalRecorder.getRecordingStatus()\r\n          \r\n          console.log('当前录制状态:', status)\r\n          \r\n          if (status.isRecording) {\r\n            // const loadingToast = this.$toast.loading({\r\n            //   message: '正在处理录制数据...',\r\n            //   forbidClick: true,\r\n            //   duration: 0 // 不自动关闭\r\n            // })\r\n            \r\n            try {\r\n              await this.finishRecordingWithWrapper()\r\n            } finally {\r\n            //   loadingToast.clear() // 确保loading被关闭\r\n            }\r\n          } else {\r\n            console.warn('录制已停止，可能在购买过程中被中断')\r\n            this.recordingResult = { \r\n              success: false, \r\n              error: '录制在购买过程中被中断',\r\n              message: '录制状态异常，请重新开始录制流程' \r\n            }\r\n            this.$toast.fail('录制状态异常')\r\n          }\r\n        }, 1500) // 1.5秒后停止录制，确保成功页面完全显示\r\n        \r\n      } catch (error) {\r\n        console.error('购买流程出错:', error)\r\n        this.purchasing = false\r\n        this.$toast.fail('购买失败，请重试')\r\n      }\r\n    },\r\n   \r\n\r\n    // 格式化文件大小（保留此工具方法）\r\n    formatFileSize(bytes) {\r\n      if (bytes === 0) return '0 B'\r\n      const k = 1024\r\n      const sizes = ['B', 'KB', 'MB', 'GB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n    },\r\n\r\n    // 开始回放\r\n    async startReplay() {\r\n      if (!this.recordingResult || !this.recordingResult.events) {\r\n        this.$toast.fail('没有录制数据可回放')\r\n        return\r\n      }\r\n      \r\n      try {\r\n        this.isReplaying = true\r\n        \r\n        // 清空容器并设置基础样式\r\n        const container = document.getElementById('replay-container')\r\n        if (!container) {\r\n          throw new Error('回放容器未找到')\r\n        }\r\n        container.innerHTML = ''\r\n        container.style.width = '100%'\r\n        container.style.height = '600px'\r\n        container.style.position = 'relative'\r\n        container.style.overflow = 'visible'\r\n        container.style.border = '1px solid #eee'\r\n        container.style.borderRadius = '4px'\r\n        container.style.backgroundColor = '#f5f5f5'\r\n        \r\n        console.log('Purchase页面：开始回放，事件数量:', this.recordingResult.events.length)\r\n        console.log('Purchase页面：前几个事件:', this.recordingResult.events.slice(0, 3))\r\n        \r\n        // 验证事件数据格式\r\n        const events = this.recordingResult.events\r\n        if (!Array.isArray(events) || events.length < 2) {\r\n          throw new Error('录制数据格式不正确或事件太少')\r\n        }\r\n        \r\n        // 检查是否有必要的事件类型\r\n        const hasMetaEvent = events.some(e => e.type === 4)\r\n        const hasSnapshot = events.some(e => e.type === 2)\r\n        \r\n        if (!hasMetaEvent || !hasSnapshot) {\r\n          throw new Error('录制数据缺少必要的元信息或快照')\r\n        }\r\n        \r\n        // 使用带UI控制器的rrweb-player\r\n        // 使用全局rrweb-player\r\n        if (typeof window.rrwebPlayer === 'undefined') {\r\n          throw new Error('rrweb-player库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        const rrwebPlayer = window.rrwebPlayer\r\n        \r\n        console.log('Purchase页面：创建rrweb-player')\r\n        \r\n        // 直接在container中创建回放器\r\n        this.replayPlayer = new rrwebPlayer({\r\n          target: container,\r\n          props: {\r\n            events: events,\r\n            width: container.offsetWidth || 375,\r\n            height: 550, // 增加高度，为控制器留出空间\r\n            autoPlay: false,\r\n            showController: true,\r\n            showWarning: false,\r\n            showDebug: false,\r\n            speed: 1,\r\n            speedOption: [0.5, 1, 1.5, 2, 4],\r\n            skipInactive: false,\r\n            mouseTail: false,\r\n            tags: {\r\n              'virtual-styles': {}\r\n            }\r\n          }\r\n        })\r\n        \r\n        console.log('Purchase页面：rrweb-player创建成功')\r\n        \r\n        // iframe权限修复\r\n        setTimeout(() => {\r\n          const iframes = container.querySelectorAll('iframe')\r\n          iframes.forEach(iframe => {\r\n            if (iframe.hasAttribute('sandbox')) {\r\n              iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms allow-popups allow-modals')\r\n            }\r\n            iframe.style.width = '100%'\r\n            iframe.style.height = '100%'\r\n            iframe.style.border = 'none'\r\n          })\r\n          \r\n          console.log('Purchase页面：已完成回放器初始化')\r\n        }, 500)\r\n        \r\n        // 监听回放事件\r\n        if (this.replayPlayer && this.replayPlayer.$on) {\r\n          this.replayPlayer.$on('finish', () => {\r\n            this.isReplaying = false\r\n            console.log('Purchase页面：回放完成')\r\n          })\r\n          \r\n          this.replayPlayer.$on('start', () => {\r\n            console.log('Purchase页面：回放开始')\r\n          })\r\n        }\r\n        \r\n        this.$toast.success('开始回放购买流程')\r\n        \r\n      } catch (error) {\r\n        console.error('Purchase页面：回放失败:', error)\r\n        this.isReplaying = false\r\n        this.$toast.fail('回放失败: ' + error.message)\r\n        \r\n        // 显示错误信息\r\n        const container = document.getElementById('replay-container')\r\n        if (container) {\r\n          container.innerHTML = `\r\n            <div style=\"text-align: center; padding: 50px; color: #f56c6c; background: white;\">\r\n              <h4>回放失败</h4>\r\n              <p style=\"font-size: 12px; margin-top: 10px;\">${error.message}</p>\r\n              <p style=\"font-size: 10px; color: #999; margin-top: 10px;\">\r\n                事件数量: ${this.recordingResult.events ? this.recordingResult.events.length : 0}\r\n              </p>\r\n            </div>\r\n          `\r\n        }\r\n      }\r\n    },\r\n\r\n    // 设置DOM变化监听器，实时捕获回放器元素\r\n    setupReplayerObserver(container, wrapperDiv) {\r\n      console.log('Purchase页面：设置DOM监听器')\r\n      \r\n      // 清理之前的观察器\r\n      if (this.replayerObserver) {\r\n        this.replayerObserver.disconnect()\r\n      }\r\n      \r\n      // 创建MutationObserver监听DOM变化\r\n      this.replayerObserver = new MutationObserver((mutations) => {\r\n        let needsCheck = false\r\n        \r\n        mutations.forEach((mutation) => {\r\n          if (mutation.type === 'childList') {\r\n            mutation.addedNodes.forEach((node) => {\r\n              if (node.nodeType === 1) { // 元素节点\r\n                const className = node.className || ''\r\n                const tagName = node.tagName || ''\r\n                \r\n                // 检查是否是回放器相关元素\r\n                if (className.includes('replayer') || \r\n                    className.includes('rr-') ||\r\n                    tagName === 'IFRAME' ||\r\n                    node.querySelector && (\r\n                      node.querySelector('.replayer-wrapper') ||\r\n                      node.querySelector('.rr-player') ||\r\n                      node.querySelector('[class*=\"rr-\"]')\r\n                    )) {\r\n                  console.log('DOM监听器：发现新的回放器元素', tagName, className)\r\n                  needsCheck = true\r\n                }\r\n              }\r\n            })\r\n          }\r\n        })\r\n        \r\n        if (needsCheck) {\r\n          // 延迟一点执行，让DOM完全构建\r\n          setTimeout(() => {\r\n            this.forceFixReplayerPosition(container, wrapperDiv)\r\n          }, 100)\r\n        }\r\n      })\r\n      \r\n      // 监听document.body的变化\r\n      this.replayerObserver.observe(document.body, {\r\n        childList: true,\r\n        subtree: true\r\n      })\r\n    },\r\n\r\n    // 强制修复回放器位置 - 扫描所有可能的回放器元素\r\n    forceFixReplayerPosition(container, wrapperDiv) {\r\n      console.log('Purchase页面：开始强制修复回放器位置')\r\n      \r\n      // 1. 查找所有可能的回放器元素（无论在哪里）\r\n      const allPossibleReplayers = document.querySelectorAll(`\r\n        .replayer-wrapper,\r\n        .rr-player,\r\n        [class*=\"rr-\"],\r\n        [class*=\"replayer\"],\r\n        iframe[src*=\"blob:\"]\r\n      `)\r\n      \r\n      console.log('找到的回放器相关元素数量:', allPossibleReplayers.length)\r\n      \r\n      let moved = false\r\n      allPossibleReplayers.forEach((element, index) => {\r\n        console.log(`元素 ${index}:`, element.tagName, element.className, '父元素:', element.parentElement?.className)\r\n        \r\n        // 如果元素不在我们的容器内，就移动它\r\n        if (!container.contains(element)) {\r\n          console.log('移动元素到容器内:', element.className || element.tagName)\r\n          try {\r\n            // 移动到我们的wrapper内\r\n            wrapperDiv.appendChild(element)\r\n            this.fixReplayerPosition(element, wrapperDiv)\r\n            moved = true\r\n          } catch (error) {\r\n            console.error('移动元素失败:', error)\r\n          }\r\n        } else if (!wrapperDiv.contains(element) && element !== wrapperDiv) {\r\n          // 如果在container内但不在wrapper内，也移动到wrapper\r\n          console.log('将元素移动到wrapper内:', element.className || element.tagName)\r\n          try {\r\n            wrapperDiv.appendChild(element)\r\n            this.fixReplayerPosition(element, wrapperDiv)\r\n            moved = true\r\n          } catch (error) {\r\n            console.error('移动到wrapper失败:', error)\r\n          }\r\n        }\r\n      })\r\n      \r\n      // 2. 特别检查body下的直接子元素\r\n      const bodyChildren = Array.from(document.body.children)\r\n      bodyChildren.forEach(child => {\r\n        if (child.className && (\r\n          child.className.includes('replayer') || \r\n          child.className.includes('rr-') ||\r\n          child.tagName === 'IFRAME'\r\n        )) {\r\n          console.log('发现body下的回放器元素:', child.className || child.tagName)\r\n          try {\r\n            wrapperDiv.appendChild(child)\r\n            this.fixReplayerPosition(child, wrapperDiv)\r\n            moved = true\r\n          } catch (error) {\r\n            console.error('从body移动元素失败:', error)\r\n          }\r\n        }\r\n      })\r\n      \r\n      if (moved) {\r\n        console.log('Purchase页面：已移动回放器元素到正确位置')\r\n        console.log('最终容器结构:', container.innerHTML.substring(0, 300))\r\n      } else {\r\n        console.log('Purchase页面：未发现需要移动的回放器元素')\r\n      }\r\n    },\r\n\r\n    // 修复回放器位置和样式\r\n    fixReplayerPosition(element, container) {\r\n      if (!element || !container) return\r\n      \r\n      console.log('修复回放器元素:', element.tagName, element.className)\r\n      \r\n      // 设置元素基础样式，但保持内容可见性\r\n      element.style.position = 'relative'\r\n      element.style.width = '100%'\r\n      element.style.height = '400px'\r\n      element.style.border = 'none'\r\n      element.style.background = '#fff'\r\n      element.style.left = '0'\r\n      element.style.top = '0'\r\n      element.style.transform = 'none'\r\n      element.style.margin = '0'\r\n      element.style.padding = '0'\r\n      element.style.display = 'block'  // 确保可见\r\n      element.style.visibility = 'visible'  // 确保可见\r\n      element.style.opacity = '1'  // 确保不透明\r\n      \r\n      // 处理iframe子元素 - 更保守的样式设置\r\n      const iframe = element.querySelector('iframe')\r\n      if (iframe) {\r\n        console.log('修复iframe:', iframe.src ? iframe.src.substring(0, 50) : 'no src')\r\n        iframe.style.width = '100%'\r\n        iframe.style.height = '100%'\r\n        iframe.style.border = 'none'\r\n        iframe.style.display = 'block'\r\n        iframe.style.visibility = 'visible'\r\n        iframe.style.opacity = '1'\r\n        \r\n        // 修复sandbox权限问题\r\n        if (iframe.hasAttribute('sandbox')) {\r\n          console.log('修复iframe sandbox权限')\r\n          iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms allow-popups allow-modals')\r\n        }\r\n        \r\n        // 不强制设置position，让iframe保持原有定位方式\r\n      }\r\n      \r\n      // 查找所有可能的视频/canvas元素\r\n      const videos = element.querySelectorAll('video, canvas')\r\n      videos.forEach(video => {\r\n        console.log('修复视频/canvas元素:', video.tagName)\r\n        video.style.display = 'block'\r\n        video.style.visibility = 'visible'\r\n        video.style.opacity = '1'\r\n        video.style.width = '100%'\r\n        video.style.height = 'auto'\r\n      })\r\n      \r\n      // 处理rrweb控制器\r\n      const controller = element.querySelector('.rr-controller')\r\n      if (controller) {\r\n        controller.style.position = 'absolute'\r\n        controller.style.bottom = '0'\r\n        controller.style.left = '0'\r\n        controller.style.right = '0'\r\n        controller.style.height = 'auto'\r\n        controller.style.zIndex = '10'\r\n        controller.style.display = 'block'\r\n        controller.style.visibility = 'visible'\r\n      }\r\n      \r\n      console.log('已修复回放器位置和可见性:', element.className)\r\n    },\r\n\r\n    // 调试回放器DOM结构\r\n    debugReplayerStructure(container) {\r\n      console.log('=== 回放器DOM结构调试 ===')\r\n      console.log('容器:', container.id, container.className)\r\n      console.log('容器内容:', container.innerHTML.length, '字符')\r\n      \r\n      // 检查所有子元素\r\n      const children = Array.from(container.children)\r\n      children.forEach((child, index) => {\r\n        console.log(`子元素 ${index}:`, child.tagName, child.className, {\r\n          display: child.style.display || getComputedStyle(child).display,\r\n          visibility: child.style.visibility || getComputedStyle(child).visibility,\r\n          opacity: child.style.opacity || getComputedStyle(child).opacity,\r\n          width: child.offsetWidth,\r\n          height: child.offsetHeight\r\n        })\r\n        \r\n        // 检查iframe\r\n        const iframe = child.querySelector('iframe')\r\n        if (iframe) {\r\n          console.log('  -> iframe:', {\r\n            src: iframe.src ? iframe.src.substring(0, 50) + '...' : 'no src',\r\n            display: iframe.style.display || getComputedStyle(iframe).display,\r\n            visibility: iframe.style.visibility || getComputedStyle(iframe).visibility,\r\n            width: iframe.offsetWidth,\r\n            height: iframe.offsetHeight,\r\n            loaded: iframe.contentDocument ? 'yes' : 'no'\r\n          })\r\n        }\r\n        \r\n        // 检查视频/canvas\r\n        const media = child.querySelectorAll('video, canvas')\r\n        media.forEach((m, i) => {\r\n          console.log(`  -> ${m.tagName} ${i}:`, {\r\n            display: m.style.display || getComputedStyle(m).display,\r\n            width: m.offsetWidth,\r\n            height: m.offsetHeight\r\n          })\r\n        })\r\n      })\r\n      \r\n      console.log('=== 调试结束 ===')\r\n    },\r\n\r\n    // 停止回放\r\n    stopReplay() {\r\n      if (this.replayPlayer) {\r\n        try {\r\n          // rrweb-player使用$destroy方法\r\n          if (this.replayPlayer.$destroy) {\r\n            this.replayPlayer.$destroy()\r\n          }\r\n          this.replayPlayer = null\r\n        } catch (error) {\r\n          console.error('停止回放失败:', error)\r\n        }\r\n      }\r\n      this.isReplaying = false\r\n      \r\n      // 清理容器\r\n      const container = document.getElementById('replay-container')\r\n      if (container) {\r\n        container.innerHTML = '<div style=\"text-align: center; padding: 50px; color: #999;\">回放已停止</div>'\r\n      }\r\n    },\r\n\r\n    goToProducts() {\r\n      // 停止回放\r\n      this.stopReplay()\r\n      this.$router.push('/products')\r\n    },\r\n    goHome() {\r\n      // 停止回放\r\n      this.stopReplay()\r\n      this.$router.push('/')\r\n    },\r\n    onRecordStarted() {\r\n      console.log('购买流程录制开始')\r\n      this.$toast.success('开始录制购买流程')\r\n    },\r\n    onRecordStopped(result) {\r\n      console.log('购买流程录制完成:', result)\r\n      this.$toast.success('购买流程录制完成')\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    // 组件销毁前停止回放\r\n    this.stopReplay()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.purchase {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.product-info-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.product-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.product-name {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0;\r\n}\r\n\r\n.product-return {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #ee0a24;\r\n}\r\n\r\n.product-desc {\r\n  font-size: 12px;\r\n  color: #969799;\r\n  margin: 0;\r\n  line-height: 1.4;\r\n}\r\n\r\n.steps-container {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-content {\r\n  margin-bottom: 100px;\r\n}\r\n\r\n.step-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0 0 16px 0;\r\n}\r\n\r\n.step-actions {\r\n  margin-top: 24px;\r\n}\r\n\r\n.step-actions .van-button {\r\n  height: 48px;\r\n  font-size: 16px;\r\n}\r\n\r\n.risk-notice {\r\n  margin: 16px 0;\r\n}\r\n\r\n.success-card {\r\n  text-align: center;\r\n}\r\n\r\n.success-content .van-icon {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.success-content h3 {\r\n  margin: 0 0 8px 0;\r\n  color: #323233;\r\n  font-size: 18px;\r\n}\r\n\r\n.success-content p {\r\n  color: #969799;\r\n  margin: 0 0 24px 0;\r\n  font-size: 14px;\r\n}\r\n\r\n.success-content .van-cell-group {\r\n  margin-bottom: 24px;\r\n  text-align: left;\r\n}\r\n\r\n.replay-section {\r\n  margin-top: 20px;\r\n  text-align: left;\r\n}\r\n\r\n.replay-section h4 {\r\n  margin: 0 0 12px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n}\r\n\r\n.replay-controls {\r\n  display: flex;\r\n  gap: 8px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.replay-container {\r\n  border: 1px solid #e1e1e1;\r\n  border-radius: 8px;\r\n  background: #fff;\r\n  min-height: 600px;\r\n  max-height: 600px;\r\n  width: 100%;\r\n  margin-top: 12px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  isolation: isolate;\r\n  contain: layout style;\r\n  z-index: 1;\r\n}\r\n\r\n.replay-container iframe {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  border: none;\r\n  display: block !important;\r\n  visibility: visible !important;\r\n  opacity: 1 !important;\r\n  background: #fff !important;\r\n}\r\n\r\n/* rrweb-player wrapper 样式 */\r\n.replay-container .rrweb-player-wrapper,\r\n.replay-container .rrweb-replayer-wrapper {\r\n  width: 100% !important;\r\n  height: 600px !important;\r\n  background: #fff;\r\n  position: relative !important;\r\n  overflow: visible !important;  /* 改为visible，避免内容被裁切 */\r\n}\r\n\r\n/* rrweb-player 和 replayer-wrapper 样式覆盖 */\r\n.replay-container .rr-player,\r\n.replay-container .replayer-wrapper {\r\n  width: 100% !important;\r\n  height: 600px !important;\r\n  background: #fff;\r\n  display: block !important;\r\n  visibility: visible !important;\r\n  opacity: 1 !important;\r\n}\r\n\r\n.replay-container .rr-player__frame,\r\n.replay-container .replayer-wrapper .rr-player__frame {\r\n  border: none !important;\r\n  box-shadow: none !important;\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n}\r\n\r\n.replay-container .rr-controller {\r\n  background: rgba(0, 0, 0, 0.6) !important;\r\n  border-radius: 4px !important;\r\n}\r\n\r\n/* 修复replayer-wrapper问题 */\r\n.replay-container >>> .replayer-wrapper {\r\n  width: 100% !important;\r\n  height: 600px !important;\r\n  border: none !important;\r\n  background: #fff !important;\r\n  position: relative !important;\r\n  left: 0 !important;\r\n  top: 0 !important;\r\n  transform: none !important;\r\n  margin: 0 !important;\r\n  padding: 0 !important;\r\n}\r\n\r\n.replay-container >>> .replayer-wrapper iframe {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  border: none !important;\r\n  position: relative !important;\r\n  left: 0 !important;\r\n  top: 0 !important;\r\n  transform: none !important;\r\n}\r\n\r\n/* 全局修复可能飘浮的回放器 */\r\nbody .replayer-wrapper,\r\nbody .rr-player {\r\n  position: relative !important;\r\n  left: auto !important;\r\n  top: auto !important;\r\n  transform: none !important;\r\n  z-index: auto !important;\r\n}\r\n\r\n/* 录制成功信息样式 */\r\n.success-info {\r\n  background: #f6ffed;\r\n  border: 1px solid #b7eb8f;\r\n  border-radius: 6px;\r\n  padding: 12px;\r\n}\r\n\r\n.success-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n  font-size: 14px;\r\n}\r\n\r\n.success-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.success-item .label {\r\n  color: #666;\r\n  flex: 0 0 80px;\r\n}\r\n\r\n.success-item .value {\r\n  font-weight: 500;\r\n  color: #333;\r\n  text-align: right;\r\n  flex: 1;\r\n}\r\n\r\n/* rrweb-player控制器样式优化 */\r\n.replay-container >>> .rr-player {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  border-radius: 8px;\r\n  min-height: 600px !important;\r\n}\r\n\r\n/* 确保回放内容区域完整显示 */\r\n.replay-container >>> .rr-player__frame {\r\n  width: 100% !important;\r\n  height: calc(100% - 50px) !important; /* 为控制器预留50px空间 */\r\n  min-height: 550px !important;\r\n  border: none !important;\r\n  box-shadow: none !important;\r\n}\r\n\r\n.replay-container >>> .rr-player iframe {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  min-height: 550px !important;\r\n  border: none !important;\r\n}\r\n\r\n.replay-container >>> .rr-controller {\r\n  background: rgba(0, 0, 0, 0.6) !important;\r\n  border-radius: 0 0 8px 8px;\r\n  padding: 8px 12px;\r\n  color: white;\r\n}\r\n\r\n.replay-container >>> .rr-timeline {\r\n  background: rgba(255, 255, 255, 0.3) !important;\r\n  height: 4px !important;\r\n  border-radius: 2px !important;\r\n  margin: 8px 0 !important;\r\n}\r\n\r\n.replay-container >>> .rr-progress {\r\n  background: #1989fa !important;\r\n  height: 4px !important;\r\n  border-radius: 2px !important;\r\n}\r\n\r\n.replay-container >>> .rr-speed-item {\r\n  color: white !important;\r\n  background: rgba(255, 255, 255, 0.1) !important;\r\n  border: 1px solid rgba(255, 255, 255, 0.2) !important;\r\n  border-radius: 4px !important;\r\n  padding: 2px 6px !important;\r\n  margin: 0 2px !important;\r\n  font-size: 12px !important;\r\n  cursor: pointer !important;\r\n}\r\n\r\n.replay-container >>> .rr-speed-item.active {\r\n  background: #1989fa !important;\r\n  border-color: #1989fa !important;\r\n}\r\n\r\n.replay-container >>> .rr-controls {\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  gap: 8px !important;\r\n}\r\n\r\n.replay-container >>> .rr-controller button {\r\n  background: none !important;\r\n  border: none !important;\r\n  color: white !important;\r\n  padding: 4px 8px !important;\r\n  border-radius: 4px !important;\r\n  cursor: pointer !important;\r\n  font-size: 14px !important;\r\n}\r\n\r\n.replay-container >>> .rr-controller button:hover {\r\n  background: rgba(255, 255, 255, 0.1) !important;\r\n}\r\n\r\n.replay-container >>> .rr-timer {\r\n  color: white !important;\r\n  font-size: 12px !important;\r\n  margin: 0 8px !important;\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Purchase.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Purchase.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Purchase.vue?vue&type=template&id=510dfe0e&scoped=true\"\nimport script from \"./Purchase.vue?vue&type=script&lang=js\"\nexport * from \"./Purchase.vue?vue&type=script&lang=js\"\nimport style0 from \"./Purchase.vue?vue&type=style&index=0&id=510dfe0e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"510dfe0e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('RecordWrapper',{attrs:{\"auto-start\":false,\"show-controls\":false,\"stop-on-destroy\":true,\"metadata\":{ action: 'redeem', productId: _vm.productId }},on:{\"record-started\":_vm.onRecordStarted,\"record-stopped\":_vm.onRecordStopped}},[_c('div',{staticClass:\"redeem\"},[_c('van-nav-bar',{attrs:{\"title\":\"产品赎回\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),(_vm.product)?_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"product-info-card\"},[_c('div',{staticClass:\"product-header\"},[_c('h3',{staticClass:\"product-name\"},[_vm._v(_vm._s(_vm.product.name))]),_c('div',{staticClass:\"product-return\"},[_vm._v(_vm._s(_vm.product.expectedReturn))])]),_c('p',{staticClass:\"product-desc\"},[_vm._v(_vm._s(_vm.product.description))])]),_c('div',{staticClass:\"steps-container\"},[_c('van-steps',{attrs:{\"active\":_vm.currentStep,\"direction\":\"horizontal\"}},[_c('van-step',[_vm._v(\"选择产品\")]),_c('van-step',[_vm._v(\"填写信息\")]),_c('van-step',[_vm._v(\"确认赎回\")]),_c('van-step',[_vm._v(\"赎回完成\")])],1)],1),_c('div',{staticClass:\"step-content\"},[(_vm.currentStep === 0)?_c('div',{staticClass:\"step-card\"},[_c('h4',{staticClass:\"step-title\"},[_vm._v(\"持有产品\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"产品名称\",\"value\":_vm.product.name}}),_c('van-cell',{attrs:{\"title\":\"持有金额\",\"value\":\"¥50,000\"}}),_c('van-cell',{attrs:{\"title\":\"累计收益\",\"value\":\"¥2,100\"}}),_c('van-cell',{attrs:{\"title\":\"持有天数\",\"value\":\"45天\"}})],1),_c('div',{staticClass:\"step-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.nextStep}},[_vm._v(\" 选择此产品赎回 \")])],1)],1):_vm._e(),(_vm.currentStep === 1)?_c('div',{staticClass:\"step-card\"},[_c('h4',{staticClass:\"step-title\"},[_vm._v(\"填写赎回信息\")]),_c('van-form',{ref:\"redeemForm\",on:{\"submit\":_vm.onFormSubmit}},[_c('van-field',{attrs:{\"name\":\"redeemType\",\"label\":\"赎回类型\",\"placeholder\":\"请选择赎回类型\",\"readonly\":\"\",\"rules\":[{ required: true, message: '请选择赎回类型' }]},on:{\"click\":function($event){_vm.showRedeemTypePicker = true}},model:{value:(_vm.redeemForm.redeemType),callback:function ($$v) {_vm.$set(_vm.redeemForm, \"redeemType\", $$v)},expression:\"redeemForm.redeemType\"}}),_c('van-field',{attrs:{\"name\":\"amount\",\"label\":\"赎回金额\",\"placeholder\":\"请输入赎回金额\",\"type\":\"number\",\"rules\":[{ required: true, message: '请填写赎回金额' }]},model:{value:(_vm.redeemForm.amount),callback:function ($$v) {_vm.$set(_vm.redeemForm, \"amount\", $$v)},expression:\"redeemForm.amount\"}}),_c('van-field',{attrs:{\"name\":\"bankCard\",\"label\":\"收款银行卡\",\"placeholder\":\"请输入收款银行卡号\",\"rules\":[{ required: true, message: '请填写银行卡号' }]},model:{value:(_vm.redeemForm.bankCard),callback:function ($$v) {_vm.$set(_vm.redeemForm, \"bankCard\", $$v)},expression:\"redeemForm.bankCard\"}}),_c('van-field',{attrs:{\"name\":\"password\",\"label\":\"交易密码\",\"placeholder\":\"请输入交易密码\",\"type\":\"password\",\"rules\":[{ required: true, message: '请填写交易密码' }]},model:{value:(_vm.redeemForm.password),callback:function ($$v) {_vm.$set(_vm.redeemForm, \"password\", $$v)},expression:\"redeemForm.password\"}}),_c('div',{staticClass:\"step-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.validateAndNext}},[_vm._v(\" 下一步 \")])],1)],1)],1):_vm._e(),(_vm.currentStep === 2)?_c('div',{staticClass:\"step-card\"},[_c('h4',{staticClass:\"step-title\"},[_vm._v(\"确认赎回信息\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"产品名称\",\"value\":_vm.product.name}}),_c('van-cell',{attrs:{\"title\":\"赎回类型\",\"value\":_vm.redeemForm.redeemType}}),_c('van-cell',{attrs:{\"title\":\"赎回金额\",\"value\":`¥${_vm.redeemForm.amount}`}}),_c('van-cell',{attrs:{\"title\":\"预计到账\",\"value\":_vm.expectedArrival}}),_c('van-cell',{attrs:{\"title\":\"收款银行卡\",\"value\":_vm.maskedBankCard}})],1),_c('div',{staticClass:\"notice-section\"},[_c('van-notice-bar',{attrs:{\"left-icon\":\"info-o\",\"text\":\"到账时间：T+1个工作日到账，本产品赎回免手续费\"}})],1),_c('div',{staticClass:\"step-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\",\"loading\":_vm.redeeming},on:{\"click\":_vm.confirmRedeem}},[_vm._v(\" 确认赎回 \")])],1)],1):_vm._e(),(_vm.currentStep === 3)?_c('div',{staticClass:\"step-card success-card\"},[_c('div',{staticClass:\"success-content\"},[_c('van-icon',{attrs:{\"name\":\"success\",\"size\":\"50\",\"color\":\"#07c160\"}}),_c('h3',[_vm._v(\"赎回申请成功！\")]),_c('p',[_vm._v(\"您的赎回申请已提交，资金将在T+1个工作日到账\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"赎回单号\",\"value\":_vm.redeemNo}}),_c('van-cell',{attrs:{\"title\":\"申请时间\",\"value\":_vm.redeemTime}}),_c('van-cell',{attrs:{\"title\":\"赎回金额\",\"value\":`¥${_vm.redeemForm.amount}`}}),_c('van-cell',{attrs:{\"title\":\"预计到账\",\"value\":_vm.expectedArrival}}),(_vm.recordingResult)?_c('van-cell',{attrs:{\"title\":\"录制状态\",\"value\":_vm.recordingResult.success ? '录制完成' : '录制失败'}}):_vm._e(),(_vm.recordingResult && _vm.recordingResult.dataSize)?_c('van-cell',{attrs:{\"title\":\"录制数据大小\",\"value\":_vm.recordingResult.dataSize}}):_vm._e(),(_vm.recordingResult && _vm.recordingResult.compressionRatio)?_c('van-cell',{attrs:{\"title\":\"压缩率\",\"value\":_vm.recordingResult.compressionRatio}}):_vm._e()],1),(_vm.recordingResult && _vm.recordingResult.success && _vm.recordingResult.events)?_c('div',{staticClass:\"replay-section\"},[_c('h4',[_vm._v(\"赎回流程回放\")]),_c('div',{staticClass:\"replay-controls\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isReplaying},on:{\"click\":_vm.startReplay}},[_vm._v(\" \"+_vm._s(_vm.isReplaying ? '正在回放...' : '开始回放')+\" \")]),(_vm.isReplaying)?_c('van-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.stopReplay}},[_vm._v(\" 停止回放 \")]):_vm._e()],1),_c('div',{staticClass:\"replay-container\",staticStyle:{\"border\":\"1px solid #eee\",\"background\":\"#f5f5f5\",\"min-height\":\"300px\",\"margin-top\":\"12px\"},attrs:{\"id\":\"redeem-replay-container\"}})]):_vm._e(),(_vm.recordingResult && _vm.recordingResult.success)?_c('div',{staticClass:\"recording-success-section\"},[_c('h4',[_vm._v(\"录制状态\")]),_c('van-notice-bar',{attrs:{\"type\":\"success\",\"text\":\"录制数据处理并上传成功\"}}),_c('div',{staticClass:\"success-info\",staticStyle:{\"margin-top\":\"12px\"}},[_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"事件数量:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.recordingResult.recordingResult ? _vm.recordingResult.recordingResult.eventCount : (_vm.recordingResult.data ? _vm.recordingResult.data.finalData.totalEvents : 0)))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"原始大小:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.formatFileSize(_vm.recordingResult.stats.originalSize)))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"压缩大小:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.formatFileSize(_vm.recordingResult.stats.compressedSize)))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"压缩率:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.recordingResult.stats.compressionRatio))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"上传状态:\")]),_c('van-tag',{attrs:{\"type\":_vm.recordingResult.uploadResult.success ? 'success' : 'danger'}},[_vm._v(\" \"+_vm._s(_vm.recordingResult.uploadResult.success ? '成功' : '失败')+\" \")])],1),(_vm.recordingResult.uploadResult.success)?_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"上传ID:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.recordingResult.uploadResult.uploadId))])]):_vm._e()]),_c('div',{staticClass:\"upload-details\",staticStyle:{\"margin-top\":\"16px\"}},[_c('h4',{staticStyle:{\"font-size\":\"14px\",\"margin-bottom\":\"8px\"}},[_vm._v(\"上传结果详情:\")]),_c('div',{staticClass:\"upload-result\",staticStyle:{\"background\":\"#f7f8fa\",\"padding\":\"12px\",\"border-radius\":\"4px\",\"font-size\":\"12px\",\"overflow-x\":\"auto\"}},[_c('pre',{staticStyle:{\"margin\":\"0\",\"white-space\":\"pre-wrap\",\"word-break\":\"break-all\"}},[_vm._v(_vm._s(JSON.stringify(_vm.recordingResult.uploadResult, null, 2)))])])])],1):(_vm.recordingResult && !_vm.recordingResult.success)?_c('div',{staticClass:\"recording-error-section\"},[_c('h4',[_vm._v(\"录制状态\")]),_c('van-notice-bar',{attrs:{\"type\":\"danger\",\"text\":_vm.recordingResult.message || _vm.recordingResult.error || '录制失败'}}),_c('div',{staticClass:\"error-suggestion\",staticStyle:{\"margin-top\":\"12px\",\"padding\":\"12px\",\"background\":\"#fff2f0\",\"border-radius\":\"4px\"}},[_c('p',{staticStyle:{\"margin\":\"0\",\"color\":\"#ff4757\",\"font-size\":\"14px\"}},[_c('van-icon',{staticStyle:{\"margin-right\":\"4px\"},attrs:{\"name\":\"info-o\"}}),_vm._v(\" 建议操作流程： \")],1),_c('ol',{staticStyle:{\"margin\":\"8px 0 0 20px\",\"color\":\"#666\",\"font-size\":\"13px\"}},[_c('li',[_vm._v(\"返回产品列表页面\")]),_c('li',[_vm._v(\"点击\\\"开始录制\\\"按钮\")]),_c('li',[_vm._v(\"再次进行赎回操作\")])])])],1):_c('div',{staticClass:\"no-recording-section\"},[_c('h4',[_vm._v(\"录制状态\")]),_c('van-notice-bar',{attrs:{\"type\":\"warning\",\"text\":\"没有录制数据，请确保在操作前已开始录制\"}})],1),_c('div',{staticClass:\"step-actions\"},[(_vm.recordingResult && _vm.recordingResult.success)?_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.goHome}},[_vm._v(\" 返回首页 \")]):[_c('van-button',{staticStyle:{\"margin-bottom\":\"12px\"},attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.goToProducts}},[_vm._v(\" 重新开始录制 \")]),_c('van-button',{attrs:{\"type\":\"default\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.goHome}},[_vm._v(\" 返回首页 \")])]],2)],1)]):_vm._e()])]):_vm._e(),_c('van-action-sheet',{attrs:{\"actions\":_vm.redeemTypeActions,\"cancel-text\":\"取消\",\"title\":\"选择赎回类型\"},on:{\"select\":_vm.onRedeemTypeSelect},model:{value:(_vm.showRedeemTypePicker),callback:function ($$v) {_vm.showRedeemTypePicker=$$v},expression:\"showRedeemTypePicker\"}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <RecordWrapper \r\n    :auto-start=\"false\"\r\n    :show-controls=\"false\"\r\n    :stop-on-destroy=\"true\"\r\n    :metadata=\"{ action: 'redeem', productId: productId }\"\r\n    @record-started=\"onRecordStarted\"\r\n    @record-stopped=\"onRecordStopped\"\r\n  >\r\n    <div class=\"redeem\">\r\n      <van-nav-bar \r\n        title=\"产品赎回\" \r\n        left-arrow \r\n        fixed\r\n        @click-left=\"$router.back()\"\r\n      />\r\n      \r\n      <div class=\"content\" v-if=\"product\">\r\n        <!-- 产品信息 -->\r\n        <div class=\"product-info-card\">\r\n          <div class=\"product-header\">\r\n            <h3 class=\"product-name\">{{ product.name }}</h3>\r\n            <div class=\"product-return\">{{ product.expectedReturn }}</div>\r\n          </div>\r\n          <p class=\"product-desc\">{{ product.description }}</p>\r\n        </div>\r\n\r\n        <!-- 赎回步骤 -->\r\n        <div class=\"steps-container\">\r\n          <van-steps :active=\"currentStep\" direction=\"horizontal\">\r\n            <van-step>选择产品</van-step>\r\n            <van-step>填写信息</van-step>\r\n            <van-step>确认赎回</van-step>\r\n            <van-step>赎回完成</van-step>\r\n          </van-steps>\r\n        </div>\r\n\r\n        <!-- 步骤内容 -->\r\n        <div class=\"step-content\">\r\n          <!-- 步骤1：选择产品 -->\r\n          <div v-if=\"currentStep === 0\" class=\"step-card\">\r\n            <h4 class=\"step-title\">持有产品</h4>\r\n            <van-cell-group>\r\n              <van-cell title=\"产品名称\" :value=\"product.name\" />\r\n              <van-cell title=\"持有金额\" value=\"¥50,000\" />\r\n              <van-cell title=\"累计收益\" value=\"¥2,100\" />\r\n              <van-cell title=\"持有天数\" value=\"45天\" />\r\n            </van-cell-group>\r\n            <div class=\"step-actions\">\r\n              <van-button type=\"primary\" size=\"large\" block round @click=\"nextStep\">\r\n                选择此产品赎回\r\n              </van-button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 步骤2：填写信息 -->\r\n          <div v-if=\"currentStep === 1\" class=\"step-card\">\r\n            <h4 class=\"step-title\">填写赎回信息</h4>\r\n            <van-form ref=\"redeemForm\" @submit=\"onFormSubmit\">\r\n              <van-field\r\n                v-model=\"redeemForm.redeemType\"\r\n                name=\"redeemType\"\r\n                label=\"赎回类型\"\r\n                placeholder=\"请选择赎回类型\"\r\n                readonly\r\n                @click=\"showRedeemTypePicker = true\"\r\n                :rules=\"[{ required: true, message: '请选择赎回类型' }]\"\r\n              />\r\n              <van-field\r\n                v-model=\"redeemForm.amount\"\r\n                name=\"amount\"\r\n                label=\"赎回金额\"\r\n                placeholder=\"请输入赎回金额\"\r\n                type=\"number\"\r\n                :rules=\"[{ required: true, message: '请填写赎回金额' }]\"\r\n              />\r\n              <van-field\r\n                v-model=\"redeemForm.bankCard\"\r\n                name=\"bankCard\"\r\n                label=\"收款银行卡\"\r\n                placeholder=\"请输入收款银行卡号\"\r\n                :rules=\"[{ required: true, message: '请填写银行卡号' }]\"\r\n              />\r\n              <van-field\r\n                v-model=\"redeemForm.password\"\r\n                name=\"password\"\r\n                label=\"交易密码\"\r\n                placeholder=\"请输入交易密码\"\r\n                type=\"password\"\r\n                :rules=\"[{ required: true, message: '请填写交易密码' }]\"\r\n              />\r\n              <div class=\"step-actions\">\r\n                <van-button type=\"primary\" size=\"large\" block round @click=\"validateAndNext\">\r\n                  下一步\r\n                </van-button>\r\n              </div>\r\n            </van-form>\r\n          </div>\r\n\r\n          <!-- 步骤3：确认赎回 -->\r\n          <div v-if=\"currentStep === 2\" class=\"step-card\">\r\n            <h4 class=\"step-title\">确认赎回信息</h4>\r\n            <van-cell-group>\r\n              <van-cell title=\"产品名称\" :value=\"product.name\" />\r\n              <van-cell title=\"赎回类型\" :value=\"redeemForm.redeemType\" />\r\n              <van-cell title=\"赎回金额\" :value=\"`¥${redeemForm.amount}`\" />\r\n              <van-cell title=\"预计到账\" :value=\"expectedArrival\" />\r\n              <van-cell title=\"收款银行卡\" :value=\"maskedBankCard\" />\r\n            </van-cell-group>\r\n            \r\n            <div class=\"notice-section\">\r\n              <van-notice-bar\r\n                left-icon=\"info-o\"\r\n                text=\"到账时间：T+1个工作日到账，本产品赎回免手续费\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"step-actions\">\r\n              <van-button type=\"primary\" size=\"large\" block round @click=\"confirmRedeem\" :loading=\"redeeming\">\r\n                确认赎回\r\n              </van-button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 步骤4：赎回完成 -->\r\n          <div v-if=\"currentStep === 3\" class=\"step-card success-card\">\r\n            <div class=\"success-content\">\r\n              <van-icon name=\"success\" size=\"50\" color=\"#07c160\" />\r\n              <h3>赎回申请成功！</h3>\r\n              <p>您的赎回申请已提交，资金将在T+1个工作日到账</p>\r\n              \r\n              <van-cell-group>\r\n                <van-cell title=\"赎回单号\" :value=\"redeemNo\" />\r\n                <van-cell title=\"申请时间\" :value=\"redeemTime\" />\r\n                <van-cell title=\"赎回金额\" :value=\"`¥${redeemForm.amount}`\" />\r\n                <van-cell title=\"预计到账\" :value=\"expectedArrival\" />\r\n                <van-cell \r\n                  v-if=\"recordingResult\" \r\n                  title=\"录制状态\" \r\n                  :value=\"recordingResult.success ? '录制完成' : '录制失败'\" \r\n                />\r\n                <van-cell \r\n                  v-if=\"recordingResult && recordingResult.dataSize\" \r\n                  title=\"录制数据大小\" \r\n                  :value=\"recordingResult.dataSize\" \r\n                />\r\n                <van-cell \r\n                  v-if=\"recordingResult && recordingResult.compressionRatio\" \r\n                  title=\"压缩率\" \r\n                  :value=\"recordingResult.compressionRatio\" \r\n                />\r\n              </van-cell-group>\r\n\r\n              <!-- 录制回放区域 -->\r\n              <div v-if=\"recordingResult && recordingResult.success && recordingResult.events\" class=\"replay-section\">\r\n                <h4>赎回流程回放</h4>\r\n                <div class=\"replay-controls\">\r\n                  <van-button \r\n                    type=\"primary\" \r\n                    size=\"small\" \r\n                    @click=\"startReplay\"\r\n                    :disabled=\"isReplaying\"\r\n                  >\r\n                    {{ isReplaying ? '正在回放...' : '开始回放' }}\r\n                  </van-button>\r\n                  <van-button \r\n                    v-if=\"isReplaying\" \r\n                    size=\"small\" \r\n                    @click=\"stopReplay\"\r\n                  >\r\n                    停止回放\r\n                  </van-button>\r\n                </div>\r\n                <div \r\n                  id=\"redeem-replay-container\" \r\n                  class=\"replay-container\"\r\n                  style=\"border: 1px solid #eee; background: #f5f5f5; min-height: 300px; margin-top: 12px;\"\r\n                ></div>\r\n              </div>\r\n\r\n              <!-- 录制成功显示区域 -->\r\n              <div v-if=\"recordingResult && recordingResult.success\" class=\"recording-success-section\">\r\n                <h4>录制状态</h4>\r\n                <van-notice-bar \r\n                  type=\"success\" \r\n                  text=\"录制数据处理并上传成功\"\r\n                />\r\n                \r\n                <div class=\"success-info\" style=\"margin-top: 12px;\">\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">事件数量:</span>\r\n                    <span class=\"value\">{{ recordingResult.recordingResult ? recordingResult.recordingResult.eventCount : (recordingResult.data ? recordingResult.data.finalData.totalEvents : 0) }}</span>\r\n                  </div>\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">原始大小:</span>\r\n                    <span class=\"value\">{{ formatFileSize(recordingResult.stats.originalSize) }}</span>\r\n                  </div>\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">压缩大小:</span>\r\n                    <span class=\"value\">{{ formatFileSize(recordingResult.stats.compressedSize) }}</span>\r\n                  </div>\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">压缩率:</span>\r\n                    <span class=\"value\">{{ recordingResult.stats.compressionRatio }}</span>\r\n                  </div>\r\n                  <div class=\"success-item\">\r\n                    <span class=\"label\">上传状态:</span>\r\n                    <van-tag :type=\"recordingResult.uploadResult.success ? 'success' : 'danger'\">\r\n                      {{ recordingResult.uploadResult.success ? '成功' : '失败' }}\r\n                    </van-tag>\r\n                  </div>\r\n                  <div v-if=\"recordingResult.uploadResult.success\" class=\"success-item\">\r\n                    <span class=\"label\">上传ID:</span>\r\n                    <span class=\"value\">{{ recordingResult.uploadResult.uploadId }}</span>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- 显示上传结果详情 -->\r\n                <div class=\"upload-details\" style=\"margin-top: 16px;\">\r\n                  <h4 style=\"font-size: 14px; margin-bottom: 8px;\">上传结果详情:</h4>\r\n                  <div class=\"upload-result\" style=\"background: #f7f8fa; padding: 12px; border-radius: 4px; font-size: 12px; overflow-x: auto;\">\r\n                    <pre style=\"margin: 0; white-space: pre-wrap; word-break: break-all;\">{{ JSON.stringify(recordingResult.uploadResult, null, 2) }}</pre>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 录制错误提示区域 -->\r\n              <div v-else-if=\"recordingResult && !recordingResult.success\" class=\"recording-error-section\">\r\n                <h4>录制状态</h4>\r\n                <van-notice-bar \r\n                  type=\"danger\" \r\n                  :text=\"recordingResult.message || recordingResult.error || '录制失败'\"\r\n                />\r\n                <div class=\"error-suggestion\" style=\"margin-top: 12px; padding: 12px; background: #fff2f0; border-radius: 4px;\">\r\n                  <p style=\"margin: 0; color: #ff4757; font-size: 14px;\">\r\n                    <van-icon name=\"info-o\" style=\"margin-right: 4px;\" />\r\n                    建议操作流程：\r\n                  </p>\r\n                  <ol style=\"margin: 8px 0 0 20px; color: #666; font-size: 13px;\">\r\n                    <li>返回产品列表页面</li>\r\n                    <li>点击\"开始录制\"按钮</li>\r\n                    <li>再次进行赎回操作</li>\r\n                  </ol>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 没有录制结果的情况 -->\r\n              <div v-else class=\"no-recording-section\">\r\n                <h4>录制状态</h4>\r\n                <van-notice-bar \r\n                  type=\"warning\" \r\n                  text=\"没有录制数据，请确保在操作前已开始录制\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"step-actions\">\r\n                <van-button \r\n                  v-if=\"recordingResult && recordingResult.success\" \r\n                  type=\"primary\" \r\n                  size=\"large\" \r\n                  block \r\n                  round \r\n                  @click=\"goHome\"\r\n                >\r\n                  返回首页\r\n                </van-button>\r\n                <template v-else>\r\n                  <van-button \r\n                    type=\"primary\" \r\n                    size=\"large\" \r\n                    block \r\n                    round \r\n                    @click=\"goToProducts\"\r\n                    style=\"margin-bottom: 12px;\"\r\n                  >\r\n                    重新开始录制\r\n                  </van-button>\r\n                  <van-button \r\n                    type=\"default\" \r\n                    size=\"large\" \r\n                    block \r\n                    round \r\n                    @click=\"goHome\"\r\n                  >\r\n                    返回首页\r\n                  </van-button>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 赎回类型选择器 -->\r\n      <van-action-sheet\r\n        v-model=\"showRedeemTypePicker\"\r\n        :actions=\"redeemTypeActions\"\r\n        @select=\"onRedeemTypeSelect\"\r\n        cancel-text=\"取消\"\r\n        title=\"选择赎回类型\"\r\n      />\r\n    </div>\r\n  </RecordWrapper>\r\n</template>\r\n\r\n<script>\r\nimport RecordWrapper from '@/components/RecordWrapper.vue'\r\n\r\nexport default {\r\n  name: 'Redeem',\r\n  components: {\r\n    RecordWrapper\r\n  },\r\n  data() {\r\n    return {\r\n      productId: null,\r\n      product: null,\r\n      currentStep: 0,\r\n      redeeming: false,\r\n      showRedeemTypePicker: false,\r\n      redeemForm: {\r\n        redeemType: '',\r\n        amount: '',\r\n        bankCard: '',\r\n        password: ''\r\n      },\r\n      redeemNo: '',\r\n      redeemTime: '',\r\n      recordingResult: null,\r\n      isReplaying: false,\r\n      replayPlayer: null,\r\n      replayerObserver: null,\r\n      redeemTypeActions: [\r\n        { name: '全部赎回', value: 'full' },\r\n        { name: '部分赎回', value: 'partial' }\r\n      ],\r\n      products: {\r\n        1: {\r\n          id: 1,\r\n          name: '稳健增长理财产品',\r\n          description: '低风险，稳定收益，适合保守型投资者',\r\n          expectedReturn: '4.2%',\r\n          minAmount: '1000元',\r\n          term: '90天',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        },\r\n        2: {\r\n          id: 2,\r\n          name: '平衡配置理财产品',\r\n          description: '中等风险，均衡收益，适合稳健型投资者',\r\n          expectedReturn: '6.8%',\r\n          minAmount: '5000元',\r\n          term: '180天',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        },\r\n        3: {\r\n          id: 3,\r\n          name: '成长机会理财产品',\r\n          description: '高风险高收益，适合积极型投资者',\r\n          expectedReturn: '9.5%',\r\n          minAmount: '10000元',\r\n          term: '365天',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    expectedArrival() {\r\n      if (!this.redeemForm.amount) return '¥0'\r\n      // 模拟计算到账金额（扣除可能的费用）\r\n      return `¥${this.redeemForm.amount}`\r\n    },\r\n    maskedBankCard() {\r\n      if (!this.redeemForm.bankCard) return ''\r\n      const card = this.redeemForm.bankCard\r\n      return card.replace(/(\\d{4})\\d+(\\d{4})/, '$1****$2')\r\n    }\r\n  },\r\n  created() {\r\n    this.loadProduct()\r\n  },\r\n  methods: {\r\n    loadProduct() {\r\n      this.productId = parseInt(this.$route.params.id)\r\n      this.product = this.products[this.productId]\r\n    },\r\n    nextStep() {\r\n      if (this.currentStep < 3) {\r\n        this.currentStep++\r\n      }\r\n    },\r\n    // 表单验证并进入下一步\r\n    validateAndNext() {\r\n      // 手动验证表单\r\n      if (!this.redeemForm.redeemType) {\r\n        this.$toast.fail('请选择赎回类型')\r\n        return\r\n      }\r\n      if (!this.redeemForm.amount) {\r\n        this.$toast.fail('请填写赎回金额')\r\n        return\r\n      }\r\n      if (!this.redeemForm.bankCard) {\r\n        this.$toast.fail('请填写收款银行卡号')\r\n        return\r\n      }\r\n      if (!this.redeemForm.password) {\r\n        this.$toast.fail('请填写交易密码')\r\n        return\r\n      }\r\n      \r\n      // 验证赎回金额\r\n      if (parseInt(this.redeemForm.amount) <= 0) {\r\n        this.$toast.fail('赎回金额必须大于0')\r\n        return\r\n      }\r\n      \r\n      // 验证银行卡号格式（简单验证）\r\n      if (this.redeemForm.bankCard.length < 16) {\r\n        this.$toast.fail('请输入正确的银行卡号')\r\n        return\r\n      }\r\n      \r\n      // 验证交易密码长度\r\n      if (this.redeemForm.password.length < 6) {\r\n        this.$toast.fail('交易密码至少6位数')\r\n        return\r\n      }\r\n      \r\n      this.nextStep()\r\n    },\r\n    // 表单提交事件（如果使用native-type=\"submit\"）\r\n    onFormSubmit() {\r\n      this.nextStep()\r\n    },\r\n    onRedeemTypeSelect(action) {\r\n      this.redeemForm.redeemType = action.name\r\n      this.showRedeemTypePicker = false\r\n    },\r\n    async confirmRedeem() {\r\n      // 检查录制状态\r\n      try {\r\n        const GlobalRecorder = (await import('@/utils/global-recorder')).default\r\n        const globalRecorder = GlobalRecorder.getInstance()\r\n        const status = globalRecorder.getRecordingStatus()\r\n        \r\n        if (!status.isRecording) {\r\n          this.$toast.fail('请先在产品列表页开始录制')\r\n          return\r\n        }\r\n      } catch (error) {\r\n        console.error('检查录制状态失败:', error)\r\n        this.$toast.fail('录制状态检查失败')\r\n        return\r\n      }\r\n      \r\n      this.redeeming = true\r\n      \r\n      try {\r\n        // 模拟赎回过程\r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        \r\n        this.redeemNo = 'RD' + Date.now()\r\n        this.redeemTime = new Date().toLocaleString()\r\n        \r\n        this.redeeming = false\r\n        this.nextStep()\r\n        \r\n        // 延迟停止录制，让用户能看到完整的赎回流程，包括成功页面\r\n        setTimeout(async () => {\r\n          console.log('赎回成功页面已显示，开始停止录制...')\r\n          \r\n          // 先检查录制状态\r\n          const GlobalRecorder = (await import('@/utils/global-recorder')).default\r\n          const globalRecorder = GlobalRecorder.getInstance()\r\n          const status = globalRecorder.getRecordingStatus()\r\n          \r\n          console.log('当前录制状态:', status)\r\n          \r\n          if (status.isRecording) {\r\n            // const loadingToast = this.$toast.loading({\r\n            //   message: '正在处理录制数据...',\r\n            //   forbidClick: true,\r\n            //   duration: 0 // 不自动关闭\r\n            // })\r\n            \r\n            try {\r\n              await this.stopRecordingAndProcess()\r\n            } finally {\r\n            //   loadingToast.clear() // 确保loading被关闭\r\n            }\r\n          } else {\r\n            console.warn('录制已停止，可能在赎回过程中被中断')\r\n            this.recordingResult = { \r\n              success: false, \r\n              error: '录制在赎回过程中被中断',\r\n              message: '录制状态异常，请重新开始录制流程' \r\n            }\r\n            this.$toast.fail('录制状态异常')\r\n          }\r\n        }, 1500) // 1.5秒后停止录制，确保成功页面完全显示\r\n        \r\n      } catch (error) {\r\n        console.error('赎回流程出错:', error)\r\n        this.redeeming = false\r\n        this.$toast.fail('赎回失败，请重试')\r\n      }\r\n    },\r\n    // 停止录制并处理数据\r\n    async stopRecordingAndProcess() {\r\n      try {\r\n        // 获取全局录制器\r\n        const GlobalRecorder = (await import('@/utils/global-recorder')).default\r\n        const globalRecorder = GlobalRecorder.getInstance()\r\n        \r\n        // 使用全局录制器的stopRecordingAndProcess方法\r\n        const result = await globalRecorder.stopRecordingAndProcess({\r\n          redeemInfo: {\r\n            productId: this.productId,\r\n            productName: this.product.name,\r\n            amount: this.redeemForm.amount,\r\n            bankCard: this.maskedBankCard,\r\n            redeemNo: this.redeemNo,\r\n            timestamp: Date.now()\r\n          }\r\n        })\r\n        \r\n        console.log('赎回页面：录制数据处理结果:', result)\r\n        \r\n        if (result.success) {\r\n          // 上传录制数据并获取结果\r\n          const uploadResult = await globalRecorder.uploadRecordingData(result.data)\r\n          \r\n          console.log('赎回页面：上传结果:', uploadResult)\r\n          \r\n          this.recordingResult = {\r\n            success: true,\r\n            events: result.recordingResult.events,\r\n            data: result.data,\r\n            uploadResult: uploadResult,\r\n            stats: {\r\n              originalSize: result.data.sizes.original,\r\n              compressedSize: result.data.sizes.compressed,\r\n              compressionRatio: result.data.compressionRatio,\r\n              eventCount: result.data.finalData.totalEvents\r\n            }\r\n          }\r\n          \r\n          this.$toast.success('录制数据处理并上传成功')\r\n        } else {\r\n          console.warn('赎回页面：录制数据处理失败:', result.error)\r\n          this.recordingResult = { \r\n            success: false, \r\n            error: result.error,\r\n            message: result.error === '录制数据为空' ? \r\n              '请先在产品列表页面开始录制，然后进行赎回操作' : \r\n              '录制过程中出现错误'\r\n          }\r\n          this.$toast.fail('录制数据处理失败: ' + result.error)\r\n        }\r\n      } catch (error) {\r\n        console.error('赎回页面：停止录制并处理数据失败:', error)\r\n        this.recordingResult = { success: false, error: error.message }\r\n        this.$toast.fail('录制处理失败: ' + error.message)\r\n      }\r\n    },\r\n\r\n    // 处理录制数据\r\n    async processRecordingData(rawData) {\r\n      try {\r\n        // 计算原始数据大小\r\n        const originalJson = JSON.stringify(rawData)\r\n        const originalSize = new Blob([originalJson]).size\r\n        \r\n        // 使用pako压缩\r\n        // 使用全局pako\r\n        if (typeof window.pako === 'undefined') {\r\n          throw new Error('pako压缩库未找到，请确保已正确引入')\r\n        }\r\n        const pako = window.pako\r\n        const compressed = pako.gzip(originalJson)\r\n        const compressedSize = compressed.length\r\n        \r\n        // 计算压缩率\r\n        const compressionRatio = ((1 - compressedSize / originalSize) * 100).toFixed(1) + '%'\r\n        \r\n        return {\r\n          success: true,\r\n          events: rawData.events,\r\n          originalSize: this.formatFileSize(originalSize),\r\n          compressedSize: compressedSize,\r\n          dataSize: this.formatFileSize(compressedSize),\r\n          compressionRatio: compressionRatio,\r\n          compressedSizeBytes: compressedSize,\r\n          compressedData: Array.from(compressed), // 转为数组以便JSON序列化\r\n          metadata: {\r\n            ...rawData.metadata,\r\n            redeemNo: this.redeemNo,\r\n            redeemAmount: this.redeemForm.amount,\r\n            redeemType: this.redeemForm.redeemType,\r\n            processTime: new Date().toISOString()\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('处理录制数据失败:', error)\r\n        return { success: false, error: error.message }\r\n      }\r\n    },\r\n\r\n    // 优化录制数据（如果超过2MB）\r\n    async optimizeRecordingData(rawData) {\r\n      try {\r\n        // 数据优化策略\r\n        let optimizedEvents = [...rawData.events]\r\n        \r\n        // 1. 移除冗余的鼠标移动事件\r\n        optimizedEvents = optimizedEvents.filter((event, index) => {\r\n          if (event.type === 3 && event.data?.source === 1) { // 鼠标移动事件\r\n            if (index > 0 && optimizedEvents[index - 1].type === 3) {\r\n              return false // 跳过连续的鼠标移动事件\r\n            }\r\n          }\r\n          return true\r\n        })\r\n        \r\n        // 2. 限制事件数量\r\n        if (optimizedEvents.length > 1000) {\r\n          const step = Math.ceil(optimizedEvents.length / 1000)\r\n          optimizedEvents = optimizedEvents.filter((_, index) => index % step === 0)\r\n        }\r\n        \r\n        // 3. 简化事件数据\r\n        optimizedEvents = optimizedEvents.map(event => {\r\n          const simplifiedEvent = { ...event }\r\n          if (event.data && typeof event.data === 'object') {\r\n            // 移除不必要的字段\r\n            delete simplifiedEvent.data.isCustom\r\n            delete simplifiedEvent.data.plugin\r\n          }\r\n          return simplifiedEvent\r\n        })\r\n        \r\n        const optimizedData = {\r\n          ...rawData,\r\n          events: optimizedEvents,\r\n          metadata: {\r\n            ...rawData.metadata,\r\n            optimized: true,\r\n            originalEventCount: rawData.events.length,\r\n            optimizedEventCount: optimizedEvents.length\r\n          }\r\n        }\r\n        \r\n        return await this.processRecordingData(optimizedData)\r\n      } catch (error) {\r\n        console.error('优化录制数据失败:', error)\r\n        return { success: false, error: error.message }\r\n      }\r\n    },\r\n\r\n    // 上传录制数据\r\n    async uploadRecordingData(processedData) {\r\n      try {\r\n        const uploadData = {\r\n          type: 'redeem_recording',\r\n          redeemNo: this.redeemNo,\r\n          productId: this.productId,\r\n          compressedData: processedData.compressedData,\r\n          metadata: processedData.metadata,\r\n          size: processedData.compressedSizeBytes,\r\n          compressionInfo: {\r\n            originalSize: processedData.originalSize,\r\n            compressedSize: processedData.dataSize,\r\n            compressionRatio: processedData.compressionRatio\r\n          }\r\n        }\r\n        \r\n        // 模拟上传（实际项目中替换为真实API）\r\n        console.log('上传录制数据:', uploadData)\r\n        await new Promise(resolve => setTimeout(resolve, 1000))\r\n        \r\n        this.$toast.success('录制数据上传成功')\r\n      } catch (error) {\r\n        console.error('上传录制数据失败:', error)\r\n        this.$toast.fail('录制数据上传失败')\r\n      }\r\n    },\r\n\r\n    // 格式化文件大小\r\n    formatFileSize(bytes) {\r\n      if (bytes === 0) return '0 B'\r\n      const k = 1024\r\n      const sizes = ['B', 'KB', 'MB', 'GB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n    },\r\n\r\n    // 开始回放\r\n    async startReplay() {\r\n      if (!this.recordingResult || !this.recordingResult.events) {\r\n        this.$toast.fail('没有录制数据可回放')\r\n        return\r\n      }\r\n      \r\n      try {\r\n        this.isReplaying = true\r\n        \r\n        // 清空容器并设置基础样式\r\n        const container = document.getElementById('replay-container')\r\n        if (!container) {\r\n          throw new Error('回放容器未找到')\r\n        }\r\n        container.innerHTML = ''\r\n        container.style.width = '100%'\r\n        container.style.height = '600px'\r\n        container.style.position = 'relative'\r\n        container.style.overflow = 'visible'\r\n        container.style.border = '1px solid #eee'\r\n        container.style.borderRadius = '4px'\r\n        container.style.backgroundColor = '#f5f5f5'\r\n        \r\n        console.log('Redeem页面：开始回放，事件数量:', this.recordingResult.events.length)\r\n        console.log('Redeem页面：前几个事件:', this.recordingResult.events.slice(0, 3))\r\n        \r\n        // 验证事件数据格式\r\n        const events = this.recordingResult.events\r\n        if (!Array.isArray(events) || events.length < 2) {\r\n          throw new Error('录制数据格式不正确或事件太少')\r\n        }\r\n        \r\n        // 检查是否有必要的事件类型\r\n        const hasMetaEvent = events.some(e => e.type === 4)\r\n        const hasSnapshot = events.some(e => e.type === 2)\r\n        \r\n        if (!hasMetaEvent || !hasSnapshot) {\r\n          throw new Error('录制数据缺少必要的元信息或快照')\r\n        }\r\n        \r\n        // 使用带UI控制器的rrweb-player\r\n        // 使用全局rrweb-player\r\n        if (typeof window.rrwebPlayer === 'undefined') {\r\n          throw new Error('rrweb-player库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        const rrwebPlayer = window.rrwebPlayer\r\n        \r\n        console.log('Redeem页面：创建rrweb-player')\r\n        \r\n        // 直接在container中创建回放器\r\n        this.replayPlayer = new rrwebPlayer({\r\n          target: container,\r\n          props: {\r\n            events: events,\r\n            width: container.offsetWidth || 375,\r\n            height: 550, // 增加高度，为控制器留出空间\r\n            autoPlay: false,\r\n            showController: true,\r\n            showWarning: false,\r\n            showDebug: false,\r\n            speed: 1,\r\n            speedOption: [0.5, 1, 1.5, 2, 4],\r\n            skipInactive: false,\r\n            mouseTail: false,\r\n            tags: {\r\n              'virtual-styles': {}\r\n            }\r\n          }\r\n        })\r\n        \r\n        console.log('Redeem页面：rrweb-player创建成功')\r\n        \r\n        // iframe权限修复\r\n        setTimeout(() => {\r\n          const iframes = container.querySelectorAll('iframe')\r\n          iframes.forEach(iframe => {\r\n            if (iframe.hasAttribute('sandbox')) {\r\n              iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms allow-popups allow-modals')\r\n            }\r\n            iframe.style.width = '100%'\r\n            iframe.style.height = '100%'\r\n            iframe.style.border = 'none'\r\n          })\r\n          \r\n          console.log('Redeem页面：已完成回放器初始化')\r\n        }, 500)\r\n        \r\n        // 监听回放事件\r\n        if (this.replayPlayer && this.replayPlayer.$on) {\r\n          this.replayPlayer.$on('finish', () => {\r\n            this.isReplaying = false\r\n            console.log('Redeem页面：回放完成')\r\n          })\r\n          \r\n          this.replayPlayer.$on('start', () => {\r\n            console.log('Redeem页面：回放开始')\r\n          })\r\n        }\r\n        \r\n        this.$toast.success('开始回放赎回流程')\r\n        \r\n      } catch (error) {\r\n        console.error('Redeem页面：回放失败:', error)\r\n        this.isReplaying = false\r\n        this.$toast.fail('回放失败: ' + error.message)\r\n        \r\n        // 显示错误信息\r\n        const container = document.getElementById('replay-container')\r\n        if (container) {\r\n          container.innerHTML = `\r\n            <div style=\"text-align: center; padding: 50px; color: #f56c6c; background: white;\">\r\n              <h4>回放失败</h4>\r\n              <p style=\"font-size: 12px; margin-top: 10px;\">${error.message}</p>\r\n              <p style=\"font-size: 10px; color: #999; margin-top: 10px;\">\r\n                事件数量: ${this.recordingResult.events ? this.recordingResult.events.length : 0}\r\n              </p>\r\n            </div>\r\n          `\r\n        }\r\n      }\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n    // 停止回放\r\n    stopReplay() {\r\n      if (this.replayPlayer) {\r\n        try {\r\n          // rrweb-player使用$destroy方法\r\n          if (this.replayPlayer.$destroy) {\r\n            this.replayPlayer.$destroy()\r\n          }\r\n          this.replayPlayer = null\r\n        } catch (error) {\r\n          console.error('停止回放失败:', error)\r\n        }\r\n      }\r\n      this.isReplaying = false\r\n      \r\n      // 清理容器\r\n      const container = document.getElementById('replay-container')\r\n      if (container) {\r\n        container.innerHTML = '<div style=\"text-align: center; padding: 50px; color: #999;\">回放已停止</div>'\r\n      }\r\n    },\r\n\r\n    // 格式化文件大小（保留此工具方法）\r\n    formatFileSize(bytes) {\r\n      if (bytes === 0) return '0 B'\r\n      const k = 1024\r\n      const sizes = ['B', 'KB', 'MB', 'GB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n    },\r\n    \r\n    goToProducts() {\r\n      // 停止回放\r\n      this.stopReplay()\r\n      this.$router.push('/products')\r\n    },\r\n    goHome() {\r\n      // 停止回放\r\n      this.stopReplay()\r\n      this.$router.push('/')\r\n    },\r\n    onRecordStarted() {\r\n      console.log('赎回流程录制开始')\r\n      this.$toast.success('开始录制赎回流程')\r\n    },\r\n    onRecordStopped(result) {\r\n      console.log('赎回流程录制完成:', result)\r\n      this.$toast.success('赎回流程录制完成')\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    // 组件销毁前停止回放\r\n    this.stopReplay()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.redeem {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.product-info-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.product-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.product-name {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0;\r\n}\r\n\r\n.product-return {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #07c160;\r\n}\r\n\r\n.product-desc {\r\n  font-size: 12px;\r\n  color: #969799;\r\n  margin: 0;\r\n  line-height: 1.4;\r\n}\r\n\r\n.steps-container {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-content {\r\n  margin-bottom: 100px;\r\n}\r\n\r\n.step-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0 0 16px 0;\r\n}\r\n\r\n.step-actions {\r\n  margin-top: 24px;\r\n}\r\n\r\n.step-actions .van-button {\r\n  height: 48px;\r\n  font-size: 16px;\r\n}\r\n\r\n.notice-section {\r\n  margin: 16px 0;\r\n}\r\n\r\n.success-card {\r\n  text-align: center;\r\n}\r\n\r\n.success-content .van-icon {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.success-content h3 {\r\n  margin: 0 0 8px 0;\r\n  color: #323233;\r\n  font-size: 18px;\r\n}\r\n\r\n.success-content p {\r\n  color: #969799;\r\n  margin: 0 0 24px 0;\r\n  font-size: 14px;\r\n}\r\n\r\n.success-content .van-cell-group {\r\n  margin-bottom: 24px;\r\n  text-align: left;\r\n}\r\n\r\n.replay-section {\r\n  margin-top: 20px;\r\n  text-align: left;\r\n}\r\n\r\n.replay-section h4 {\r\n  margin: 0 0 12px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n}\r\n\r\n.replay-controls {\r\n  display: flex;\r\n  gap: 8px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.replay-container {\r\n  border: 1px solid #e1e1e1;\r\n  border-radius: 8px;\r\n  background: #fff;\r\n  min-height: 600px;\r\n  max-height: 600px;\r\n  width: 100%;\r\n  margin-top: 12px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  isolation: isolate;\r\n  contain: layout style;\r\n  z-index: 1;\r\n}\r\n\r\n.replay-container iframe {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  border: none;\r\n  display: block !important;\r\n  visibility: visible !important;\r\n  opacity: 1 !important;\r\n  background: #fff !important;\r\n}\r\n\r\n/* rrweb-player wrapper 样式 */\r\n.replay-container .rrweb-player-wrapper,\r\n.replay-container .rrweb-replayer-wrapper {\r\n  width: 100% !important;\r\n  height: 600px !important;\r\n  background: #fff;\r\n  position: relative !important;\r\n  overflow: visible !important;  /* 改为visible，避免内容被裁切 */\r\n}\r\n\r\n/* rrweb-player 和 replayer-wrapper 样式覆盖 */\r\n.replay-container .rr-player,\r\n.replay-container .replayer-wrapper {\r\n  width: 100% !important;\r\n  height: 600px !important;\r\n  background: #fff;\r\n  display: block !important;\r\n  visibility: visible !important;\r\n  opacity: 1 !important;\r\n}\r\n\r\n.replay-container .rr-player__frame,\r\n.replay-container .replayer-wrapper .rr-player__frame {\r\n  border: none !important;\r\n  box-shadow: none !important;\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n}\r\n\r\n.replay-container .rr-controller {\r\n  background: rgba(0, 0, 0, 0.6) !important;\r\n  border-radius: 4px !important;\r\n}\r\n\r\n/* 修复replayer-wrapper问题 */\r\n.replay-container >>> .replayer-wrapper {\r\n  width: 100% !important;\r\n  height: 600px !important;\r\n  border: none !important;\r\n  background: #fff !important;\r\n  position: relative !important;\r\n  left: 0 !important;\r\n  top: 0 !important;\r\n  transform: none !important;\r\n  margin: 0 !important;\r\n  padding: 0 !important;\r\n}\r\n\r\n.replay-container >>> .replayer-wrapper iframe {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  border: none !important;\r\n  position: relative !important;\r\n  left: 0 !important;\r\n  top: 0 !important;\r\n  transform: none !important;\r\n}\r\n\r\n/* 全局修复可能飘浮的回放器 */\r\nbody .replayer-wrapper,\r\nbody .rr-player {\r\n  position: relative !important;\r\n  left: auto !important;\r\n  top: auto !important;\r\n  transform: none !important;\r\n  z-index: auto !important;\r\n}\r\n\r\n/* 录制成功信息样式 */\r\n.success-info {\r\n  background: #f6ffed;\r\n  border: 1px solid #b7eb8f;\r\n  border-radius: 6px;\r\n  padding: 12px;\r\n}\r\n\r\n.success-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n  font-size: 14px;\r\n}\r\n\r\n.success-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.success-item .label {\r\n  color: #666;\r\n  flex: 0 0 80px;\r\n}\r\n\r\n.success-item .value {\r\n  font-weight: 500;\r\n  color: #333;\r\n  text-align: right;\r\n  flex: 1;\r\n}\r\n\r\n/* rrweb-player控制器样式优化 */\r\n.replay-container >>> .rr-player {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  border-radius: 8px;\r\n  min-height: 600px !important;\r\n}\r\n\r\n/* 确保回放内容区域完整显示 */\r\n.replay-container >>> .rr-player__frame {\r\n  width: 100% !important;\r\n  height: calc(100% - 50px) !important; /* 为控制器预留50px空间 */\r\n  min-height: 550px !important;\r\n  border: none !important;\r\n  box-shadow: none !important;\r\n}\r\n\r\n.replay-container >>> .rr-player iframe {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  min-height: 550px !important;\r\n  border: none !important;\r\n}\r\n\r\n.replay-container >>> .rr-controller {\r\n  background: rgba(0, 0, 0, 0.6) !important;\r\n  border-radius: 0 0 8px 8px;\r\n  padding: 8px 12px;\r\n  color: white;\r\n}\r\n\r\n.replay-container >>> .rr-timeline {\r\n  background: rgba(255, 255, 255, 0.3) !important;\r\n  height: 4px !important;\r\n  border-radius: 2px !important;\r\n  margin: 8px 0 !important;\r\n}\r\n\r\n.replay-container >>> .rr-progress {\r\n  background: #1989fa !important;\r\n  height: 4px !important;\r\n  border-radius: 2px !important;\r\n}\r\n\r\n.replay-container >>> .rr-speed-item {\r\n  color: white !important;\r\n  background: rgba(255, 255, 255, 0.1) !important;\r\n  border: 1px solid rgba(255, 255, 255, 0.2) !important;\r\n  border-radius: 4px !important;\r\n  padding: 2px 6px !important;\r\n  margin: 0 2px !important;\r\n  font-size: 12px !important;\r\n  cursor: pointer !important;\r\n}\r\n\r\n.replay-container >>> .rr-speed-item.active {\r\n  background: #1989fa !important;\r\n  border-color: #1989fa !important;\r\n}\r\n\r\n.replay-container >>> .rr-controls {\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  gap: 8px !important;\r\n}\r\n\r\n.replay-container >>> .rr-controller button {\r\n  background: none !important;\r\n  border: none !important;\r\n  color: white !important;\r\n  padding: 4px 8px !important;\r\n  border-radius: 4px !important;\r\n  cursor: pointer !important;\r\n  font-size: 14px !important;\r\n}\r\n\r\n.replay-container >>> .rr-controller button:hover {\r\n  background: rgba(255, 255, 255, 0.1) !important;\r\n}\r\n\r\n.replay-container >>> .rr-timer {\r\n  color: white !important;\r\n  font-size: 12px !important;\r\n  margin: 0 8px !important;\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Redeem.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Redeem.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Redeem.vue?vue&type=template&id=aa4658bc&scoped=true\"\nimport script from \"./Redeem.vue?vue&type=script&lang=js\"\nexport * from \"./Redeem.vue?vue&type=script&lang=js\"\nimport style0 from \"./Redeem.vue?vue&type=style&index=0&id=aa4658bc&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aa4658bc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"record-player\"},[_c('van-nav-bar',{attrs:{\"title\":\"录制回放\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('div',{staticClass:\"content\"},[_c('van-cell-group',{attrs:{\"title\":\"录制记录\"}},_vm._l((_vm.records),function(record){return _c('van-cell',{key:record.id,attrs:{\"title\":record.title,\"label\":record.description,\"value\":record.duration,\"is-link\":\"\"},on:{\"click\":function($event){return _vm.playRecord(record)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"video-o\"}})]},proxy:true}],null,true)})}),1),(_vm.currentRecord)?_c('div',{staticClass:\"player-container\"},[_c('h3',[_vm._v(_vm._s(_vm.currentRecord.title))]),_c('div',{ref:\"playerContainer\",staticClass:\"player\"}),_c('div',{staticClass:\"player-controls\"},[_c('van-button',{attrs:{\"size\":\"small\",\"icon\":_vm.isPlaying ? 'pause' : 'play'},on:{\"click\":_vm.togglePlay}},[_vm._v(\" \"+_vm._s(_vm.isPlaying ? '暂停' : '播放')+\" \")]),_c('van-button',{attrs:{\"size\":\"small\",\"icon\":\"replay\"},on:{\"click\":_vm.resetPlayer}},[_vm._v(\" 重播 \")]),_c('van-button',{attrs:{\"size\":\"small\",\"icon\":\"cross\"},on:{\"click\":_vm.closePlayer}},[_vm._v(\" 关闭 \")])],1)]):_vm._e(),(_vm.records.length === 0)?_c('div',{staticClass:\"empty-state\"},[_c('van-icon',{attrs:{\"name\":\"video-o\",\"size\":\"50\",\"color\":\"#dcdee0\"}}),_c('p',[_vm._v(\"暂无录制记录\")]),_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.$router.push('/products')}}},[_vm._v(\" 去体验录制功能 \")])],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// import { record } from 'rrweb' // 已移除，使用全局变量\r\n// import pako from 'pako' // 已移除，使用全局变量\r\n\r\n// 导出封装的record函数，供其他模块使用\r\nexport function record(options = {}) {\r\n  if (typeof window.rrweb === 'undefined') {\r\n    throw new Error('rrweb库未找到，请确保已正确引入')\r\n  }\r\n  \r\n  const events = []\r\n  \r\n  // 使用全局rrweb.record函数\r\n  const stopRecording = window.rrweb.record({\r\n    emit(event) {\r\n      events.push(event)\r\n    },\r\n    checkoutEveryNms: 30 * 1000, // 每30秒创建一个检查点\r\n    ...options\r\n  })\r\n  \r\n  return {\r\n    stop: stopRecording,\r\n    addEvents: (targetArray) => {\r\n      // 将events数组的引用添加到目标数组\r\n      targetArray.push(...events)\r\n    },\r\n    getEvents: () => [...events]\r\n  }\r\n}\r\n\r\nclass ScreenRecorder {\r\n  constructor(options = {}) {\r\n    this.events = []\r\n    this.isRecording = false\r\n    this.stopRecording = null\r\n    this.metadata = {}\r\n    this.options = {\r\n      uploadUrl: '/api/record/upload',\r\n      autoUpload: true,\r\n      compressData: true,\r\n      maxFileSize: 10 * 1024 * 1024, // 10MB\r\n      ...options\r\n    }\r\n    console.log('ScreenRecorder初始化完成，配置:', this.options)\r\n  }\r\n\r\n  async startRecording(metadata = {}) {\r\n    if (this.isRecording) {\r\n      console.log('录制已在进行中')\r\n      return true\r\n    }\r\n\r\n    try {\r\n      console.log('开始录制，元数据:', metadata)\r\n      \r\n      this.metadata = metadata\r\n      this.events = []\r\n      \r\n      if (typeof window.rrweb === 'undefined') {\r\n        throw new Error('rrweb库未找到，请确保已正确引入')\r\n      }\r\n\r\n      // 使用全局rrweb.record函数\r\n      this.stopRecording = window.rrweb.record({\r\n        emit: (event) => {\r\n          this.events.push(event)\r\n        },\r\n        checkoutEveryNms: 30 * 1000, // 每30秒创建一个检查点\r\n        recordCanvas: true,\r\n        collectFonts: true,\r\n        inlineStylesheet: true\r\n      })\r\n\r\n      this.isRecording = true\r\n      console.log('录制开始成功')\r\n      return true\r\n    } catch (error) {\r\n      console.error('开始录制失败:', error)\r\n      this.isRecording = false\r\n      return false\r\n    }\r\n  }\r\n\r\n  async stopRecording() {\r\n    if (!this.isRecording) {\r\n      console.log('没有正在进行的录制')\r\n      return null\r\n    }\r\n\r\n    try {\r\n      console.log('停止录制...')\r\n      \r\n      if (this.stopRecording) {\r\n        this.stopRecording()\r\n        this.stopRecording = null\r\n      }\r\n\r\n      this.isRecording = false\r\n      \r\n      const result = {\r\n        events: [...this.events],\r\n        metadata: this.metadata,\r\n        timestamp: Date.now(),\r\n        duration: 0,\r\n        eventsCount: this.events.length\r\n      }\r\n\r\n      console.log('录制停止成功，事件数量:', this.events.length)\r\n      \r\n      // 如果设置了自动上传，则上传数据\r\n      if (this.options.autoUpload && this.events.length > 0) {\r\n        console.log('自动上传录制数据...')\r\n        const uploadResult = await this.uploadRecording(result)\r\n        result.uploadResult = uploadResult\r\n      }\r\n\r\n      // 清空事件数组\r\n      this.events = []\r\n      this.metadata = {}\r\n\r\n      return result\r\n    } catch (error) {\r\n      console.error('停止录制失败:', error)\r\n      this.isRecording = false\r\n      return null\r\n    }\r\n  }\r\n\r\n  async uploadRecording(recordingData) {\r\n    try {\r\n      console.log('准备上传录制数据，事件数量:', recordingData.events.length)\r\n      \r\n      let dataToUpload = recordingData\r\n\r\n      // 如果启用了数据压缩\r\n      if (this.options.compressData) {\r\n        console.log('开始压缩录制数据...')\r\n        dataToUpload = await this.compressRecordingData(recordingData)\r\n        console.log('数据压缩完成')\r\n      }\r\n\r\n      // 检查文件大小\r\n      const dataSize = this.getDataSize(dataToUpload)\r\n      if (dataSize > this.options.maxFileSize) {\r\n        console.warn('录制数据过大:', this.formatFileSize(dataSize))\r\n        // 可以在这里实现数据优化逻辑\r\n      }\r\n\r\n      console.log('上传数据大小:', this.formatFileSize(dataSize))\r\n      \r\n      // 模拟上传请求\r\n      const uploadResult = await this.mockUpload(dataToUpload)\r\n      console.log('上传完成:', uploadResult)\r\n      \r\n      return uploadResult\r\n    } catch (error) {\r\n      console.error('上传录制数据失败:', error)\r\n      return { success: false, error: error.message }\r\n    }\r\n  }\r\n\r\n  async compressRecordingData(data) {\r\n    try {\r\n      if (typeof window.pako === 'undefined') {\r\n        throw new Error('pako压缩库未找到，请确保已正确引入')\r\n      }\r\n      \r\n      const jsonStr = JSON.stringify(data)\r\n      const originalSize = new Blob([jsonStr]).size\r\n      \r\n      console.log('原始数据大小:', this.formatFileSize(originalSize))\r\n      \r\n      // 使用全局pako进行压缩\r\n      const compressed = window.pako.gzip(jsonStr)\r\n      const compressedSize = compressed.length\r\n      \r\n      console.log('压缩后大小:', this.formatFileSize(compressedSize))\r\n      console.log('压缩率:', ((1 - compressedSize / originalSize) * 100).toFixed(2) + '%')\r\n      \r\n      return {\r\n        ...data,\r\n        compressed: true,\r\n        originalSize: originalSize,\r\n        compressedSize: compressedSize,\r\n        compressedData: Array.from(compressed) // 转换为数组便于传输\r\n      }\r\n    } catch (error) {\r\n      console.error('压缩数据失败:', error)\r\n      return data // 压缩失败时返回原始数据\r\n    }\r\n  }\r\n\r\n  async mockUpload(data) {\r\n    // 模拟网络延迟\r\n    await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000))\r\n    \r\n    return {\r\n      success: true,\r\n      uploadId: 'upload_' + Date.now(),\r\n      timestamp: Date.now(),\r\n      message: '录制数据上传成功'\r\n    }\r\n  }\r\n\r\n  getDataSize(data) {\r\n    const jsonStr = JSON.stringify(data)\r\n    return new Blob([jsonStr]).size\r\n  }\r\n\r\n  formatFileSize(bytes) {\r\n    if (bytes === 0) return '0 B'\r\n    const k = 1024\r\n    const sizes = ['B', 'KB', 'MB', 'GB']\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n  }\r\n\r\n  addCustomEvent(event) {\r\n    if (this.isRecording) {\r\n      this.events.push({\r\n        type: 5, // 自定义事件类型\r\n        timestamp: Date.now(),\r\n        data: {\r\n          tag: 'custom',\r\n          payload: event\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  getRecordingStatus() {\r\n    return {\r\n      isRecording: this.isRecording,\r\n      eventsCount: this.events.length,\r\n      metadata: this.metadata\r\n    }\r\n  }\r\n}\r\n\r\nexport default ScreenRecorder ","<template>\r\n  <div class=\"record-player\">\r\n    <van-nav-bar \r\n      title=\"录制回放\" \r\n      left-arrow \r\n      @click-left=\"$router.back()\"\r\n    />\r\n    \r\n    <div class=\"content\">\r\n      <!-- 录制列表 -->\r\n      <van-cell-group title=\"录制记录\">\r\n        <van-cell\r\n          v-for=\"record in records\"\r\n          :key=\"record.id\"\r\n          :title=\"record.title\"\r\n          :label=\"record.description\"\r\n          :value=\"record.duration\"\r\n          is-link\r\n          @click=\"playRecord(record)\"\r\n        >\r\n          <template #icon>\r\n            <van-icon name=\"video-o\" />\r\n          </template>\r\n        </van-cell>\r\n      </van-cell-group>\r\n\r\n      <!-- 播放器容器 -->\r\n      <div v-if=\"currentRecord\" class=\"player-container\">\r\n        <h3>{{ currentRecord.title }}</h3>\r\n        <div ref=\"playerContainer\" class=\"player\"></div>\r\n        \r\n        <div class=\"player-controls\">\r\n          <van-button \r\n            size=\"small\" \r\n            @click=\"togglePlay\"\r\n            :icon=\"isPlaying ? 'pause' : 'play'\"\r\n          >\r\n            {{ isPlaying ? '暂停' : '播放' }}\r\n          </van-button>\r\n          <van-button \r\n            size=\"small\" \r\n            @click=\"resetPlayer\"\r\n            icon=\"replay\"\r\n          >\r\n            重播\r\n          </van-button>\r\n          <van-button \r\n            size=\"small\" \r\n            @click=\"closePlayer\"\r\n            icon=\"cross\"\r\n          >\r\n            关闭\r\n          </van-button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 空状态 -->\r\n      <div v-if=\"records.length === 0\" class=\"empty-state\">\r\n        <van-icon name=\"video-o\" size=\"50\" color=\"#dcdee0\" />\r\n        <p>暂无录制记录</p>\r\n        <van-button type=\"primary\" size=\"small\" @click=\"$router.push('/products')\">\r\n          去体验录制功能\r\n        </van-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import rrwebPlayer from 'rrweb-player' // 已移除，使用全局变量\r\nimport ScreenRecorder from '@/utils/screen-record'\r\n\r\nexport default {\r\n  name: 'RecordPlayer',\r\n  data() {\r\n    return {\r\n      records: [\r\n        {\r\n          id: 1,\r\n          title: '稳健增长理财产品 - 购买流程',\r\n          description: '2024-01-15 14:30:25 | 用户操作录制',\r\n          duration: '2分30秒',\r\n          action: 'purchase',\r\n          productId: 1,\r\n          events: [] // 这里应该是实际的录制数据\r\n        },\r\n        {\r\n          id: 2,\r\n          title: '平衡配置理财产品 - 赎回流程',\r\n          description: '2024-01-15 16:45:12 | 用户操作录制',\r\n          duration: '1分45秒',\r\n          action: 'redeem',\r\n          productId: 2,\r\n          events: [] // 这里应该是实际的录制数据\r\n        }\r\n      ],\r\n      currentRecord: null,\r\n      player: null,\r\n      isPlaying: false\r\n    }\r\n  },\r\n  methods: {\r\n    async playRecord(record) {\r\n      this.currentRecord = record\r\n      \r\n      // 等待DOM更新\r\n      await this.$nextTick()\r\n      \r\n      try {\r\n        // 如果是压缩数据，需要先解压\r\n        let events = record.events\r\n        if (record.compressed) {\r\n          events = ScreenRecorder.decompressData(record)\r\n        }\r\n\r\n        // 如果没有真实数据，使用演示数据\r\n        if (!events || events.length === 0) {\r\n          events = this.generateDemoEvents()\r\n        }\r\n\r\n        // 确保至少有2个事件\r\n        if (events.length < 2) {\r\n          events = this.generateDemoEvents()\r\n        }\r\n\r\n        // 创建播放器\r\n        // 检查全局rrweb-player是否可用\r\n        if (typeof window.rrwebPlayer === 'undefined') {\r\n          throw new Error('rrweb-player库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        this.player = new window.rrwebPlayer({\r\n          target: this.$refs.playerContainer,\r\n          props: {\r\n            events: events,\r\n            width: 375,\r\n            height: 667,\r\n            autoPlay: false,\r\n            showController: true,\r\n            tags: {\r\n              'virtual-styles': {\r\n                'background-color': '#f7f8fa'\r\n              }\r\n            }\r\n          }\r\n        })\r\n\r\n        // 修复可能的iframe sandbox权限问题\r\n        setTimeout(() => {\r\n          const iframes = this.$refs.playerContainer.querySelectorAll('iframe')\r\n          iframes.forEach(iframe => {\r\n            if (iframe.hasAttribute('sandbox')) {\r\n              console.log('修复RecordPlayer iframe sandbox权限')\r\n              iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms allow-popups allow-modals')\r\n            }\r\n          })\r\n        }, 100)\r\n\r\n        this.isPlaying = false\r\n        this.$toast.success('录制加载成功')\r\n      } catch (error) {\r\n        console.error('播放录制失败:', error)\r\n        this.$toast.fail('播放失败: ' + error.message)\r\n      }\r\n    },\r\n\r\n    togglePlay() {\r\n      if (!this.player) return\r\n      \r\n      try {\r\n        if (this.isPlaying) {\r\n          this.player.pause()\r\n        } else {\r\n          this.player.play()\r\n        }\r\n        this.isPlaying = !this.isPlaying\r\n      } catch (error) {\r\n        console.error('播放控制失败:', error)\r\n        this.$toast.fail('播放控制失败')\r\n      }\r\n    },\r\n\r\n    resetPlayer() {\r\n      if (!this.player) return\r\n      \r\n      try {\r\n        this.player.goto(0)\r\n        this.isPlaying = false\r\n      } catch (error) {\r\n        console.error('重置播放器失败:', error)\r\n      }\r\n    },\r\n\r\n    closePlayer() {\r\n      if (this.player) {\r\n        try {\r\n          this.player.destroy()\r\n        } catch (error) {\r\n          console.error('销毁播放器失败:', error)\r\n        }\r\n        this.player = null\r\n      }\r\n      this.currentRecord = null\r\n      this.isPlaying = false\r\n    },\r\n\r\n    // 生成完整的演示用事件数据\r\n    generateDemoEvents() {\r\n      const now = Date.now()\r\n      return [\r\n        // 第一个事件：元信息\r\n        {\r\n          type: 4,\r\n          data: {\r\n            href: window.location.origin,\r\n            width: 375,\r\n            height: 667\r\n          },\r\n          timestamp: now - 5000\r\n        },\r\n        // 第二个事件：DOM快照\r\n        {\r\n          type: 2,\r\n          data: {\r\n            node: {\r\n              type: 0,\r\n              childNodes: [\r\n                {\r\n                  type: 1,\r\n                  name: 'html',\r\n                  publicId: '',\r\n                  systemId: '',\r\n                  id: 2\r\n                },\r\n                {\r\n                  type: 2,\r\n                  tagName: 'html',\r\n                  attributes: {\r\n                    lang: 'zh-CN'\r\n                  },\r\n                  childNodes: [\r\n                    {\r\n                      type: 2,\r\n                      tagName: 'head',\r\n                      attributes: {},\r\n                      childNodes: [\r\n                        {\r\n                          type: 2,\r\n                          tagName: 'title',\r\n                          attributes: {},\r\n                          childNodes: [\r\n                            {\r\n                              type: 3,\r\n                              textContent: '理财产品录制演示',\r\n                              id: 5\r\n                            }\r\n                          ],\r\n                          id: 4\r\n                        }\r\n                      ],\r\n                      id: 3\r\n                    },\r\n                    {\r\n                      type: 2,\r\n                      tagName: 'body',\r\n                      attributes: {\r\n                        style: 'margin: 0; padding: 20px; font-family: Arial, sans-serif; background-color: #f7f8fa;'\r\n                      },\r\n                      childNodes: [\r\n                        {\r\n                          type: 2,\r\n                          tagName: 'div',\r\n                          attributes: {\r\n                            style: 'text-align: center; padding: 40px 20px; background: white; border-radius: 8px; margin: 20px 0;'\r\n                          },\r\n                          childNodes: [\r\n                            {\r\n                              type: 2,\r\n                              tagName: 'h2',\r\n                              attributes: {\r\n                                style: 'color: #323233; margin-bottom: 20px;'\r\n                              },\r\n                              childNodes: [\r\n                                {\r\n                                  type: 3,\r\n                                  textContent: '理财产品录制演示',\r\n                                  id: 8\r\n                                }\r\n                              ],\r\n                              id: 7\r\n                            },\r\n                            {\r\n                              type: 2,\r\n                              tagName: 'p',\r\n                              attributes: {\r\n                                style: 'color: #969799; margin-bottom: 30px;'\r\n                              },\r\n                              childNodes: [\r\n                                {\r\n                                  type: 3,\r\n                                  textContent: '这是一个演示录制回放的示例',\r\n                                  id: 10\r\n                                }\r\n                              ],\r\n                              id: 9\r\n                            },\r\n                            {\r\n                              type: 2,\r\n                              tagName: 'button',\r\n                              attributes: {\r\n                                id: 'demo-btn',\r\n                                style: 'background: #1989fa; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer;'\r\n                              },\r\n                              childNodes: [\r\n                                {\r\n                                  type: 3,\r\n                                  textContent: '点击按钮',\r\n                                  id: 12\r\n                                }\r\n                              ],\r\n                              id: 11\r\n                            }\r\n                          ],\r\n                          id: 6\r\n                        }\r\n                      ],\r\n                      id: 13\r\n                    }\r\n                  ],\r\n                  id: 14\r\n                }\r\n              ],\r\n              id: 1\r\n            }\r\n          },\r\n          timestamp: now - 4000\r\n        },\r\n        // 第三个事件：鼠标移动\r\n        {\r\n          type: 3,\r\n          data: {\r\n            source: 2,\r\n            type: 1,\r\n            x: 187,\r\n            y: 400\r\n          },\r\n          timestamp: now - 3000\r\n        },\r\n        // 第四个事件：点击事件\r\n        {\r\n          type: 3,\r\n          data: {\r\n            source: 2,\r\n            type: 2,\r\n            x: 187,\r\n            y: 400,\r\n            id: 11\r\n          },\r\n          timestamp: now - 2000\r\n        },\r\n        // 第五个事件：DOM变化\r\n        {\r\n          type: 3,\r\n          data: {\r\n            source: 0,\r\n            texts: [\r\n              {\r\n                id: 12,\r\n                value: '已点击！'\r\n              }\r\n            ]\r\n          },\r\n          timestamp: now - 1000\r\n        }\r\n      ]\r\n    }\r\n  },\r\n\r\n  beforeDestroy() {\r\n    this.closePlayer()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.record-player {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 16px;\r\n}\r\n\r\n.player-container {\r\n  margin-top: 20px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n}\r\n\r\n.player-container h3 {\r\n  margin-bottom: 15px;\r\n  color: #323233;\r\n  font-size: 16px;\r\n}\r\n\r\n.player {\r\n  border: 1px solid #ebedf0;\r\n  border-radius: 4px;\r\n  margin-bottom: 15px;\r\n  min-height: 300px;\r\n  overflow: hidden;\r\n}\r\n\r\n.player-controls {\r\n  display: flex;\r\n  gap: 10px;\r\n  justify-content: center;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.empty-state p {\r\n  margin: 20px 0;\r\n  color: #969799;\r\n}\r\n</style> ","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RecordPlayer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RecordPlayer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RecordPlayer.vue?vue&type=template&id=49073c18&scoped=true\"\nimport script from \"./RecordPlayer.vue?vue&type=script&lang=js\"\nexport * from \"./RecordPlayer.vue?vue&type=script&lang=js\"\nimport style0 from \"./RecordPlayer.vue?vue&type=style&index=0&id=49073c18&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49073c18\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('RecordWrapper',{ref:\"recordWrapper\",attrs:{\"auto-start\":true,\"show-controls\":false,\"stop-on-destroy\":false,\"require-consent\":true,\"metadata\":{ action: 'purchase-step-1', productId: _vm.productId, flow: 'purchase-start' }},on:{\"record-timeout\":_vm.handleRecordTimeout,\"timeout-confirmed\":_vm.handleTimeoutConfirmed,\"record-started\":_vm.onRecordStarted,\"record-declined\":_vm.onRecordDeclined}},[_c('div',{staticClass:\"purchase-step\"},[_c('van-nav-bar',{attrs:{\"title\":\"确认产品\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),(_vm.product)?_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"product-info-card\"},[_c('div',{staticClass:\"product-header\"},[_c('h3',{staticClass:\"product-name\"},[_vm._v(_vm._s(_vm.product.name))]),_c('div',{staticClass:\"product-return\"},[_vm._v(_vm._s(_vm.product.expectedReturn))])]),_c('p',{staticClass:\"product-desc\"},[_vm._v(_vm._s(_vm.product.description))])]),_c('div',{staticClass:\"steps-container\"},[_c('van-steps',{attrs:{\"active\":0,\"direction\":\"horizontal\"}},[_c('van-step',[_vm._v(\"确认产品\")]),_c('van-step',[_vm._v(\"填写信息\")]),_c('van-step',[_vm._v(\"确认购买\")]),_c('van-step',[_vm._v(\"购买完成\")])],1)],1),_c('div',{staticClass:\"step-content\"},[_c('div',{staticClass:\"step-card\"},[_c('h4',{staticClass:\"step-title\"},[_vm._v(\"产品确认\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"产品名称\",\"value\":_vm.product.name}}),_c('van-cell',{attrs:{\"title\":\"预期收益率\",\"value\":_vm.product.expectedReturn}}),_c('van-cell',{attrs:{\"title\":\"起购金额\",\"value\":_vm.product.minAmount}}),_c('van-cell',{attrs:{\"title\":\"产品期限\",\"value\":_vm.product.term}})],1),_c('div',{staticClass:\"step-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.nextStep}},[_vm._v(\" 确认产品信息 \")])],1)],1)])]):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <RecordWrapper \r\n    :auto-start=\"true\"\r\n    :show-controls=\"false\"\r\n    :stop-on-destroy=\"false\"\r\n    :require-consent=\"true\"\r\n    :metadata=\"{ action: 'purchase-step-1', productId: productId, flow: 'purchase-start' }\"\r\n    @record-timeout=\"handleRecordTimeout\"\r\n    @timeout-confirmed=\"handleTimeoutConfirmed\"\r\n    @record-started=\"onRecordStarted\"\r\n    @record-declined=\"onRecordDeclined\"\r\n    ref=\"recordWrapper\"\r\n  >\r\n    <div class=\"purchase-step\">\r\n      <van-nav-bar \r\n        title=\"确认产品\" \r\n        left-arrow \r\n        fixed\r\n        @click-left=\"$router.back()\"\r\n      />\r\n      \r\n      <div class=\"content\" v-if=\"product\">\r\n        <!-- 产品信息 -->\r\n        <div class=\"product-info-card\">\r\n          <div class=\"product-header\">\r\n            <h3 class=\"product-name\">{{ product.name }}</h3>\r\n            <div class=\"product-return\">{{ product.expectedReturn }}</div>\r\n          </div>\r\n          <p class=\"product-desc\">{{ product.description }}</p>\r\n        </div>\r\n\r\n        <!-- 购买步骤 -->\r\n        <div class=\"steps-container\">\r\n          <van-steps :active=\"0\" direction=\"horizontal\">\r\n            <van-step>确认产品</van-step>\r\n            <van-step>填写信息</van-step>\r\n            <van-step>确认购买</van-step>\r\n            <van-step>购买完成</van-step>\r\n          </van-steps>\r\n        </div>\r\n\r\n        <!-- 步骤内容 -->\r\n        <div class=\"step-content\">\r\n          <div class=\"step-card\">\r\n            <h4 class=\"step-title\">产品确认</h4>\r\n            <van-cell-group>\r\n              <van-cell title=\"产品名称\" :value=\"product.name\" />\r\n              <van-cell title=\"预期收益率\" :value=\"product.expectedReturn\" />\r\n              <van-cell title=\"起购金额\" :value=\"product.minAmount\" />\r\n              <van-cell title=\"产品期限\" :value=\"product.term\" />\r\n            </van-cell-group>\r\n            <div class=\"step-actions\">\r\n              <van-button type=\"primary\" size=\"large\" block round @click=\"nextStep\">\r\n                确认产品信息\r\n              </van-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </RecordWrapper>\r\n</template>\r\n\r\n<script>\r\nimport RecordWrapper from '@/components/RecordWrapper.vue'\r\n\r\nexport default {\r\n  name: 'PurchaseStepOne',\r\n  components: {\r\n    RecordWrapper\r\n  },\r\n  data() {\r\n    return {\r\n      productId: null,\r\n      product: null,\r\n      products: {\r\n        1: {\r\n          id: 1,\r\n          name: '稳健增长理财产品',\r\n          description: '低风险，稳定收益，适合保守型投资者',\r\n          expectedReturn: '4.2%',\r\n          minAmount: '1000元',\r\n          term: '90天',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        },\r\n        2: {\r\n          id: 2,\r\n          name: '平衡配置理财产品',\r\n          description: '中等风险，均衡收益，适合稳健型投资者',\r\n          expectedReturn: '6.8%',\r\n          minAmount: '5000元',\r\n          term: '180天',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        },\r\n        3: {\r\n          id: 3,\r\n          name: '成长机会理财产品',\r\n          description: '高风险高收益，适合积极型投资者',\r\n          expectedReturn: '9.5%',\r\n          minAmount: '10000元',\r\n          term: '365天',\r\n          image: 'https://img.yzcdn.cn/vant/cat.jpeg'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.loadProduct()\r\n  },\r\n  methods: {\r\n    loadProduct() {\r\n      this.productId = parseInt(this.$route.query.id) || parseInt(this.$route.params.id)\r\n      this.product = this.products[this.productId]\r\n      \r\n      if (!this.product) {\r\n        this.$toast.fail('产品不存在')\r\n        this.$router.back()\r\n        return\r\n      }\r\n    },\r\n    \r\n    nextStep() {\r\n      // 跳转到下一步，携带产品信息\r\n      this.$router.push({\r\n        name: 'PurchaseStepTwo',\r\n        query: { id: this.productId }\r\n      })\r\n    },\r\n\r\n    // 处理录制超时\r\n    handleRecordTimeout() {\r\n      console.log('步骤1：录制超时')\r\n    },\r\n\r\n    // 处理超时确认\r\n    handleTimeoutConfirmed() {\r\n      // 跳转回产品列表\r\n      this.$router.push('/')\r\n    },\r\n\r\n    onRecordStarted() {\r\n      console.log('录制开始')\r\n    },\r\n\r\n    onRecordDeclined() {\r\n      console.log('录制拒绝')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.purchase-step {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.product-info-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.product-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.product-name {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0;\r\n}\r\n\r\n.product-return {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #ee0a24;\r\n}\r\n\r\n.product-desc {\r\n  font-size: 12px;\r\n  color: #969799;\r\n  margin: 0;\r\n  line-height: 1.4;\r\n}\r\n\r\n.steps-container {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-content {\r\n  margin-bottom: 100px;\r\n}\r\n\r\n.step-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0 0 16px 0;\r\n}\r\n\r\n.step-actions {\r\n  margin-top: 24px;\r\n}\r\n\r\n.step-actions .van-button {\r\n  height: 48px;\r\n  font-size: 16px;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseStepOne.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseStepOne.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PurchaseStepOne.vue?vue&type=template&id=4949fb18&scoped=true\"\nimport script from \"./PurchaseStepOne.vue?vue&type=script&lang=js\"\nexport * from \"./PurchaseStepOne.vue?vue&type=script&lang=js\"\nimport style0 from \"./PurchaseStepOne.vue?vue&type=style&index=0&id=4949fb18&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4949fb18\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('RecordWrapper',{attrs:{\"auto-start\":false,\"show-controls\":false,\"stop-on-destroy\":false,\"require-consent\":false,\"metadata\":{ action: 'purchase-step-2', productId: _vm.productId }},on:{\"record-timeout\":_vm.handleRecordTimeout,\"timeout-confirmed\":_vm.handleTimeoutConfirmed}},[_c('div',{staticClass:\"purchase-step\"},[_c('van-nav-bar',{attrs:{\"title\":\"填写信息\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),(_vm.product)?_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"product-info-card\"},[_c('div',{staticClass:\"product-header\"},[_c('h3',{staticClass:\"product-name\"},[_vm._v(_vm._s(_vm.product.name))]),_c('div',{staticClass:\"product-return\"},[_vm._v(_vm._s(_vm.product.expectedReturn))])])]),_c('div',{staticClass:\"steps-container\"},[_c('van-steps',{attrs:{\"active\":1,\"direction\":\"horizontal\"}},[_c('van-step',[_vm._v(\"确认产品\")]),_c('van-step',[_vm._v(\"填写信息\")]),_c('van-step',[_vm._v(\"确认购买\")]),_c('van-step',[_vm._v(\"购买完成\")])],1)],1),_c('div',{staticClass:\"step-content\"},[_c('div',{staticClass:\"step-card\"},[_c('h4',{staticClass:\"step-title\"},[_vm._v(\"填写购买信息\")]),_c('van-form',{ref:\"purchaseForm\",on:{\"submit\":_vm.onFormSubmit}},[_c('van-field',{attrs:{\"name\":\"amount\",\"label\":\"购买金额\",\"placeholder\":\"请输入购买金额\",\"type\":\"number\",\"rules\":[{ required: true, message: '请填写购买金额' }]},model:{value:(_vm.purchaseForm.amount),callback:function ($$v) {_vm.$set(_vm.purchaseForm, \"amount\", $$v)},expression:\"purchaseForm.amount\"}}),_c('van-field',{attrs:{\"name\":\"bankCard\",\"label\":\"银行卡号\",\"placeholder\":\"请输入银行卡号\",\"rules\":[{ required: true, message: '请填写银行卡号' }]},model:{value:(_vm.purchaseForm.bankCard),callback:function ($$v) {_vm.$set(_vm.purchaseForm, \"bankCard\", $$v)},expression:\"purchaseForm.bankCard\"}}),_c('van-field',{attrs:{\"name\":\"password\",\"label\":\"交易密码\",\"placeholder\":\"请输入交易密码\",\"type\":\"password\",\"rules\":[{ required: true, message: '请填写交易密码' }]},model:{value:(_vm.purchaseForm.password),callback:function ($$v) {_vm.$set(_vm.purchaseForm, \"password\", $$v)},expression:\"purchaseForm.password\"}}),_c('div',{staticClass:\"step-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.validateAndNext}},[_vm._v(\" 下一步 \")])],1)],1)],1)])]):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <RecordWrapper \r\n    :auto-start=\"false\"\r\n    :show-controls=\"false\"\r\n    :stop-on-destroy=\"false\"\r\n    :require-consent=\"false\"\r\n    :metadata=\"{ action: 'purchase-step-2', productId: productId }\"\r\n    @record-timeout=\"handleRecordTimeout\"\r\n    @timeout-confirmed=\"handleTimeoutConfirmed\"\r\n  >\r\n    <div class=\"purchase-step\">\r\n      <van-nav-bar \r\n        title=\"填写信息\" \r\n        left-arrow \r\n        fixed\r\n        @click-left=\"$router.back()\"\r\n      />\r\n      \r\n      <div class=\"content\" v-if=\"product\">\r\n        <!-- 产品信息 -->\r\n        <div class=\"product-info-card\">\r\n          <div class=\"product-header\">\r\n            <h3 class=\"product-name\">{{ product.name }}</h3>\r\n            <div class=\"product-return\">{{ product.expectedReturn }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 购买步骤 -->\r\n        <div class=\"steps-container\">\r\n          <van-steps :active=\"1\" direction=\"horizontal\">\r\n            <van-step>确认产品</van-step>\r\n            <van-step>填写信息</van-step>\r\n            <van-step>确认购买</van-step>\r\n            <van-step>购买完成</van-step>\r\n          </van-steps>\r\n        </div>\r\n\r\n        <!-- 步骤内容 -->\r\n        <div class=\"step-content\">\r\n          <div class=\"step-card\">\r\n            <h4 class=\"step-title\">填写购买信息</h4>\r\n            <van-form ref=\"purchaseForm\" @submit=\"onFormSubmit\">\r\n              <van-field\r\n                v-model=\"purchaseForm.amount\"\r\n                name=\"amount\"\r\n                label=\"购买金额\"\r\n                placeholder=\"请输入购买金额\"\r\n                type=\"number\"\r\n                :rules=\"[{ required: true, message: '请填写购买金额' }]\"\r\n              />\r\n              <van-field\r\n                v-model=\"purchaseForm.bankCard\"\r\n                name=\"bankCard\"\r\n                label=\"银行卡号\"\r\n                placeholder=\"请输入银行卡号\"\r\n                :rules=\"[{ required: true, message: '请填写银行卡号' }]\"\r\n              />\r\n              <van-field\r\n                v-model=\"purchaseForm.password\"\r\n                name=\"password\"\r\n                label=\"交易密码\"\r\n                placeholder=\"请输入交易密码\"\r\n                type=\"password\"\r\n                :rules=\"[{ required: true, message: '请填写交易密码' }]\"\r\n              />\r\n              <div class=\"step-actions\">\r\n                <van-button type=\"primary\" size=\"large\" block round @click=\"validateAndNext\">\r\n                  下一步\r\n                </van-button>\r\n              </div>\r\n            </van-form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </RecordWrapper>\r\n</template>\r\n\r\n<script>\r\nimport RecordWrapper from '@/components/RecordWrapper.vue'\r\n\r\nexport default {\r\n  name: 'PurchaseStepTwo',\r\n  components: {\r\n    RecordWrapper\r\n  },\r\n  data() {\r\n    return {\r\n      productId: null,\r\n      product: null,\r\n      purchaseForm: {\r\n        amount: '',\r\n        bankCard: '',\r\n        password: ''\r\n      },\r\n      products: {\r\n        1: {\r\n          id: 1,\r\n          name: '稳健增长理财产品',\r\n          description: '低风险，稳定收益，适合保守型投资者',\r\n          expectedReturn: '4.2%',\r\n          minAmount: '1000元',\r\n          term: '90天'\r\n        },\r\n        2: {\r\n          id: 2,\r\n          name: '平衡配置理财产品',\r\n          description: '中等风险，均衡收益，适合稳健型投资者',\r\n          expectedReturn: '6.8%',\r\n          minAmount: '5000元',\r\n          term: '180天'\r\n        },\r\n        3: {\r\n          id: 3,\r\n          name: '成长机会理财产品',\r\n          description: '高风险高收益，适合积极型投资者',\r\n          expectedReturn: '9.5%',\r\n          minAmount: '10000元',\r\n          term: '365天'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.loadProduct()\r\n    this.loadFormData()\r\n  },\r\n  methods: {\r\n    loadProduct() {\r\n      this.productId = parseInt(this.$route.query.id) || parseInt(this.$route.params.id)\r\n      this.product = this.products[this.productId]\r\n      \r\n      if (!this.product) {\r\n        this.$toast.fail('产品不存在')\r\n        this.$router.back()\r\n        return\r\n      }\r\n    },\r\n\r\n    loadFormData() {\r\n      // 从sessionStorage中加载已填写的表单数据\r\n      const savedForm = sessionStorage.getItem('purchaseForm')\r\n      if (savedForm) {\r\n        try {\r\n          this.purchaseForm = JSON.parse(savedForm)\r\n        } catch (error) {\r\n          console.error('加载表单数据失败:', error)\r\n        }\r\n      }\r\n    },\r\n\r\n    saveFormData() {\r\n      // 保存表单数据到sessionStorage\r\n      sessionStorage.setItem('purchaseForm', JSON.stringify(this.purchaseForm))\r\n    },\r\n    \r\n    // 表单验证并进入下一步\r\n    validateAndNext() {\r\n      // 手动验证表单\r\n      if (!this.purchaseForm.amount) {\r\n        this.$toast.fail('请填写购买金额')\r\n        return\r\n      }\r\n      if (!this.purchaseForm.bankCard) {\r\n        this.$toast.fail('请填写银行卡号')\r\n        return\r\n      }\r\n      if (!this.purchaseForm.password) {\r\n        this.$toast.fail('请填写交易密码')\r\n        return\r\n      }\r\n      \r\n      // 验证金额是否符合最低购买要求\r\n      const minAmount = parseInt(this.product.minAmount.replace(/[^\\d]/g, ''))\r\n      if (parseInt(this.purchaseForm.amount) < minAmount) {\r\n        this.$toast.fail(`购买金额不能少于${this.product.minAmount}`)\r\n        return\r\n      }\r\n      \r\n      // 验证银行卡号格式（简单验证）\r\n      if (this.purchaseForm.bankCard.length < 16) {\r\n        this.$toast.fail('请输入正确的银行卡号')\r\n        return\r\n      }\r\n      \r\n      // 验证交易密码长度\r\n      if (this.purchaseForm.password.length < 6) {\r\n        this.$toast.fail('交易密码至少6位数')\r\n        return\r\n      }\r\n      \r\n      // 保存表单数据\r\n      this.saveFormData()\r\n      \r\n      // 跳转到下一步\r\n      this.$router.push({\r\n        name: 'PurchaseStepThree',\r\n        query: { id: this.productId }\r\n      })\r\n    },\r\n\r\n    // 表单提交事件\r\n    onFormSubmit() {\r\n      this.validateAndNext()\r\n    },\r\n\r\n    // 处理录制超时\r\n    handleRecordTimeout() {\r\n      console.log('步骤2：录制超时')\r\n    },\r\n\r\n    // 处理超时确认\r\n    handleTimeoutConfirmed() {\r\n      // 跳转回产品列表\r\n      this.$router.push('/')\r\n    }\r\n  },\r\n  watch: {\r\n    // 监听表单变化，实时保存\r\n    purchaseForm: {\r\n      handler() {\r\n        this.saveFormData()\r\n      },\r\n      deep: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.purchase-step {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.product-info-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.product-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.product-name {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0;\r\n}\r\n\r\n.product-return {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #ee0a24;\r\n}\r\n\r\n.steps-container {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-content {\r\n  margin-bottom: 100px;\r\n}\r\n\r\n.step-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0 0 16px 0;\r\n}\r\n\r\n.step-actions {\r\n  margin-top: 24px;\r\n}\r\n\r\n.step-actions .van-button {\r\n  height: 48px;\r\n  font-size: 16px;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseStepTwo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseStepTwo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PurchaseStepTwo.vue?vue&type=template&id=3feb7eb8&scoped=true\"\nimport script from \"./PurchaseStepTwo.vue?vue&type=script&lang=js\"\nexport * from \"./PurchaseStepTwo.vue?vue&type=script&lang=js\"\nimport style0 from \"./PurchaseStepTwo.vue?vue&type=style&index=0&id=3feb7eb8&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3feb7eb8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('RecordWrapper',{attrs:{\"auto-start\":false,\"show-controls\":false,\"stop-on-destroy\":false,\"require-consent\":false,\"metadata\":{ action: 'purchase-step-3', productId: _vm.productId }},on:{\"record-timeout\":_vm.handleRecordTimeout,\"timeout-confirmed\":_vm.handleTimeoutConfirmed}},[_c('div',{staticClass:\"purchase-step\"},[_c('van-nav-bar',{attrs:{\"title\":\"确认购买\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),(_vm.product)?_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"product-info-card\"},[_c('div',{staticClass:\"product-header\"},[_c('h3',{staticClass:\"product-name\"},[_vm._v(_vm._s(_vm.product.name))]),_c('div',{staticClass:\"product-return\"},[_vm._v(_vm._s(_vm.product.expectedReturn))])])]),_c('div',{staticClass:\"steps-container\"},[_c('van-steps',{attrs:{\"active\":2,\"direction\":\"horizontal\"}},[_c('van-step',[_vm._v(\"确认产品\")]),_c('van-step',[_vm._v(\"填写信息\")]),_c('van-step',[_vm._v(\"确认购买\")]),_c('van-step',[_vm._v(\"购买完成\")])],1)],1),_c('div',{staticClass:\"step-content\"},[_c('div',{staticClass:\"step-card\"},[_c('h4',{staticClass:\"step-title\"},[_vm._v(\"确认购买信息\")]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"产品名称\",\"value\":_vm.product.name}}),_c('van-cell',{attrs:{\"title\":\"购买金额\",\"value\":`¥${_vm.purchaseForm.amount}`}}),_c('van-cell',{attrs:{\"title\":\"预期收益\",\"value\":_vm.expectedProfit}}),_c('van-cell',{attrs:{\"title\":\"银行卡号\",\"value\":_vm.maskedBankCard}})],1),_c('div',{staticClass:\"risk-notice\"},[_c('van-notice-bar',{attrs:{\"left-icon\":\"warning-o\",\"text\":\"投资有风险，理财产品不保证本金和收益，过往业绩不代表未来表现\"}})],1),_c('div',{staticClass:\"step-actions\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\",\"loading\":_vm.purchasing},on:{\"click\":_vm.confirmPurchase}},[_vm._v(\" 确认购买 \")])],1)],1)])]):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <RecordWrapper \r\n    :auto-start=\"false\"\r\n    :show-controls=\"false\"\r\n    :stop-on-destroy=\"false\"\r\n    :require-consent=\"false\"\r\n    :metadata=\"{ action: 'purchase-step-3', productId: productId }\"\r\n    @record-timeout=\"handleRecordTimeout\"\r\n    @timeout-confirmed=\"handleTimeoutConfirmed\"\r\n  >\r\n    <div class=\"purchase-step\">\r\n      <van-nav-bar \r\n        title=\"确认购买\" \r\n        left-arrow \r\n        fixed\r\n        @click-left=\"$router.back()\"\r\n      />\r\n      \r\n      <div class=\"content\" v-if=\"product\">\r\n        <!-- 产品信息 -->\r\n        <div class=\"product-info-card\">\r\n          <div class=\"product-header\">\r\n            <h3 class=\"product-name\">{{ product.name }}</h3>\r\n            <div class=\"product-return\">{{ product.expectedReturn }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 购买步骤 -->\r\n        <div class=\"steps-container\">\r\n          <van-steps :active=\"2\" direction=\"horizontal\">\r\n            <van-step>确认产品</van-step>\r\n            <van-step>填写信息</van-step>\r\n            <van-step>确认购买</van-step>\r\n            <van-step>购买完成</van-step>\r\n          </van-steps>\r\n        </div>\r\n\r\n        <!-- 步骤内容 -->\r\n        <div class=\"step-content\">\r\n          <div class=\"step-card\">\r\n            <h4 class=\"step-title\">确认购买信息</h4>\r\n            <van-cell-group>\r\n              <van-cell title=\"产品名称\" :value=\"product.name\" />\r\n              <van-cell title=\"购买金额\" :value=\"`¥${purchaseForm.amount}`\" />\r\n              <van-cell title=\"预期收益\" :value=\"expectedProfit\" />\r\n              <van-cell title=\"银行卡号\" :value=\"maskedBankCard\" />\r\n            </van-cell-group>\r\n            \r\n            <div class=\"risk-notice\">\r\n              <van-notice-bar\r\n                left-icon=\"warning-o\"\r\n                text=\"投资有风险，理财产品不保证本金和收益，过往业绩不代表未来表现\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"step-actions\">\r\n              <van-button type=\"primary\" size=\"large\" block round @click=\"confirmPurchase\" :loading=\"purchasing\">\r\n                确认购买\r\n              </van-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </RecordWrapper>\r\n</template>\r\n\r\n<script>\r\nimport RecordWrapper from '@/components/RecordWrapper.vue'\r\n\r\nexport default {\r\n  name: 'PurchaseStepThree',\r\n  components: {\r\n    RecordWrapper\r\n  },\r\n  data() {\r\n    return {\r\n      productId: null,\r\n      product: null,\r\n      purchaseForm: {\r\n        amount: '',\r\n        bankCard: '',\r\n        password: ''\r\n      },\r\n      purchasing: false,\r\n      products: {\r\n        1: {\r\n          id: 1,\r\n          name: '稳健增长理财产品',\r\n          description: '低风险，稳定收益，适合保守型投资者',\r\n          expectedReturn: '4.2%',\r\n          minAmount: '1000元',\r\n          term: '90天'\r\n        },\r\n        2: {\r\n          id: 2,\r\n          name: '平衡配置理财产品',\r\n          description: '中等风险，均衡收益，适合稳健型投资者',\r\n          expectedReturn: '6.8%',\r\n          minAmount: '5000元',\r\n          term: '180天'\r\n        },\r\n        3: {\r\n          id: 3,\r\n          name: '成长机会理财产品',\r\n          description: '高风险高收益，适合积极型投资者',\r\n          expectedReturn: '9.5%',\r\n          minAmount: '10000元',\r\n          term: '365天'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    expectedProfit() {\r\n      if (!this.purchaseForm.amount || !this.product) return '¥0'\r\n      const rate = parseFloat(this.product.expectedReturn) / 100\r\n      const profit = this.purchaseForm.amount * rate\r\n      return `¥${profit.toFixed(2)}`\r\n    },\r\n    maskedBankCard() {\r\n      if (!this.purchaseForm.bankCard) return ''\r\n      const card = this.purchaseForm.bankCard\r\n      return card.replace(/(\\d{4})\\d+(\\d{4})/, '$1****$2')\r\n    }\r\n  },\r\n  created() {\r\n    this.loadProduct()\r\n    this.loadFormData()\r\n  },\r\n  methods: {\r\n    loadProduct() {\r\n      this.productId = parseInt(this.$route.query.id) || parseInt(this.$route.params.id)\r\n      this.product = this.products[this.productId]\r\n      \r\n      if (!this.product) {\r\n        this.$toast.fail('产品不存在')\r\n        this.$router.push('/')\r\n        return\r\n      }\r\n    },\r\n\r\n    loadFormData() {\r\n      // 从sessionStorage中加载表单数据\r\n      const savedForm = sessionStorage.getItem('purchaseForm')\r\n      if (savedForm) {\r\n        try {\r\n          this.purchaseForm = JSON.parse(savedForm)\r\n        } catch (error) {\r\n          console.error('加载表单数据失败:', error)\r\n          this.$toast.fail('表单数据加载失败，请重新填写')\r\n          this.$router.push({\r\n            name: 'PurchaseStepTwo',\r\n            query: { id: this.productId }\r\n          })\r\n        }\r\n      } else {\r\n        this.$toast.fail('请先填写购买信息')\r\n        this.$router.push({\r\n          name: 'PurchaseStepTwo',\r\n          query: { id: this.productId }\r\n        })\r\n      }\r\n    },\r\n\r\n    async confirmPurchase() {\r\n      // 检查录制状态\r\n      try {\r\n        const GlobalRecorder = (await import('@/utils/global-recorder')).default\r\n        const globalRecorder = GlobalRecorder.getInstance()\r\n        const status = globalRecorder.getRecordingStatus()\r\n        \r\n        if (!status.isRecording) {\r\n          this.$toast.fail('录制已停止，请重新开始购买流程')\r\n          this.$router.push('/')\r\n          return\r\n        }\r\n      } catch (error) {\r\n        console.error('检查录制状态失败:', error)\r\n        this.$toast.fail('录制状态检查失败')\r\n        return\r\n      }\r\n      \r\n      this.purchasing = true\r\n      \r\n      try {\r\n        // 模拟购买过程\r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        \r\n        // 生成订单信息\r\n        const orderNo = 'PO' + Date.now()\r\n        const purchaseTime = new Date().toLocaleString()\r\n        \r\n        // 保存订单信息\r\n        const orderInfo = {\r\n          orderNo,\r\n          purchaseTime,\r\n          productId: this.productId,\r\n          productName: this.product.name,\r\n          amount: this.purchaseForm.amount,\r\n          expectedProfit: this.expectedProfit,\r\n          bankCard: this.maskedBankCard\r\n        }\r\n        \r\n        sessionStorage.setItem('orderInfo', JSON.stringify(orderInfo))\r\n        \r\n        this.purchasing = false\r\n        \r\n        // 跳转到购买成功页面\r\n        this.$router.push({\r\n          name: 'PurchaseStepFour',\r\n          query: { id: this.productId, orderNo: orderNo }\r\n        })\r\n        \r\n      } catch (error) {\r\n        console.error('购买流程出错:', error)\r\n        this.purchasing = false\r\n        this.$toast.fail('购买失败，请重试')\r\n      }\r\n    },\r\n\r\n    // 处理录制超时\r\n    handleRecordTimeout() {\r\n      console.log('步骤3：录制超时')\r\n    },\r\n\r\n    // 处理超时确认\r\n    handleTimeoutConfirmed() {\r\n      // 跳转回产品列表\r\n      this.$router.push('/')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.purchase-step {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.product-info-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.product-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.product-name {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0;\r\n}\r\n\r\n.product-return {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #ee0a24;\r\n}\r\n\r\n.steps-container {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-content {\r\n  margin-bottom: 100px;\r\n}\r\n\r\n.step-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n  margin: 0 0 16px 0;\r\n}\r\n\r\n.risk-notice {\r\n  margin: 16px 0;\r\n}\r\n\r\n.step-actions {\r\n  margin-top: 24px;\r\n}\r\n\r\n.step-actions .van-button {\r\n  height: 48px;\r\n  font-size: 16px;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseStepThree.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseStepThree.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PurchaseStepThree.vue?vue&type=template&id=166823a3&scoped=true\"\nimport script from \"./PurchaseStepThree.vue?vue&type=script&lang=js\"\nexport * from \"./PurchaseStepThree.vue?vue&type=script&lang=js\"\nimport style0 from \"./PurchaseStepThree.vue?vue&type=style&index=0&id=166823a3&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"166823a3\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('RecordWrapper',{ref:\"recordWrapper\",attrs:{\"auto-start\":false,\"show-controls\":false,\"stop-on-destroy\":true,\"require-consent\":false,\"metadata\":{ action: 'purchase-step-4', productId: _vm.productId }},on:{\"record-timeout\":_vm.handleRecordTimeout,\"timeout-confirmed\":_vm.handleTimeoutConfirmed,\"recording-finished\":_vm.onRecordingFinished}},[_c('div',{staticClass:\"purchase-step\"},[_c('van-nav-bar',{attrs:{\"title\":\"购买完成\",\"left-arrow\":false,\"fixed\":\"\"}}),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"steps-container\"},[_c('van-steps',{attrs:{\"active\":3,\"direction\":\"horizontal\"}},[_c('van-step',[_vm._v(\"确认产品\")]),_c('van-step',[_vm._v(\"填写信息\")]),_c('van-step',[_vm._v(\"确认购买\")]),_c('van-step',[_vm._v(\"购买完成\")])],1)],1),_c('div',{staticClass:\"step-content\"},[_c('div',{staticClass:\"step-card success-card\"},[_c('div',{staticClass:\"success-content\"},[_c('van-icon',{attrs:{\"name\":\"success\",\"size\":\"50\",\"color\":\"#07c160\"}}),_c('h3',[_vm._v(\"购买成功！\")]),_c('p',[_vm._v(\"您已成功购买理财产品\")]),(_vm.orderInfo)?_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"订单号\",\"value\":_vm.orderInfo.orderNo}}),_c('van-cell',{attrs:{\"title\":\"购买时间\",\"value\":_vm.orderInfo.purchaseTime}}),_c('van-cell',{attrs:{\"title\":\"产品名称\",\"value\":_vm.orderInfo.productName}}),_c('van-cell',{attrs:{\"title\":\"购买金额\",\"value\":`¥${_vm.orderInfo.amount}`}}),_c('van-cell',{attrs:{\"title\":\"预期收益\",\"value\":_vm.orderInfo.expectedProfit}}),_c('van-cell',{attrs:{\"title\":\"银行卡号\",\"value\":_vm.orderInfo.bankCard}})],1):_vm._e(),_c('div',{staticClass:\"recording-status\"},[_c('h4',[_vm._v(\"录制状态\")]),(_vm.recordingResult === null)?_c('div',{staticClass:\"status-loading\"},[_c('van-loading',{attrs:{\"size\":\"20\"}}),_c('span',[_vm._v(\"正在处理录制数据...\")])],1):(_vm.recordingResult && typeof _vm.recordingResult === 'object' && _vm.recordingResult.success)?_c('div',{staticClass:\"recording-success-section\"},[_c('van-notice-bar',{attrs:{\"type\":\"success\",\"text\":\"录制数据处理并上传成功\"}}),_c('div',{staticClass:\"success-info\"},[_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"事件数量:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.recordingResult.recordingResult ? _vm.recordingResult.recordingResult.eventCount : (_vm.recordingResult.data ? _vm.recordingResult.data.finalData.totalEvents : 0)))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"原始大小:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.formatFileSize(_vm.recordingResult.data ? _vm.recordingResult.data.sizes.original : 0)))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"压缩大小:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.formatFileSize(_vm.recordingResult.data ? _vm.recordingResult.data.sizes.compressed : 0)))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"压缩率:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.recordingResult.data ? _vm.recordingResult.data.compressionRatio : '0%'))])]),_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"上传状态:\")]),_c('van-tag',{attrs:{\"type\":_vm.recordingResult.uploadResult && _vm.recordingResult.uploadResult.success ? 'success' : 'danger'}},[_vm._v(\" \"+_vm._s(_vm.recordingResult.uploadResult && _vm.recordingResult.uploadResult.success ? '成功' : '失败')+\" \")])],1),(_vm.recordingResult.uploadResult && _vm.recordingResult.uploadResult.success)?_c('div',{staticClass:\"success-item\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"上传ID:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.recordingResult.uploadResult.uploadId || '未知'))])]):_vm._e()]),(_vm.recordingResult.recordingResult && _vm.recordingResult.recordingResult.events)?_c('div',{staticClass:\"replay-section\"},[_c('h4',[_vm._v(\"购买流程回放\")]),_c('div',{staticClass:\"replay-controls\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isReplaying},on:{\"click\":_vm.startReplay}},[_vm._v(\" \"+_vm._s(_vm.isReplaying ? '正在回放...' : '开始回放')+\" \")]),(_vm.isReplaying)?_c('van-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.stopReplay}},[_vm._v(\" 停止回放 \")]):_vm._e()],1),_c('div',{staticClass:\"replay-container\",attrs:{\"id\":\"step-replay-container\"}})]):_vm._e()],1):_c('div',{staticClass:\"recording-error-section\"},[_c('van-notice-bar',{attrs:{\"type\":\"danger\",\"text\":_vm.recordingResult ? (_vm.recordingResult.message || _vm.recordingResult.error || '录制失败') : '录制处理失败'}})],1)]),_c('div',{staticClass:\"step-actions\"},[(_vm.recordingResult && typeof _vm.recordingResult === 'object' && _vm.recordingResult.success)?_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.goHome}},[_vm._v(\" 返回首页 \")]):[_c('van-button',{staticStyle:{\"margin-bottom\":\"12px\"},attrs:{\"type\":\"primary\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.goToProducts}},[_vm._v(\" 重新开始录制 \")]),_c('van-button',{attrs:{\"type\":\"default\",\"size\":\"large\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.goHome}},[_vm._v(\" 返回首页 \")])]],2)],1)])])])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <RecordWrapper \r\n    :auto-start=\"false\"\r\n    :show-controls=\"false\"\r\n    :stop-on-destroy=\"true\"\r\n    :require-consent=\"false\"\r\n    :metadata=\"{ action: 'purchase-step-4', productId: productId }\"\r\n    @record-timeout=\"handleRecordTimeout\"\r\n    @timeout-confirmed=\"handleTimeoutConfirmed\"\r\n    @recording-finished=\"onRecordingFinished\"\r\n    ref=\"recordWrapper\"\r\n  >\r\n    <div class=\"purchase-step\">\r\n      <van-nav-bar \r\n        title=\"购买完成\" \r\n        :left-arrow=\"false\"\r\n        fixed\r\n      />\r\n      \r\n      <div class=\"content\">\r\n        <!-- 购买步骤 -->\r\n        <div class=\"steps-container\">\r\n          <van-steps :active=\"3\" direction=\"horizontal\">\r\n            <van-step>确认产品</van-step>\r\n            <van-step>填写信息</van-step>\r\n            <van-step>确认购买</van-step>\r\n            <van-step>购买完成</van-step>\r\n          </van-steps>\r\n        </div>\r\n\r\n        <!-- 成功内容 -->\r\n        <div class=\"step-content\">\r\n          <div class=\"step-card success-card\">\r\n            <div class=\"success-content\">\r\n              <van-icon name=\"success\" size=\"50\" color=\"#07c160\" />\r\n              <h3>购买成功！</h3>\r\n              <p>您已成功购买理财产品</p>\r\n              \r\n              <van-cell-group v-if=\"orderInfo\">\r\n                <van-cell title=\"订单号\" :value=\"orderInfo.orderNo\" />\r\n                <van-cell title=\"购买时间\" :value=\"orderInfo.purchaseTime\" />\r\n                <van-cell title=\"产品名称\" :value=\"orderInfo.productName\" />\r\n                <van-cell title=\"购买金额\" :value=\"`¥${orderInfo.amount}`\" />\r\n                <van-cell title=\"预期收益\" :value=\"orderInfo.expectedProfit\" />\r\n                <van-cell title=\"银行卡号\" :value=\"orderInfo.bankCard\" />\r\n              </van-cell-group>\r\n\r\n              <!-- 录制状态显示 -->\r\n              <div class=\"recording-status\">\r\n                <h4>录制状态</h4>\r\n                <div v-if=\"recordingResult === null\" class=\"status-loading\">\r\n                  <van-loading size=\"20\" />\r\n                  <span>正在处理录制数据...</span>\r\n                </div>\r\n                \r\n                <!-- 录制成功 -->\r\n                <div v-else-if=\"recordingResult && typeof recordingResult === 'object' && recordingResult.success\" class=\"recording-success-section\">\r\n                  <van-notice-bar \r\n                    type=\"success\" \r\n                    text=\"录制数据处理并上传成功\"\r\n                  />\r\n                  \r\n                  <div class=\"success-info\">\r\n                    <div class=\"success-item\">\r\n                      <span class=\"label\">事件数量:</span>\r\n                      <span class=\"value\">{{ recordingResult.recordingResult ? recordingResult.recordingResult.eventCount : (recordingResult.data ? recordingResult.data.finalData.totalEvents : 0) }}</span>\r\n                    </div>\r\n                    <div class=\"success-item\">\r\n                      <span class=\"label\">原始大小:</span>\r\n                      <span class=\"value\">{{ formatFileSize(recordingResult.data ? recordingResult.data.sizes.original : 0) }}</span>\r\n                    </div>\r\n                    <div class=\"success-item\">\r\n                      <span class=\"label\">压缩大小:</span>\r\n                      <span class=\"value\">{{ formatFileSize(recordingResult.data ? recordingResult.data.sizes.compressed : 0) }}</span>\r\n                    </div>\r\n                    <div class=\"success-item\">\r\n                      <span class=\"label\">压缩率:</span>\r\n                      <span class=\"value\">{{ recordingResult.data ? recordingResult.data.compressionRatio : '0%' }}</span>\r\n                    </div>\r\n                    <div class=\"success-item\">\r\n                      <span class=\"label\">上传状态:</span>\r\n                      <van-tag :type=\"recordingResult.uploadResult && recordingResult.uploadResult.success ? 'success' : 'danger'\">\r\n                        {{ recordingResult.uploadResult && recordingResult.uploadResult.success ? '成功' : '失败' }}\r\n                      </van-tag>\r\n                    </div>\r\n                    <div v-if=\"recordingResult.uploadResult && recordingResult.uploadResult.success\" class=\"success-item\">\r\n                      <span class=\"label\">上传ID:</span>\r\n                      <span class=\"value\">{{ recordingResult.uploadResult.uploadId || '未知' }}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <!-- 录制回放区域 -->\r\n                  <div v-if=\"recordingResult.recordingResult && recordingResult.recordingResult.events\" class=\"replay-section\">\r\n                    <h4>购买流程回放</h4>\r\n                    <div class=\"replay-controls\">\r\n                      <van-button \r\n                        type=\"primary\" \r\n                        size=\"small\" \r\n                        @click=\"startReplay\"\r\n                        :disabled=\"isReplaying\"\r\n                      >\r\n                        {{ isReplaying ? '正在回放...' : '开始回放' }}\r\n                      </van-button>\r\n                      <van-button \r\n                        v-if=\"isReplaying\" \r\n                        size=\"small\" \r\n                        @click=\"stopReplay\"\r\n                      >\r\n                        停止回放\r\n                      </van-button>\r\n                    </div>\r\n                    <div \r\n                      id=\"step-replay-container\" \r\n                      class=\"replay-container\"\r\n                    ></div>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- 录制失败 -->\r\n                <div v-else class=\"recording-error-section\">\r\n                  <van-notice-bar \r\n                    type=\"danger\" \r\n                    :text=\"recordingResult ? (recordingResult.message || recordingResult.error || '录制失败') : '录制处理失败'\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 操作按钮 -->\r\n              <div class=\"step-actions\">\r\n                <van-button \r\n                  v-if=\"recordingResult && typeof recordingResult === 'object' && recordingResult.success\" \r\n                  type=\"primary\" \r\n                  size=\"large\" \r\n                  block \r\n                  round \r\n                  @click=\"goHome\"\r\n                >\r\n                  返回首页\r\n                </van-button>\r\n                <template v-else>\r\n                  <van-button \r\n                    type=\"primary\" \r\n                    size=\"large\" \r\n                    block \r\n                    round \r\n                    @click=\"goToProducts\"\r\n                    style=\"margin-bottom: 12px;\"\r\n                  >\r\n                    重新开始录制\r\n                  </van-button>\r\n                  <van-button \r\n                    type=\"default\" \r\n                    size=\"large\" \r\n                    block \r\n                    round \r\n                    @click=\"goHome\"\r\n                  >\r\n                    返回首页\r\n                  </van-button>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </RecordWrapper>\r\n</template>\r\n\r\n<script>\r\nimport RecordWrapper from '@/components/RecordWrapper.vue'\r\nimport { Loading } from 'vant'\r\n\r\nexport default {\r\n  name: 'PurchaseStepFour',\r\n  components: {\r\n    RecordWrapper,\r\n    [Loading.name]: Loading\r\n  },\r\n  data() {\r\n    return {\r\n      productId: null,\r\n      orderInfo: null,\r\n      recordingResult: null,\r\n      isReplaying: false,\r\n      replayPlayer: null\r\n    }\r\n  },\r\n  watch: {\r\n    recordingResult: {\r\n      handler(newVal, oldVal) {\r\n        console.log('购买完成页面：recordingResult发生变化')\r\n        console.log('购买完成页面：旧值:', oldVal)\r\n        console.log('购买完成页面：新值:', newVal)\r\n        console.log('购买完成页面：新值类型:', typeof newVal)\r\n        if (newVal) {\r\n          console.log('购买完成页面：新值的属性:', Object.keys(newVal))\r\n        }\r\n      },\r\n      immediate: true,\r\n      deep: true\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.loadOrderInfo()\r\n    \r\n    // 延迟调用RecordWrapper完成录制，让用户能看到完整的购买流程\r\n    setTimeout(() => {\r\n      this.finishRecording()\r\n    }, 1500)\r\n  },\r\n  beforeDestroy() {\r\n    // 组件销毁前停止回放\r\n    this.stopReplay()\r\n  },\r\n  methods: {\r\n    loadOrderInfo() {\r\n      this.productId = parseInt(this.$route.query.id) || parseInt(this.$route.params.id)\r\n      \r\n      // 从sessionStorage中加载订单信息\r\n      const savedOrder = sessionStorage.getItem('orderInfo')\r\n      if (savedOrder) {\r\n        try {\r\n          this.orderInfo = JSON.parse(savedOrder)\r\n        } catch (error) {\r\n          console.error('加载订单信息失败:', error)\r\n        }\r\n      }\r\n      \r\n      if (!this.orderInfo) {\r\n        this.$toast.fail('订单信息丢失')\r\n        this.$router.push('/')\r\n      }\r\n    },\r\n\r\n    // 完成录制 - 使用RecordWrapper的封装方法\r\n    async finishRecording() {\r\n      try {\r\n        console.log('购买完成页面：开始完成录制...')\r\n        \r\n        // 直接通过ref调用RecordWrapper的finishRecording方法\r\n        if (this.$refs.recordWrapper && typeof this.$refs.recordWrapper.finishRecording === 'function') {\r\n          console.log('购买完成页面：准备调用RecordWrapper.finishRecording')\r\n          \r\n          const result = await this.$refs.recordWrapper.finishRecording({\r\n            purchaseInfo: {\r\n              ...this.orderInfo,\r\n              timestamp: Date.now(),\r\n              page: 'PurchaseStepFour',\r\n              action: 'purchase-completed'\r\n            }\r\n          })\r\n          \r\n          console.log('购买完成页面：RecordWrapper.finishRecording返回结果:', result)\r\n          console.log('购买完成页面：结果类型:', typeof result)\r\n          \r\n          // 注意：结果也会通过onRecordingFinished事件回调处理\r\n          // 但我们也可以直接处理这里的结果\r\n          if (result && typeof result === 'object') {\r\n            this.recordingResult = result\r\n          }\r\n        } else {\r\n          console.warn('RecordWrapper组件或finishRecording方法不可用')\r\n          this.recordingResult = {\r\n            success: false,\r\n            error: '录制组件不可用',\r\n            message: '录制组件不可用，请重新开始录制流程'\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('购买完成页面：完成录制失败:', error)\r\n        this.recordingResult = { \r\n          success: false, \r\n          error: error.message,\r\n          message: '录制完成失败: ' + error.message\r\n        }\r\n      }\r\n    },\r\n\r\n    // 格式化文件大小\r\n    formatFileSize(bytes) {\r\n      if (bytes === 0) return '0 B'\r\n      const k = 1024\r\n      const sizes = ['B', 'KB', 'MB', 'GB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n    },\r\n\r\n    goToProducts() {\r\n      // 清理缓存数据\r\n      sessionStorage.removeItem('purchaseForm')\r\n      sessionStorage.removeItem('orderInfo')\r\n      this.$router.push('/')\r\n    },\r\n\r\n    goHome() {\r\n      // 清理缓存数据\r\n      sessionStorage.removeItem('purchaseForm')\r\n      sessionStorage.removeItem('orderInfo')\r\n      this.$router.push('/')\r\n    },\r\n\r\n    // 处理录制超时\r\n    handleRecordTimeout() {\r\n      console.log('步骤4：录制超时')\r\n    },\r\n\r\n    // 处理超时确认\r\n    handleTimeoutConfirmed() {\r\n      // 跳转回产品列表\r\n      this.$router.push('/')\r\n    },\r\n\r\n    // 录制完成事件处理 - 由RecordWrapper触发\r\n    onRecordingFinished(result) {\r\n      console.log('购买完成页面：收到录制完成事件:', result)\r\n      console.log('购买完成页面：result类型:', typeof result)\r\n      console.log('购买完成页面：result.success:', result ? result.success : 'result为空')\r\n      \r\n      // 确保result是一个有效的对象\r\n      if (result && typeof result === 'object') {\r\n        this.recordingResult = result\r\n        \r\n        if (result.success) {\r\n          this.$toast.success('录制完成并上传成功')\r\n        } else {\r\n          this.$toast.fail('录制完成失败: ' + (result.message || result.error))\r\n        }\r\n      } else {\r\n        console.error('购买完成页面：收到无效的录制结果:', result)\r\n        this.recordingResult = {\r\n          success: false,\r\n          error: '收到无效的录制结果',\r\n          message: '录制数据格式错误'\r\n        }\r\n        this.$toast.fail('录制数据格式错误')\r\n      }\r\n    },\r\n\r\n    // 开始回放\r\n    async startReplay() {\r\n      if (!this.recordingResult || !this.recordingResult.recordingResult || !this.recordingResult.recordingResult.events) {\r\n        this.$toast.fail('没有录制数据可回放')\r\n        return\r\n      }\r\n      \r\n      try {\r\n        this.isReplaying = true\r\n        \r\n        // 清空容器并设置基础样式\r\n        const container = document.getElementById('step-replay-container')\r\n        if (!container) {\r\n          throw new Error('回放容器未找到')\r\n        }\r\n        container.innerHTML = ''\r\n        container.style.width = '100%'\r\n        container.style.height = '600px'\r\n        container.style.position = 'relative'\r\n        container.style.overflow = 'visible'\r\n        container.style.border = '1px solid #eee'\r\n        container.style.borderRadius = '4px'\r\n        container.style.backgroundColor = '#f5f5f5'\r\n        \r\n        console.log('PurchaseStepFour：开始回放，事件数量:', this.recordingResult.recordingResult.events.length)\r\n        \r\n        // 验证事件数据格式\r\n        const events = this.recordingResult.recordingResult.events\r\n        if (!Array.isArray(events) || events.length < 2) {\r\n          throw new Error('录制数据格式不正确或事件太少')\r\n        }\r\n        \r\n        // 检查是否有必要的事件类型\r\n        const hasMetaEvent = events.some(e => e.type === 4)\r\n        const hasSnapshot = events.some(e => e.type === 2)\r\n        \r\n        if (!hasMetaEvent || !hasSnapshot) {\r\n          throw new Error('录制数据缺少必要的元信息或快照')\r\n        }\r\n        \r\n        // 使用全局rrweb-player\r\n        if (typeof window.rrwebPlayer === 'undefined') {\r\n          throw new Error('rrweb-player库未找到，请确保已正确引入')\r\n        }\r\n        \r\n        const rrwebPlayer = window.rrwebPlayer\r\n        \r\n        console.log('PurchaseStepFour：创建rrweb-player')\r\n        \r\n        // 直接在container中创建回放器\r\n        this.replayPlayer = new rrwebPlayer({\r\n          target: container,\r\n          props: {\r\n            events: events,\r\n            width: container.offsetWidth || 375,\r\n            height: 550,\r\n            autoPlay: false,\r\n            showController: true,\r\n            showWarning: false,\r\n            showDebug: false,\r\n            speed: 1,\r\n            speedOption: [0.5, 1, 1.5, 2, 4],\r\n            skipInactive: false,\r\n            mouseTail: false,\r\n            tags: {\r\n              'virtual-styles': {}\r\n            }\r\n          }\r\n        })\r\n        \r\n        console.log('PurchaseStepFour：rrweb-player创建成功')\r\n        \r\n        // iframe权限修复\r\n        setTimeout(() => {\r\n          const iframes = container.querySelectorAll('iframe')\r\n          iframes.forEach(iframe => {\r\n            if (iframe.hasAttribute('sandbox')) {\r\n              iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms allow-popups allow-modals')\r\n            }\r\n            iframe.style.width = '100%'\r\n            iframe.style.height = '100%'\r\n            iframe.style.border = 'none'\r\n          })\r\n          \r\n          console.log('PurchaseStepFour：已完成回放器初始化')\r\n        }, 500)\r\n        \r\n        // 监听回放事件\r\n        if (this.replayPlayer && this.replayPlayer.$on) {\r\n          this.replayPlayer.$on('finish', () => {\r\n            this.isReplaying = false\r\n            console.log('PurchaseStepFour：回放完成')\r\n          })\r\n          \r\n          this.replayPlayer.$on('start', () => {\r\n            console.log('PurchaseStepFour：回放开始')\r\n          })\r\n        }\r\n        \r\n        this.$toast.success('开始回放购买流程')\r\n        \r\n      } catch (error) {\r\n        console.error('PurchaseStepFour：回放失败:', error)\r\n        this.isReplaying = false\r\n        this.$toast.fail('回放失败: ' + error.message)\r\n        \r\n        // 显示错误信息\r\n        const container = document.getElementById('step-replay-container')\r\n        if (container) {\r\n          container.innerHTML = `\r\n            <div style=\"text-align: center; padding: 50px; color: #f56c6c; background: white;\">\r\n              <h4>回放失败</h4>\r\n              <p style=\"font-size: 12px; margin-top: 10px;\">${error.message}</p>\r\n              <p style=\"font-size: 10px; color: #999; margin-top: 10px;\">\r\n                事件数量: ${this.recordingResult.recordingResult && this.recordingResult.recordingResult.events ? this.recordingResult.recordingResult.events.length : 0}\r\n              </p>\r\n            </div>\r\n          `\r\n        }\r\n      }\r\n    },\r\n\r\n    // 停止回放\r\n    stopReplay() {\r\n      if (this.replayPlayer) {\r\n        try {\r\n          if (this.replayPlayer.$destroy) {\r\n            this.replayPlayer.$destroy()\r\n          }\r\n          this.replayPlayer = null\r\n        } catch (error) {\r\n          console.error('停止回放失败:', error)\r\n        }\r\n      }\r\n      this.isReplaying = false\r\n      \r\n      // 清理容器\r\n      const container = document.getElementById('step-replay-container')\r\n      if (container) {\r\n        container.innerHTML = '<div style=\"text-align: center; padding: 50px; color: #999;\">回放已停止</div>'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.purchase-step {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.content {\r\n  padding: 60px 16px 16px;\r\n}\r\n\r\n.steps-container {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.step-content {\r\n  margin-bottom: 100px;\r\n}\r\n\r\n.step-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.success-card {\r\n  text-align: center;\r\n}\r\n\r\n.success-content .van-icon {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.success-content h3 {\r\n  margin: 0 0 8px 0;\r\n  color: #323233;\r\n  font-size: 18px;\r\n}\r\n\r\n.success-content p {\r\n  color: #969799;\r\n  margin: 0 0 24px 0;\r\n  font-size: 14px;\r\n}\r\n\r\n.success-content .van-cell-group {\r\n  margin-bottom: 24px;\r\n  text-align: left;\r\n}\r\n\r\n.recording-status {\r\n  margin-top: 20px;\r\n  text-align: left;\r\n}\r\n\r\n.recording-status h4 {\r\n  margin: 0 0 12px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #323233;\r\n}\r\n\r\n.status-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 12px;\r\n  background: #f7f8fa;\r\n  border-radius: 6px;\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n.success-info {\r\n  background: #f6ffed;\r\n  border: 1px solid #b7eb8f;\r\n  border-radius: 6px;\r\n  padding: 12px;\r\n  margin-top: 12px;\r\n}\r\n\r\n.success-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n  font-size: 14px;\r\n}\r\n\r\n.success-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.success-item .label {\r\n  color: #666;\r\n  flex: 0 0 80px;\r\n}\r\n\r\n.success-item .value {\r\n  font-weight: 500;\r\n  color: #333;\r\n  text-align: right;\r\n  flex: 1;\r\n}\r\n\r\n.recording-error-section {\r\n  margin-top: 12px;\r\n}\r\n\r\n.step-actions {\r\n  margin-top: 24px;\r\n}\r\n\r\n.step-actions .van-button {\r\n  height: 48px;\r\n  font-size: 16px;\r\n}\r\n\r\n.replay-section {\r\n  margin-top: 20px;\r\n  text-align: left;\r\n}\r\n\r\n.replay-controls {\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.replay-controls .van-button {\r\n  margin-right: 8px;\r\n}\r\n\r\n.replay-container {\r\n  border: 1px solid #e1e1e1;\r\n  border-radius: 8px;\r\n  background: #fff;\r\n  min-height: 600px;\r\n  max-height: 600px;\r\n  width: 100%;\r\n  margin-top: 12px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  isolation: isolate;\r\n  contain: layout style;\r\n  z-index: 1;\r\n}\r\n\r\n.replay-container iframe {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  border: none;\r\n  display: block !important;\r\n  visibility: visible !important;\r\n  opacity: 1 !important;\r\n  background: #fff !important;\r\n}\r\n\r\n/* rrweb-player wrapper 样式 */\r\n.replay-container .rrweb-player-wrapper,\r\n.replay-container .rrweb-replayer-wrapper {\r\n  width: 100% !important;\r\n  height: 600px !important;\r\n  background: #fff;\r\n  position: relative !important;\r\n  overflow: visible !important;\r\n}\r\n\r\n/* rrweb-player 和 replayer-wrapper 样式覆盖 */\r\n.replay-container .rr-player,\r\n.replay-container .replayer-wrapper {\r\n  width: 100% !important;\r\n  height: 600px !important;\r\n  background: #fff;\r\n  display: block !important;\r\n  visibility: visible !important;\r\n  opacity: 1 !important;\r\n}\r\n\r\n.replay-container .rr-player__frame,\r\n.replay-container .replayer-wrapper .rr-player__frame {\r\n  border: none !important;\r\n  box-shadow: none !important;\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n}\r\n\r\n.replay-container .rr-controller {\r\n  background: rgba(0, 0, 0, 0.6) !important;\r\n  border-radius: 4px !important;\r\n}\r\n\r\n/* rrweb-player控制器样式优化 */\r\n.replay-container >>> .rr-player {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  border-radius: 8px;\r\n  min-height: 600px !important;\r\n}\r\n\r\n/* 确保回放内容区域完整显示 */\r\n.replay-container >>> .rr-player__frame {\r\n  width: 100% !important;\r\n  height: calc(100% - 50px) !important;\r\n  min-height: 550px !important;\r\n  border: none !important;\r\n  box-shadow: none !important;\r\n}\r\n\r\n.replay-container >>> .rr-player iframe {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  min-height: 550px !important;\r\n  border: none !important;\r\n}\r\n\r\n.replay-container >>> .rr-controller {\r\n  background: rgba(0, 0, 0, 0.6) !important;\r\n  border-radius: 0 0 8px 8px;\r\n  padding: 8px 12px;\r\n  color: white;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseStepFour.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseStepFour.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PurchaseStepFour.vue?vue&type=template&id=0d9f8de5&scoped=true\"\nimport script from \"./PurchaseStepFour.vue?vue&type=script&lang=js\"\nexport * from \"./PurchaseStepFour.vue?vue&type=script&lang=js\"\nimport style0 from \"./PurchaseStepFour.vue?vue&type=style&index=0&id=0d9f8de5&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d9f8de5\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\n\r\n// 主要页面组件\r\nimport SimpleRecord from '../views/SimpleRecord.vue'\r\nimport MultiPageRecord from '../views/MultiPageRecord.vue'\r\nimport RouterIndex from '../views/RouterIndex.vue'\r\nimport Home from '../views/Home.vue'\r\nimport ProductList from '../views/ProductList.vue'\r\nimport ProductDetail from '../views/ProductDetail.vue'\r\nimport Purchase from '../views/Purchase.vue'\r\nimport Redeem from '../views/Redeem.vue'\r\nimport RecordPlayer from '../views/RecordPlayer.vue'\r\n\r\n// pages目录下的组件\r\nimport HomePage from '../views/pages/HomePage.vue'\r\nimport ProductsPage from '../views/pages/ProductsPage.vue'\r\nimport ProductDetailPage from '../views/pages/ProductDetailPage.vue'\r\nimport PurchasePage from '../views/pages/PurchasePage.vue'\r\nimport RedeemPage from '../views/pages/RedeemPage.vue'\r\n\r\n// 购买步骤组件\r\nimport PurchaseStepOne from '../views/pages/PurchaseStepOne.vue'\r\nimport PurchaseStepTwo from '../views/pages/PurchaseStepTwo.vue'\r\nimport PurchaseStepThree from '../views/pages/PurchaseStepThree.vue'\r\nimport PurchaseStepFour from '../views/pages/PurchaseStepFour.vue'\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n  // 主要功能页面\r\n  // {\r\n  //   path: '/SimpleRecord',\r\n  //   name: 'SimpleRecord',\r\n  //   component: SimpleRecord,\r\n  //   meta: { title: '单页面录制' }\r\n  // },\r\n  // {\r\n  //   path: '/multi-page',\r\n  //   name: 'MultiPageRecord',\r\n  //   component: MultiPageRecord,\r\n  //   meta: { title: '多页面录制' }\r\n  // },\r\n  // {\r\n  //   path: '/routes',\r\n  //   name: 'RouterIndex',\r\n  //   component: RouterIndex,\r\n  //   meta: { title: '路由导航' }\r\n  // },\r\n  \r\n  // 原有的业务页面\r\n  // {\r\n  //   path: '/home',\r\n  //   name: 'Home',\r\n  //   component: Home,\r\n  //   meta: { title: '首页' }\r\n  // },\r\n  {\r\n    path: '/',\r\n    name: 'ProductList',\r\n    component: ProductList,\r\n    meta: { title: '产品列表' }\r\n  },\r\n  // {\r\n  //   path: '/product/:id',\r\n  //   name: 'ProductDetail',\r\n  //   component: ProductDetail,\r\n  //   props: true,\r\n  //   meta: { title: '产品详情' }\r\n  // },\r\n  // {\r\n  //   path: '/purchase/:id',\r\n  //   name: 'Purchase',\r\n  //   component: Purchase,\r\n  //   props: true,\r\n  //   meta: { title: '产品购买' }\r\n  // },\r\n  // {\r\n  //   path: '/redeem/:id',\r\n  //   name: 'Redeem',\r\n  //   component: Redeem,\r\n  //   props: true,\r\n  //   meta: { title: '产品赎回' }\r\n  // },\r\n  // {\r\n  //   path: '/player',\r\n  //   name: 'RecordPlayer',\r\n  //   component: RecordPlayer,\r\n  //   meta: { title: '录制回放' }\r\n  // },\r\n  \r\n  // 购买步骤页面\r\n  {\r\n    path: '/purchase-step/1',\r\n    name: 'PurchaseStepOne',\r\n    component: PurchaseStepOne,\r\n    meta: { title: '确认产品' }\r\n  },\r\n  {\r\n    path: '/purchase-step/2',\r\n    name: 'PurchaseStepTwo',\r\n    component: PurchaseStepTwo,\r\n    meta: { title: '填写信息' }\r\n  },\r\n  {\r\n    path: '/purchase-step/3',\r\n    name: 'PurchaseStepThree',\r\n    component: PurchaseStepThree,\r\n    meta: { title: '确认购买' }\r\n  },\r\n  {\r\n    path: '/purchase-step/4',\r\n    name: 'PurchaseStepFour',\r\n    component: PurchaseStepFour,\r\n    meta: { title: '购买完成' }\r\n  },\r\n  \r\n  // pages目录下的独立页面\r\n  // {\r\n  //   path: '/pages/home',\r\n  //   name: 'HomePage',\r\n  //   component: HomePage,\r\n  //   meta: { title: '首页组件' }\r\n  // },\r\n  // {\r\n  //   path: '/pages/products',\r\n  //   name: 'ProductsPage',\r\n  //   component: ProductsPage,\r\n  //   meta: { title: '产品页面' }\r\n  // },\r\n  // {\r\n  //   path: '/pages/product-detail',\r\n  //   name: 'ProductDetailPage',\r\n  //   component: ProductDetailPage,\r\n  //   meta: { title: '产品详情页面' }\r\n  // },\r\n  // {\r\n  //   path: '/pages/purchase',\r\n  //   name: 'PurchasePage',\r\n  //   component: PurchasePage,\r\n  //   meta: { title: '购买页面' }\r\n  // },\r\n  // {\r\n  //   path: '/pages/redeem',\r\n  //   name: 'RedeemPage',\r\n  //   component: RedeemPage,\r\n  //   meta: { title: '赎回页面' }\r\n  // },\r\n  \r\n  // 重定向和404处理\r\n  {\r\n    path: '/index',\r\n    redirect: '/'\r\n  },\r\n  {\r\n    path: '*',\r\n    redirect: '/'\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  routes\r\n})\r\n\r\n// 路由守卫 - 设置页面标题\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.meta && to.meta.title) {\r\n    document.title = to.meta.title + ' - Vue录制系统'\r\n  }\r\n  next()\r\n})\r\n\r\nexport default router ","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\n// 引入 Vant 组件\r\nimport { \r\n  NavBar, \r\n  Tabbar, \r\n  TabbarItem, \r\n  Card,\r\n  Cell,\r\n  CellGroup,\r\n  Button,\r\n  Toast,\r\n  Dialog,\r\n  Loading,\r\n  Sticky,\r\n  Tag,\r\n  Steps,\r\n  Step,\r\n  NoticeBar,\r\n  Icon,\r\n  Grid,\r\n  GridItem,\r\n  Form,\r\n  Field,\r\n  Picker,\r\n  Popup,\r\n  Row,\r\n  Col,\r\n  Checkbox\r\n} from 'vant'\r\n// 引入 Vant 样式\r\nimport 'vant/lib/index.css'\r\n\r\nVue.config.productionTip = false\r\n\r\n// 注册 Vant 组件\r\nVue.use(NavBar)\r\nVue.use(Tabbar)\r\nVue.use(TabbarItem)\r\nVue.use(Card)\r\nVue.use(Cell)\r\nVue.use(CellGroup)\r\nVue.use(Button)\r\nVue.use(Toast)\r\nVue.use(Dialog)\r\nVue.use(Loading)\r\nVue.use(Sticky)\r\nVue.use(Tag)\r\nVue.use(Steps)\r\nVue.use(Step)\r\nVue.use(NoticeBar)\r\nVue.use(Icon)\r\nVue.use(Grid)\r\nVue.use(GridItem)\r\nVue.use(Form)\r\nVue.use(Field)\r\nVue.use(Picker)\r\nVue.use(Popup)\r\nVue.use(Row)\r\nVue.use(Col)\r\nVue.use(Checkbox)\r\n\r\nnew Vue({\r\n  router,\r\n  render: h => h(App),\r\n}).$mount('#app') ","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_record_project\"] = self[\"webpackChunkvue_record_project\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6164); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["GlobalRecorder","constructor","this","recorder","events","isRecording","listeners","recordingId","recordingStartTime","maxRecordingDuration","console","log","getInstance","instance","addListener","callback","push","removeListener","index","indexOf","splice","emit","event","data","forEach","error","startRecording","metadata","warn","Date","now","Math","random","toString","substr","window","rrweb","Error","record","type","length","checkoutEveryNms","recordCanvas","collectFonts","inlineStylesheet","startTimeoutTimer","timeoutTimer","clearTimeout","setTimeout","handleRecordingTimeout","stopRecording","duration","message","clearTimeoutTimer","slice","getRecordingStatus","eventCount","startTime","stopRecordingAndProcess","additionalInfo","success","validEvents","filter","undefined","timestamp","baseData","toISOString","endTime","totalEvents","originalData","JSON","stringify","originalSize","Blob","size","pako","compressed","gzip","compressedSize","compressionRatio","toFixed","finalData","compressedEvents","Array","from","result","recordingResult","sizes","original","finishRecording","businessData","errorResult","render","_vm","_c","_self","attrs","staticRenderFns","name","component","staticClass","recordData","_e","_v","loading","on","startRecord","stopRecord","playRecord","downloading","downloadCompressedFile","uploading","uploadRecord","resetRecord","recordDuration","recordSize","recordTime","closePlayer","ref","isPlaying","togglePlay","_s","resetPlayer","demoClick","model","value","$$v","demoText","expression","scopedSlots","_u","key","fn","demoSwitch","proxy","demoAlert","demoToast","goToMultiPage","stopFn","showPlayer","player","computed","round","methods","waitForPageLoad","toLocaleString","$toast","fail","eventsCount","$nextTick","$refs","playerContainer","innerHTML","rrwebPlayer","target","props","width","height","autoPlay","showController","skipInactive","speed","addEventListener","generateCompressedFile","Promise","resolve","MAX_SIZE","optimizedData","optimizeRecordData","jsonString","compressedData","finalJson","finalSize","furtherOptimized","furtherOptimizeData","recompressed","newCompressedData","optimized","newFinalJson","newFinalSize","map","optimizedEvent","href","node","initialOffset","source","id","positions","texts","attributes","keyEvents","SAMPLE_INTERVAL","lastTimestamp","originalEventsCount","sampledEventsCount","replace","filename","content","downloadFile","sizeInfo","optimizedText","mimeType","blob","url","URL","createObjectURL","link","document","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","pause","play","goto","setCurrentTime","destroy","$destroy","$el","parentNode","readyState","$dialog","alert","$router","beforeDestroy","currentPage","class","active","$event","navigateTo","visitedPages","_l","page","currentPageComponent","tag","onPageChange","_m","handleClick","showDialog","userInput","submitInfo","feature","title","searchText","selectedType","filterByType","product","selectProduct","rate","minAmount","period","riskLevel","stopPropagation","viewDetail","buyProduct","productTypes","products","filteredProducts","filtered","p","toLowerCase","includes","investAmount","customerName","agreeTerms","staticStyle","purchaseProduct","addToFavorites","form","$set","calculateIncome","confirmPurchase","amount","phone","idCard","agreeRisk","income","onRedeemTypeChange","isFullRedeem","calculateFee","confirmRedeem","redeemAmount","bankCard","agreeRedeem","fee","components","HomePage","ProductsPage","ProductDetailPage","PurchasePage","RedeemPage","pageStartTime","location","pageInfo","pageName","recordCrossOriginIframes","lastPage","totalPages","currentPageRecord","pageMap","newPageStartTime","query","action","onRecordStarted","onRecordDeclined","onRecordTimeout","onTimeoutConfirmed","back","handleModeDialogClose","showModeSelection","goToDetail","description","expectedReturn","handlePurchaseClick","goToRedeem","handleDialogClose","showRecordDialog","handleTimeout","showTimeoutDialog","showIndicator","recordingTime","showRecordingConsent","_t","Boolean","default","showControls","recordOptions","Object","autoStart","stopOnDestroy","timeoutDuration","Number","requireConsent","globalRecorder","recordingTimer","hasUserConsent","mounted","onRecordEvent","status","startRecordingTimer","clearTimers","$emit","$options","route","$route","path","stopTime","uploadResult","uploadVideoData","finalResult","stats","recordingData","uploadData","recordingInfo","eventsData","businessInfo","userAgent","navigator","version","response","fetch","method","headers","ok","statusText","json","uploadId","videoUrl","localStorageKey","localData","uploadFailedAt","localStorage","setItem","fallbackStorage","localError","clearInterval","setInterval","elapsed","formatTime","milliseconds","totalSeconds","floor","minutes","seconds","padStart","RecordWrapper","selectedProductId","preferredPurchaseMode","image","checkRecordingStatus","then","goToPurchase","triggerRecordingConsent","recordWrapper","selectPurchaseMode","mode","term","investmentDirection","features","created","loadProduct","parseInt","params","watch","productId","onRecordStopped","currentStep","nextStep","onFormSubmit","required","purchaseForm","validateAndNext","expectedProfit","maskedBankCard","purchasing","orderNo","purchaseTime","dataSize","isReplaying","startReplay","stopReplay","formatFileSize","goHome","goToProducts","password","replayPlayer","replayerObserver","parseFloat","profit","card","finishRecordingWithWrapper","$parent","findRecordWrapper","child","$children","found","$root","purchaseInfo","productName","async","bytes","k","i","pow","container","getElementById","style","position","overflow","border","borderRadius","backgroundColor","isArray","hasMetaEvent","some","e","hasSnapshot","offsetWidth","showWarning","showDebug","speedOption","mouseTail","tags","iframes","querySelectorAll","iframe","hasAttribute","setAttribute","$on","setupReplayerObserver","wrapperDiv","disconnect","MutationObserver","mutations","needsCheck","mutation","addedNodes","nodeType","className","tagName","querySelector","forceFixReplayerPosition","observe","childList","subtree","allPossibleReplayers","moved","element","parentElement","contains","fixReplayerPosition","bodyChildren","children","substring","background","left","top","transform","margin","padding","display","visibility","opacity","src","videos","video","controller","bottom","right","zIndex","debugReplayerStructure","getComputedStyle","offsetHeight","loaded","contentDocument","media","m","showRedeemTypePicker","redeemForm","redeemType","expectedArrival","redeeming","redeemNo","redeemTime","redeemTypeActions","onRedeemTypeSelect","redeemInfo","uploadRecordingData","processRecordingData","rawData","originalJson","compressedSizeBytes","processTime","optimizeRecordingData","optimizedEvents","step","ceil","_","simplifiedEvent","isCustom","plugin","originalEventCount","optimizedEventCount","processedData","compressionInfo","currentRecord","records","ScreenRecorder","options","uploadUrl","autoUpload","compressData","maxFileSize","uploadRecording","dataToUpload","compressRecordingData","getDataSize","mockUpload","jsonStr","addCustomEvent","payload","decompressData","generateDemoEvents","origin","childNodes","publicId","systemId","lang","textContent","x","y","flow","handleRecordTimeout","handleTimeoutConfirmed","loadFormData","savedForm","sessionStorage","getItem","parse","saveFormData","handler","deep","orderInfo","onRecordingFinished","newVal","oldVal","keys","immediate","loadOrderInfo","savedOrder","removeItem","use","routes","ProductList","meta","PurchaseStepOne","PurchaseStepTwo","PurchaseStepThree","PurchaseStepFour","redirect","router","base","beforeEach","to","next","config","productionTip","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}